"use client";import{a as he,c as at,d as ct,e as ut}from"./chunk-52JG5GGJ.js";import{a as Ve}from"./chunk-DBWINSQN.js";import{a as dt,b as Ke}from"./chunk-O6XRT2H3.js";import{a as fe}from"./chunk-INBEEENE.js";import{a as hc}from"./chunk-F26IQ5RE.js";import{b as Ut,c as Wt,d as le,e as Gt,f as gc,g as xc,i as Cc,k as bc,l as kc}from"./chunk-AFXLIYGL.js";import{a as fc,b as H}from"./chunk-BZZVLW4U.js";function Y(t){return{items:t,key:"basic",label:({i18n:e})=>e.t("lexical:general:slashMenuBasicGroupLabel")}}import{$isElementNode as Le,$isRangeSelection as Kt,FORMAT_ELEMENT_COMMAND as Jt}from"lexical";import{jsx as Oo,jsxs as _c}from"react/jsx-runtime";import"react";var rn=()=>_c("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[Oo("path",{d:"M2.5 5H17.5",stroke:"currentColor",strokeWidth:"1.5"}),Oo("path",{d:"M2.5 10H17.5",stroke:"currentColor",strokeWidth:"1.5"}),Oo("path",{d:"M5 15H15",stroke:"currentColor",strokeWidth:"1.5"})]});import{jsx as Fo,jsxs as Tc}from"react/jsx-runtime";import"react";var nn=()=>Tc("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[Fo("path",{d:"M2.5 5H17.5",stroke:"currentColor",strokeWidth:"1.5"}),Fo("path",{d:"M2.5 10H17.5",stroke:"currentColor",strokeWidth:"1.5"}),Fo("path",{d:"M2.5 15H17.5",stroke:"currentColor",strokeWidth:"1.5"})]});import{jsx as Po,jsxs as wc}from"react/jsx-runtime";import"react";var Vt=()=>wc("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[Po("path",{d:"M2.5 5H17.5",stroke:"currentColor",strokeWidth:"1.5"}),Po("path",{d:"M2.5 10H17.5",stroke:"currentColor",strokeWidth:"1.5"}),Po("path",{d:"M2.5 15H12.5",stroke:"currentColor",strokeWidth:"1.5"})]});import{jsx as Bo,jsxs as Ec}from"react/jsx-runtime";import"react";var ln=()=>Ec("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[Bo("path",{d:"M2.5 5H17.5",stroke:"currentColor",strokeWidth:"1.5"}),Bo("path",{d:"M2.5 10H17.5",stroke:"currentColor",strokeWidth:"1.5"}),Bo("path",{d:"M7.5 15H17.5",stroke:"currentColor",strokeWidth:"1.5"})]});var $=t=>o=>{let r={clientFeatureProps:o};if(typeof t=="function")r.feature=({config:n,featureClientImportMap:l,featureClientSchemaMap:i,featureProviderMap:s,field:d,resolvedFeatures:c,schemaPath:u,unSanitizedEditorConfig:a})=>{let m=t({config:n,featureClientImportMap:l,featureClientSchemaMap:i,featureProviderMap:s,field:d,props:o,resolvedFeatures:c,schemaPath:u,unSanitizedEditorConfig:a});return m.sanitizedClientFeatureProps===null&&(m.sanitizedClientFeatureProps=o),m};else{let n={...t};n.sanitizedClientFeatureProps=o,r.feature=n}return r};var sn=t=>({type:"dropdown",ChildComponent:Vt,items:t,key:"align",order:30});var an=[sn([{ChildComponent:Vt,isActive:({selection:t})=>{if(!Kt(t))return!1;for(let e of t.getNodes()){if(Le(e)&&e.getFormatType()==="left")continue;let o=e.getParent();if(!(Le(o)&&o.getFormatType()==="left"))return!1}return!0},key:"alignLeft",label:({i18n:t})=>t.t("lexical:align:alignLeftLabel"),onSelect:({editor:t})=>{t.dispatchCommand(Jt,"left")},order:1},{ChildComponent:rn,isActive:({selection:t})=>{if(!Kt(t))return!1;for(let e of t.getNodes()){if(Le(e)&&e.getFormatType()==="center")continue;let o=e.getParent();if(!(Le(o)&&o.getFormatType()==="center"))return!1}return!0},key:"alignCenter",label:({i18n:t})=>t.t("lexical:align:alignCenterLabel"),onSelect:({editor:t})=>{t.dispatchCommand(Jt,"center")},order:2},{ChildComponent:ln,isActive:({selection:t})=>{if(!Kt(t))return!1;for(let e of t.getNodes()){if(Le(e)&&e.getFormatType()==="right")continue;let o=e.getParent();if(!(Le(o)&&o.getFormatType()==="right"))return!1}return!0},key:"alignRight",label:({i18n:t})=>t.t("lexical:align:alignRightLabel"),onSelect:({editor:t})=>{t.dispatchCommand(Jt,"right")},order:3},{ChildComponent:nn,isActive:({selection:t})=>{if(!Kt(t))return!1;for(let e of t.getNodes()){if(Le(e)&&e.getFormatType()==="justify")continue;let o=e.getParent();if(!(Le(o)&&o.getFormatType()==="justify"))return!1}return!0},key:"alignJustify",label:({i18n:t})=>t.t("lexical:align:alignJustifyLabel"),onSelect:({editor:t})=>{t.dispatchCommand(Jt,"justify")},order:4}])],Sc=$({toolbarFixed:{groups:an},toolbarInline:{groups:an}});import{$createQuoteNode as hn,$isQuoteNode as pn,QuoteNode as yc}from"@lexical/rich-text";import{$setBlocksType as gn}from"@lexical/selection";import{$getSelection as xn,$isRangeSelection as Rc}from"lexical";import{jsx as cn}from"react/jsx-runtime";import"react";var jo=()=>cn("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:cn("path",{d:"M13.5353 10.5725C13.5353 9.47709 11.0456 9.99991 11.0456 7.85883C11.0456 6.46464 12.1162 5.61816 13.361 5.61816C14.805 5.61816 16 6.86298 16 8.92937C16 11.2945 14.4564 13.7841 11.1203 14.3816L10.8216 13.1368C12.888 12.4895 13.5353 11.4937 13.5353 10.5725ZM6.71369 10.5725C6.71369 9.47709 4.22407 9.99991 4.22407 7.85883C4.22407 6.46464 5.29461 5.61816 6.53942 5.61816C7.9834 5.61816 9.17842 6.86298 9.17842 8.92937C9.17842 11.2945 7.63485 13.7841 4.29876 14.3816L4 13.1368C6.06639 12.4895 6.71369 11.4937 6.71369 10.5725Z",fill:"currentColor"})});import{jsx as un}from"react/jsx-runtime";import"react";var mt=()=>un("svg",{"aria-hidden":"true",className:"icon",fill:"currentColor",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:un("path",{d:"M11.708 14.5H7.79785V13.9414H8.01367C9.00391 13.9414 9.15625 13.9033 9.15625 13.6113V6.70508H8.07715C6.82031 6.70508 6.73145 7.08594 6.28711 8.67285H5.80469L5.91895 6.12109H13.5869L13.7012 8.67285H13.2188C12.7744 7.08594 12.6855 6.70508 11.4287 6.70508H10.3496V13.6113C10.3496 13.9033 10.502 13.9414 11.4922 13.9414H11.708V14.5Z",fill:"currentColor"})});var te=t=>({type:"dropdown",ChildComponent:mt,items:t,key:"text",order:25});import{$createQuoteNode as Nc,$isQuoteNode as dn,QuoteNode as Lc}from"@lexical/rich-text";var mn={type:"element",dependencies:[Lc],export:(t,e)=>{if(!dn(t))return null;let o=e(t).split(`
`),r=[];for(let n of o)r.push("> "+n);return r.join(`
`)},regExp:/^>\s/,replace:(t,e,o,r)=>{if(r){let l=t.getPreviousSibling();if(dn(l)){l.splice(l.getChildrenSize(),0,[...e]),l.select(0,0),t.remove();return}}let n=Nc();n.append(...e),t.replace(n),n.select(0,0)}};var fn=[te([{ChildComponent:jo,isActive:({selection:t})=>{if(!Rc(t))return!1;for(let e of t.getNodes())if(!pn(e)&&!pn(e.getParent()))return!1;return!0},key:"blockquote",label:({i18n:t})=>t.t("lexical:blockquote:label"),onSelect:({editor:t})=>{t.update(()=>{let e=xn();gn(e,()=>hn())})},order:20}])],Ic=$({markdownTransformers:[mn],nodes:[yc],slashMenu:{groups:[Y([{Icon:jo,key:"blockquote",keywords:["quote","blockquote"],label:({i18n:t})=>t.t("lexical:blockquote:label"),onSelect:({editor:t})=>{t.update(()=>{let e=xn();gn(e,()=>hn())})}}])]},toolbarFixed:{groups:fn},toolbarInline:{groups:fn}});import{getTranslation as ro}from"@payloadcms/translations";import{jsx as Ho,jsxs as vc}from"react/jsx-runtime";import"react";var Xt=()=>vc("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[Ho("rect",{height:"4",rx:"0.5",stroke:"currentColor",width:"4",x:"8",y:"5"}),Ho("rect",{height:"4",rx:"0.5",stroke:"currentColor",width:"4",x:"5",y:"11"}),Ho("rect",{height:"4",rx:"0.5",stroke:"currentColor",width:"4",x:"11",y:"11"})]});import{jsx as Cn}from"react/jsx-runtime";import"react";var zt=()=>Cn("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:Cn("path",{clipRule:"evenodd",d:"M5.33333 6.5C5.11232 6.5 4.90036 6.5878 4.74408 6.74408C4.5878 6.90036 4.5 7.11232 4.5 7.33333V12.1667C4.5 12.3877 4.5878 12.5996 4.74408 12.7559C4.90036 12.9122 5.11232 13 5.33333 13H14.6667C14.8877 13 15.0996 12.9122 15.2559 12.7559C15.4122 12.5996 15.5 12.3877 15.5 12.1667V11.6667C15.5 11.3905 15.7239 11.1667 16 11.1667C16.2761 11.1667 16.5 11.3905 16.5 11.6667V12.1667C16.5 12.6529 16.3068 13.1192 15.963 13.463C15.6192 13.8068 15.1529 14 14.6667 14H5.33333C4.8471 14 4.38079 13.8068 4.03697 13.463C3.69315 13.1192 3.5 12.6529 3.5 12.1667V7.33333C3.5 6.8471 3.69315 6.38079 4.03697 6.03697C4.38079 5.69315 4.8471 5.5 5.33333 5.5H10.3333C10.6095 5.5 10.8333 5.72386 10.8333 6C10.8333 6.27614 10.6095 6.5 10.3333 6.5H5.33333ZM13 6.5C12.7239 6.5 12.5 6.27614 12.5 6C12.5 5.72386 12.7239 5.5 13 5.5H16C16.2761 5.5 16.5 5.72386 16.5 6V9C16.5 9.27614 16.2761 9.5 16 9.5C15.7239 9.5 15.5 9.27614 15.5 9V7.20711L13.3536 9.35355C13.1583 9.54882 12.8417 9.54882 12.6464 9.35355C12.4512 9.15829 12.4512 8.84171 12.6464 8.64645L14.7929 6.5H13ZM6.16699 8.33325C6.16699 8.05711 6.39085 7.83325 6.66699 7.83325H11.0003C11.2765 7.83325 11.5003 8.05711 11.5003 8.33325C11.5003 8.60939 11.2765 8.83325 11.0003 8.83325H6.66699C6.39085 8.83325 6.16699 8.60939 6.16699 8.33325ZM6.16699 10.9999C6.16699 10.7238 6.39085 10.4999 6.66699 10.4999H13.3337C13.6098 10.4999 13.8337 10.7238 13.8337 10.9999C13.8337 11.2761 13.6098 11.4999 13.3337 11.4999H6.66699C6.39085 11.4999 6.16699 11.2761 6.16699 10.9999Z",fill:"currentColor",fillRule:"evenodd"})});import{jsx as Mc}from"react/jsx-runtime";import"react";function Zt(t,e){return t?()=>Mc("img",{alt:e??"Block Image",className:"lexical-block-custom-image",src:t,style:{maxHeight:20,maxWidth:20}}):Xt}import{$parseSerializedNode as Rn}from"lexical";import{JSOX as Uo}from"jsox";function Yt({propsString:t}){let e={},o="",r=!0;for(let n=0;n<t.length;n++){let l=t[n];if(r)l==="="||l===" "?o&&(l===" "?(e[o]=!0,o=""):r=!1):o+=l;else{let i=Dc(t,n);e[o]=i.value,n=i.newIndex,o="",r=!0}}return o&&(e[o]=!0),e}function Dc(t,e){let o=t[e];return o==='"'?bn(t,e):o==="'"?bn(t,e,!0):o==="{"?Ac(t,e):o==="["?$c(t,e):Fc(t,e)}function $c(t,e){let o=1,r="",n=e+1;for(;n<t.length&&o>0;)t[n]==="["?o++:t[n]==="]"&&o--,o>0&&(r+=t[n]),n++;return{newIndex:n,value:Uo.parse(`[${r}]`)}}function bn(t,e,o=!1){let r="",n=e+1;for(;n<t.length&&(t[n]!==(o?"'":'"')||t[n-1]==="\\");)r+=t[n],n++;return{newIndex:n,value:r}}function Ac(t,e){let o=1,r="",n=e+1;for(;n<t.length&&o>0;)t[n]==="{"?o++:t[n]==="}"&&o--,o>0&&(r+=t[n]),n++;return{newIndex:n,value:Oc(r)}}function Oc(t){return t[0]!=="{"?Uo.parse(t):Uo.parse(t.replace(/(\w+):/g,'"$1":'))}function Fc(t,e){let o="",r=e;for(;r<t.length&&t[r]!==" ";)o+=t[r],r++;return{newIndex:r-1,value:o}}function pt({props:t}){let e=[];for(let[o,r]of Object.entries(t))typeof r=="string"?e.push(`${o}="${Pc(r)}"`):typeof r=="number"?e.push(`${o}={${r}}`):typeof r=="boolean"?r&&e.push(`${o}`):r!==null&&typeof r=="object"&&(Array.isArray(r)?e.push(`${o}={[${r.map(n=>JSON.stringify(n,kn)).join(", ")}]}`):e.push(`${o}={${JSON.stringify(r,kn)}}`));return e.join(" ")}function Pc(t){return t.replace(/"/g,"&quot;")}function kn(t,e){return typeof e=="string"?e.replace(/'/g,"\\'"):e}function qt({isEndOptional:t,lines:e,regexpEndRegex:o,startLineIndex:r,startMatch:n,trimChildren:l}){let i="",s="",d=e.slice(r),c=!1,u=0,a=0,m=null,p=!1,f=0,h=d[0].slice(0,n.index),x=0,_=r;e:for(let[S,T]of d.entries()){let C=l?T.trim():T,g=0;if(l)for(let k=0;k<T.length&&T[k]===" ";k++)g++;let b=0;for(S===0&&(b=(n.index??0)+n[0].length-g);b<C.length;){let k=C[b],y=C[b+1];if(c){if(k==="`"&&f++,f%2===0)if(k==="<"&&y==="/"){if(u--,u<0){s[s.length-1]===`
`&&(s=s.slice(0,-1)),_=S;for(let R=b;R<C.length;R++)if(C[R]===">"){x=R+1;break}break e}}else if(k==="/"&&y===">"){if(u--,u<0){s[s.length-1]===`
`&&(s=s.slice(0,-1)),_=S,x=b+2;break e}}else k==="<"&&y!=="/"&&u++;s+=k}else{if(k==="{"&&!m?a++:k==="}"&&!m?a--:(k==='"'||k==="'")&&!m?m=k:k===m&&(m=null),k==="/"&&y===">"&&a===0&&!m){p=!0,_=S,x=b+2;break e}else if(k===">"&&a===0&&!m){c=!0,b++;continue}i+=k}b++}if(c?s?.length>0&&S>0&&(s+=`
`):i+=`
`,o&&u<0){let k=C.match(o);if(k?.index!==void 0){_=S,x=k.index+k[0].length-1;break}}if(S===d.length-1&&!t&&!p)throw new Error("End match not found for lines "+e.join(`
`)+`

. Start match: `+JSON.stringify(n))}return{afterEndLine:d[_].trim().slice(x),beforeStartLine:h,content:s,endLineIndex:r+_,endlineLastCharIndex:x,propsString:i}}import{jsx as xu}from"react/jsx-runtime";import Cu from"bson-objectid";import{$applyNodeReplacement as bu}from"lexical";import"react";import{DecoratorBlockNode as Bc}from"@lexical/react/LexicalDecoratorBlockNode.js";import{addClassNamesToElement as jc}from"@lexical/utils";import Hc from"bson-objectid";import{$applyNodeReplacement as Uc}from"lexical";var ft=class extends Bc{__cacheBuster;__fields;constructor({cacheBuster:e,fields:o,format:r,key:n}){super(r,n),this.__fields=o,this.__cacheBuster=e||0}static clone(e){return new this({cacheBuster:e.__cacheBuster,fields:e.__fields,format:e.__format,key:e.__key})}static getType(){return"block"}static importDOM(){return{}}static importJSON(e){e.version===1&&(e={...e,fields:{...e.fields.data},version:2});let o=Wc(e.fields);return o.setFormat(e.format),o}static isInline(){return!1}createDOM(e){let o=document.createElement("div");return jc(o,e?.theme?.block),o}decorate(e,o){return null}exportDOM(){let e=document.createElement("div"),o=document.createTextNode(this.getTextContent());return e.append(o),{element:e}}exportJSON(){return{...super.exportJSON(),type:"block",fields:this.getFields(),version:2}}getCacheBuster(){return this.getLatest().__cacheBuster}getFields(){return this.getLatest().__fields}getTextContent(){return"Block Field"}setFields(e,o){let r=this.getWritable();r.__fields=e,o||r.__cacheBuster++}};function Wc(t){return Uc(new ft({fields:{...t,id:t?.id||new Hc.default().toHexString()}}))}import{jsx as V,jsxs as ht,Fragment as En}from"react/jsx-runtime";import{useLexicalComposerContext as Yc}from"@lexical/react/LexicalComposerContext";import{useLexicalEditable as qc}from"@lexical/react/useLexicalEditable";import{getTranslation as Qc}from"@payloadcms/translations";import{Button as Sn,Collapsible as eu,Drawer as tu,EditDepthProvider as ou,ErrorPill as ru,Form as nu,formatDrawerSlug as lu,FormSubmit as iu,Pill as su,RenderFields as au,SectionTitle as cu,useConfig as uu,useDocumentForm as du,useDocumentInfo as Nn,useEditDepth as mu,useFormSubmitted as pu,useServerFunctions as fu,useTranslation as hu}from"@payloadcms/ui";import{abortAndIgnore as Wo}from"@payloadcms/ui/shared";import{$getNodeByKey as eo}from"lexical";import{deepCopyObjectSimpleWithoutReactComponents as to,reduceFieldsToValues as Ln}from"payload/shared";import gt,{useCallback as Go,useEffect as Vo,useMemo as xt,useRef as Ko}from"react";import{v4 as gu}from"uuid";import{c as Gc}from"react/compiler-runtime";import{jsx as Qt,jsxs as Vc}from"react/jsx-runtime";import{useLexicalEditable as Kc}from"@lexical/react/useLexicalEditable";import{RenderFields as Jc,useFormSubmitted as Xc}from"@payloadcms/ui";import zc,{createContext as Zc}from"react";var _n=Zc({baseClass:"LexicalEditorTheme__block",BlockCollapsible:()=>null,BlockDrawer:()=>null,CustomBlock:null,EditButton:()=>null,errorCount:0,formSchema:[],initialState:!1,nodeKey:"",RemoveButton:()=>null}),ge=()=>zc.use(_n),Tn=t=>{let e=Gc(4),{Collapsible:o,...r}=t,{BlockDrawer:n,CustomBlock:l,errorCount:i,formSchema:s}=r,c=Xc()&&i>0,u=Kc(),a;e[0]!==o||e[1]!==i||e[2]!==c?(a=p=>{let{children:f,...h}=p;return Qt(o,{errorCount:i,fieldHasErrors:c,...h,children:f})},e[0]=o,e[1]=i,e[2]=c,e[3]=a):a=e[3];let m=a;return l?Vc(_n,{value:{...r,BlockCollapsible:m},children:[l,Qt(n,{})]}):Qt(m,{children:Qt(Jc,{fields:s,forceRender:!0,parentIndexPath:"",parentPath:"",parentSchemaPath:"",permissions:!0,readOnly:!u})})};function wn({fields:t}){for(let e in t){let o=t[e];Array.isArray(o?.rows)&&"value"in o&&(o.disableFormData=!0)}return t}var yn=t=>{let{cacheBuster:e,className:o,formData:r,nodeKey:n}=t,l=pu(),{id:i,collectionSlug:s,globalSlug:d}=Nn(),{fieldProps:{featureClientSchemaMap:c,field:u,initialLexicalFormState:a,schemaPath:m},uuid:p}=H(),{fields:f}=du(),h=Ko(new AbortController),x=mu(),[_,E]=gt.useState(0),{config:S}=uu(),T=lu({slug:`lexical-blocks-create-${p}-${r.id}`,depth:x}),{toggleDrawer:C}=fe(T),{getDocPreferences:g,setDocFieldPreferences:b}=Nn(),[k]=Yc(),y=qc(),R=r.blockType,{getFormState:M}=fu(),L=`${m}.lexical_internal_feature.blocks.lexical_blocks.${R}.fields`,[w,N]=gt.useState(()=>{let j=a?.[r.id]?.formState;return j?Object.fromEntries(Object.entries(j).map(([z,W])=>[z,z in r?{...W,initialValue:r[z],value:r[z]}:W])):!1}),I=Ko(!1),A=Ko(e);Vo(()=>{I.current?(A.current!==e&&N(!1),A.current=e):I.current=!0},[e]);let[v,O]=gt.useState(w?._components?.customComponents?.BlockLabel??void 0),[D,G]=gt.useState(w?._components?.customComponents?.Block??void 0);Vo(()=>{let j=new AbortController;return r&&!w&&(async()=>{let{state:W}=await M({id:i,collectionSlug:s,data:r,docPermissions:{fields:!0},docPreferences:await g(),documentFormState:to(f),globalSlug:d,initialBlockData:r,operation:"update",readOnly:!y,renderAllFields:!0,schemaPath:L,signal:j.signal});if(W){W.blockName={initialValue:r.blockName,passesCondition:!0,valid:!0,value:r.blockName};let Z=Ln(to(W),!0);k.update(()=>{let ee=eo(n);if(ee&&Me(ee)){let ne=Z;ne.blockType=R,ee.setFields(ne,!0)}}),N(W),O(W._components?.customComponents?.BlockLabel??void 0),G(W._components?.customComponents?.Block??void 0)}})(),()=>{Wo(j)}},[M,L,y,i,r,k,n,w,s,d,g,f,R]);let[Q,J]=gt.useState(a?.[r.id]?.collapsed??!1),Ft=`${m}.lexical_internal_feature.blocks.lexical_blocks.${R}`,X=c.blocks?.[Ft]?.[0],U=X.blockReferences?typeof X?.blockReferences?.[0]=="string"?S.blocksMap[X?.blockReferences?.[0]]:X?.blockReferences?.[0]:X?.blocks?.[0],{i18n:Ue,t:Se}=hu(),pe=Go(async({formState:j,submit:z})=>{Wo(h.current);let W=new AbortController;h.current=W;let{state:Z}=await M({id:i,collectionSlug:s,docPermissions:{fields:!0},docPreferences:await g(),documentFormState:to(f),formState:j,globalSlug:d,initialBlockFormState:j,operation:"update",readOnly:!y,renderAllFields:!!z,schemaPath:L,signal:W.signal});if(!Z)return j;j.blockName&&(Z.blockName=j.blockName);let ee=Ln(wn({fields:to(Z)}),!0);if(setTimeout(()=>{k.update(()=>{let ne=eo(n);if(ne&&Me(ne)){let Ge=ee;Ge.blockType=R,ne.setFields(Ge,!0)}})},0),z){O(Z._components?.customComponents?.BlockLabel??void 0),G(Z._components?.customComponents?.Block??void 0);let ne=0;for(let Ge of Object.values(Z))Ge?.valid===!1&&ne++;E(ne)}return Z},[M,i,s,g,d,L,R,f,y,k,n]);Vo(()=>()=>{Wo(h.current)},[]);let Bt=Go(()=>{k.update(()=>{eo(n)?.remove()})},[k,n]),Ne=U?.labels?.singular?Qc(U.labels.singular,Ue):U?.slug,jt=Go(j=>{g().then(z=>{let Z=z?.fields?.[u.name]?.collapsed,ee=Z&&Z?.length?Z:[];j?ee.includes(r.id)||ee.push(r.id):ee.includes(r.id)&&ee.splice(ee.indexOf(r.id),1),b(u.name,{collapsed:ee,hello:"hi"})})},[g,u.name,b,r.id]),We=xt(()=>()=>V(Sn,{buttonStyle:"icon-label",className:`${o}__editButton`,disabled:!y,el:"button",icon:"edit",onClick:j=>(j.preventDefault(),j.stopPropagation(),C(),!1),onMouseDown:j=>{j.preventDefault()},round:!0,size:"small",tooltip:Se("lexical:blocks:inlineBlocks:edit",{label:Ne})}),[o,y,Se,Ne,C]),Ht=xt(()=>()=>V(Sn,{buttonStyle:"icon-label",className:`${o}__removeButton`,disabled:!y,icon:"x",onClick:j=>{j.preventDefault(),Bt()},round:!0,tooltip:"Remove Block"}),[o,y,Bt]),$o=xt(()=>({Actions:j,children:z,className:W,collapsibleProps:Z,disableBlockName:ee,editButton:ne,errorCount:Ge,fieldHasErrors:Ao,Label:en,Pill:tn,removeButton:pc})=>V("div",{className:`${o}__container ${o}-${R}`,children:V(eu,{className:[`${o}__row`,Ao?`${o}__row--has-errors`:`${o}__row--no-errors`,W].filter(Boolean).join(" "),collapsibleStyle:Ao?"error":"default",header:ht("div",{className:`${o}__block-header`,children:[typeof en<"u"?en:typeof v<"u"?v:ht("div",{className:`${o}__block-label`,children:[typeof tn<"u"?tn:V(su,{className:`${o}__block-pill ${o}__block-pill-${R}`,pillStyle:"white",size:"small",children:Ne??R}),!ee&&!U?.admin?.disableBlockName&&V(cu,{path:"blockName",readOnly:!y}),Ao&&V(ru,{count:Ge??0,i18n:Ue,withMessage:!0})]}),V("div",{className:`${o}__block-actions`,children:typeof j<"u"?j:ht(En,{children:[D&&ne!==!1||!D&&ne?V(We,{}):null,pc!==!1&&y?V(Ht,{}):null]})})]}),isCollapsed:Q,onToggle:on=>{jt(on),J(on)},...Z||{},children:z},0)}),[D,v,We,Ht,Ne,o,U?.admin?.disableBlockName,R,Ue,Q,jt,y]),qr=r?.id,Qr=xt(()=>()=>V(ou,{children:V(tu,{className:"",slug:T,title:Se(`lexical:blocks:inlineBlocks:${qr?"edit":"create"}`,{label:Ne??Se("lexical:blocks:inlineBlocks:label")}),children:w?ht(En,{children:[V(au,{fields:U?.fields??[],forceRender:!0,parentIndexPath:"",parentPath:"",parentSchemaPath:L,permissions:!0,readOnly:!y}),V(iu,{programmaticSubmit:!0,children:Se("fields:saveChanges")})]}):null})}),[w,T,qr,Ne,Se,y,U?.fields,L]),mc=xt(()=>w?V(nu,{beforeSubmit:[async({formState:j})=>await pe({formState:j,submit:!0})],el:"div",fields:U?.fields??[],initialState:w,onChange:[pe],onSubmit:(j,z)=>{z.blockType=R,k.update(()=>{let W=eo(n);W&&Me(W)&&W.setFields(z,!0)}),C()},submitted:l,uuid:gu(),children:V(Tn,{baseClass:o,BlockDrawer:Qr,Collapsible:$o,CustomBlock:D,EditButton:We,errorCount:_,formSchema:U?.fields??[],initialState:w,nodeKey:n,RemoveButton:Ht})}):null,[$o,Qr,D,R,Ht,We,o,k,_,C,U?.fields,w,n,pe,l]);return U?mc:V($o,{disableBlockName:!0,fieldHasErrors:!0,children:ht("div",{className:`${o}-not-found`,children:["Error: Block '",R,"' not found in the config but exists in the lexical data"]})})};var ie=class extends ft{static clone(e){return super.clone(e)}static getType(){return super.getType()}static importJSON(e){e.version===1&&(e={...e,fields:{...e.fields.data},version:2});let o=De(e.fields);return o.setFormat(e.format),o}decorate(e,o){return xu(yn,{cacheBuster:this.getCacheBuster(),className:o.theme.block??"LexicalEditorTheme__block",formData:this.getFields(),nodeKey:this.getKey()})}exportJSON(){return super.exportJSON()}};function De(t){return bu(new ie({fields:{...t,id:t?.id||new Cu.default().toHexString()}}))}function Me(t){return t instanceof ie}import{createHeadlessEditor as ku}from"@lexical/headless";function Jo(t,e){return({editorState:r})=>{let n=ku({nodes:t});try{n.setEditorState(n.parseEditorState(r))}catch(i){console.error("getLexicalToMarkdown: ERROR parsing editor state",i)}let l="";return n.getEditorState().read(()=>{l=Wt(e)}),l}}import{createHeadlessEditor as _u}from"@lexical/headless";function oo(t,e){return({markdown:r})=>{let n=_u({nodes:t});return n.update(()=>{Ut(r,e)},{discrete:!0}),n.getEditorState().toJSON()}}function Tu(t){let e=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{regExpEnd:new RegExp(`</(${e})\\s*>|<${e}[^>]*?/>`,"i"),regExpStart:new RegExp(`<(${e})([^>]*?)\\s*(/?)>`,"i")}}var vn=({blocks:t,inlineBlocks:e})=>{if(!t?.length&&!e?.length)return[];let o=[];if(t?.length)for(let r of t){let n=In(r,!1);n&&(o=o.concat(n))}if(e?.length)for(let r of e){let n=In(r,!0);n&&(o=o.concat(n))}return o};function In(t,e){if(!t.jsx)return null;let o=Tu(t.slug),r=[];return e?(r.push(({allNodes:n,allTransformers:l})=>({type:"text-match",dependencies:[at],export:i=>{if(!ut(i)||i.getFields()?.blockType?.toLowerCase()!==t.slug.toLowerCase())return null;let s=i.getFields(),d=Jo(n,l),c=t.jsx.export({fields:s,lexicalToMarkdown:d});if(c===!1)return null;if(typeof c=="string")return c;let u=c.props&&Object.keys(c.props)?.length>0,a=c.props??{};return c?.children?.length?`<${s.blockType}${u?" "+pt({props:a}):""}>${c.children}</${s.blockType}>`:`<${s.blockType}${u?" "+pt({props:a}):""}/>`},getEndIndex:(i,s)=>{let{endlineLastCharIndex:d}=qt({isEndOptional:!1,lines:[i.getTextContent()],regexpEndRegex:o.regExpEnd,startLineIndex:0,startMatch:s,trimChildren:!1});return d},importRegExp:t.jsx?.customStartRegex??o.regExpStart,regExp:/___ignoreignoreignore___/g,replace(i,s){let{content:d,propsString:c}=qt({isEndOptional:!1,lines:[i.getTextContent()],regexpEndRegex:o.regExpEnd,startLineIndex:0,startMatch:{...s,index:0},trimChildren:!1});if(!t?.jsx?.import)return;let u=oo(n,l),a=t.jsx.import({children:d,closeMatch:null,htmlToLexical:null,markdownToLexical:u,openMatch:s,props:c?Yt({propsString:c}):{}});if(a===!1)return;let m=ct({blockType:t.slug,...a});i.replace(m)}})),r):(r.push(({allNodes:n,allTransformers:l})=>({dependencies:[ie],export:i=>{if(!Me(i)||i.getFields()?.blockType?.toLowerCase()!==t.slug.toLowerCase())return null;let s=i.getFields(),d=Jo(n,l),c=t.jsx.export({fields:s,lexicalToMarkdown:d});if(c===!1)return null;if(typeof c=="string")return c;let u=c.props&&Object.keys(c.props)?.length>0,a=c.props??{};if(c?.children?.length){let m=c.children,p="";if(m.includes(`
`))for(let f of m.split(`
`)){let h="";!t?.jsx?.doNotTrimChildren&&f!==""&&(h="  "),h+=f+`
`,p+=h}else p=(t?.jsx?.doNotTrimChildren?"":"  ")+m+`
`;return`<${s.blockType}${u?" "+pt({props:a}):""}>
${p}</${s.blockType}>`}return`<${s.blockType}${u?" "+pt({props:a}):""}/>`},handleImportAfterStartMatch:t.jsx?.customEndRegex?void 0:({lines:i,rootNode:s,startLineIndex:d,startMatch:c,transformer:u})=>{let a=typeof u.regExpEnd=="object"&&"regExp"in u.regExpEnd?u.regExpEnd.regExp:u.regExpEnd,m=u.regExpEnd&&typeof u.regExpEnd=="object"&&"optional"in u.regExpEnd?u.regExpEnd.optional:!u.regExpEnd,{afterEndLine:p,beforeStartLine:f,content:h,endLineIndex:x,propsString:_}=qt({isEndOptional:m,lines:i,regexpEndRegex:a,startLineIndex:d,startMatch:c,trimChildren:!1}),E="";if(t?.jsx?.doNotTrimChildren)E=h.endsWith(`
`)?h.slice(0,-1):h;else if(h.includes(`
`)){let g=h.split(`
`),b=0;for(let k of g){if(b++,k.startsWith("  "))E+=k.slice(2);else if(k==="")E+=k;else{E=h.endsWith(`
`)?h.slice(0,-1):h;break}E+=b===g.length?"":`
`}}else E=(h.startsWith("  ")?h.slice(2):h)+`
`;if(!t?.jsx?.import)return[!1,d];let S=oo(n,l),T=t.jsx.import({children:E,closeMatch:null,htmlToLexical:null,markdownToLexical:S,openMatch:c,props:_?Yt({propsString:_}):{}});if(T===!1)return[!1,d];let C=De({blockType:t.slug,...T});if(C){let g=null,b=null;if(f?.length){g=S({markdown:f})?.root?.children??[];let k=g?.[0];k&&s.append(Rn(k))}if(s.append(C),p?.length){b=S({markdown:p})?.root?.children;let k=s.getChildren()[s.getChildren().length-1],y=Rn(b[0])?.getChildren();if(y?.length)for(let R of y)k.append(R)}}return[!0,x]},regExpEnd:t.jsx?.customEndRegex??o.regExpEnd,regExpStart:t.jsx?.customStartRegex??o.regExpStart,type:"multiline-element",replace:(i,s,d,c,u)=>{if(t?.jsx?.import){if(!u){let x="";if(s)for(let _ of s)x+=_.getTextContent();u=[x]}let a="";t?.jsx?.doNotTrimChildren?a=u.join(`
`):a=u.join(`
`).trim();let m=d[1]?.trim(),p=oo(n,l),f=t.jsx.import({children:a,closeMatch:c,htmlToLexical:null,markdownToLexical:p,openMatch:d,props:m?Yt({propsString:m}):{}});if(f===!1)return!1;let h=De({blockType:t.slug,...f});h&&i.append(h);return}return!1}})),r)}import{createCommand as Mn}from"lexical";var Je=Mn("INSERT_BLOCK_COMMAND"),Xe=Mn("INSERT_INLINE_BLOCK_COMMAND");import{c as wu}from"react/compiler-runtime";import{useLexicalComposerContext as Eu}from"@lexical/react/LexicalComposerContext.js";import{$insertNodeToNearestRoot as Su,$wrapNodeInElement as Nu,mergeRegister as Lu}from"@lexical/utils";import{formatDrawerSlug as yu,useEditDepth as Ru}from"@payloadcms/ui";import{$createParagraphNode as Iu,$getNodeByKey as vu,$getPreviousSelection as Mu,$getSelection as Du,$insertNodes as $u,$isParagraphNode as Au,$isRangeSelection as Ou,$isRootOrShadowRoot as Fu,COMMAND_PRIORITY_EDITOR as Dn}from"lexical";import{useEffect as Pu,useState as Bu}from"react";var $n=()=>{let t=wu(12),[e]=Eu(),[o,r]=Bu(null),{setCreatedInlineBlock:n,uuid:l}=H(),i=Ru(),s="lexical-inlineBlocks-create-"+l,d;t[0]!==i||t[1]!==s?(d=yu({slug:s,depth:i}),t[0]=i,t[1]=s,t[2]=d):d=t[2];let c=d,{toggleDrawer:u}=fe(c,!0),a;t[3]!==e||t[4]!==n||t[5]!==o?(a=()=>{if(!e.hasNodes([ie]))throw new Error("BlocksPlugin: BlocksNode not registered on editor");return Lu(e.registerCommand(Je,p=>(e.update(()=>{let f=Du()||Mu();if(Ou(f)){let h=De(p),{focus:x}=f,_=x.getNode();Su(h),Au(_)&&!_.__first&&_.remove()}}),!0),Dn),e.registerCommand(Xe,p=>{if(o){let h=vu(o);return!h||!ut(h)?!1:(h.setFields(p),r(null),!0)}let f=ct(p);return n?.(f),$u([f]),Fu(f.getParentOrThrow())&&Nu(f,Iu).selectEnd(),!0},Dn))},t[3]=e,t[4]=n,t[5]=o,t[6]=a):a=t[6];let m;return t[7]!==e||t[8]!==n||t[9]!==o||t[10]!==u?(m=[e,n,o,u],t[7]=e,t[8]=n,t[9]=o,t[10]=u,t[11]=m):m=t[11],Pu(a,m),null};var ju=$(({config:t,featureClientSchemaMap:e,props:o,schemaPath:r})=>{let n=`${r}.lexical_internal_feature.blocks.lexical_blocks`,l=`${r}.lexical_internal_feature.blocks.lexical_inline_blocks`,i=e.blocks;if(!i)return{};let s=Object.entries(i).filter(([a])=>a.startsWith(n+".")&&!a.replace(n+".","").includes(".")).map(([,a])=>a[0]),d=Object.entries(i).filter(([a])=>a.startsWith(l+".")&&!a.replace(l+".","").includes(".")).map(([,a])=>a[0]),c=s.map(a=>a.blockReferences?typeof a.blockReferences[0]=="string"?t.blocksMap[a.blockReferences[0]]:a.blockReferences[0]:a.blocks[0]).filter(a=>a!==void 0),u=d.map(a=>a.blockReferences?typeof a.blockReferences[0]=="string"?t.blocksMap[a.blockReferences[0]]:a.blockReferences[0]:a.blocks[0]).filter(a=>a!==void 0);return{markdownTransformers:vn({blocks:c,inlineBlocks:u}),nodes:[ie,at],plugins:[{Component:$n,position:"normal"}],sanitizedClientFeatureProps:o,slashMenu:{groups:[c?.length?{items:c.map(a=>({Icon:Zt(a.imageURL,a.imageAltText),key:"block-"+a.slug,keywords:["block","blocks",a.slug],label:({i18n:m})=>a?.labels?.singular?ro(a.labels.singular,m):a?.slug,onSelect:({editor:m})=>{m.dispatchCommand(Je,{blockName:"",blockType:a.slug})}})),key:"blocks",label:({i18n:a})=>a.t("lexical:blocks:label")}:null,u?.length?{items:u.map(a=>({Icon:zt,key:"inlineBlocks-"+a.slug,keywords:["inlineBlock","inline block",a.slug],label:({i18n:m})=>a?.labels?.singular?ro(a.labels.singular,m):a?.slug,onSelect:({editor:m})=>{m.dispatchCommand(Xe,{blockName:"",blockType:a.slug})}})),key:"inlineBlocks",label:({i18n:a})=>a.t("lexical:blocks:inlineBlocks:label")}:null].filter(Boolean)},toolbarFixed:{groups:[c.length?{type:"dropdown",ChildComponent:Xt,items:c.map((a,m)=>({ChildComponent:Zt(a.imageURL,a.imageAltText),isActive:void 0,key:"block-"+a.slug,label:({i18n:p})=>a?.labels?.singular?ro(a.labels.singular,p):a?.slug,onSelect:({editor:p})=>{p.dispatchCommand(Je,{blockName:"",blockType:a.slug})},order:m})),key:"blocks",order:20}:null,u?.length?{type:"dropdown",ChildComponent:zt,items:u.map((a,m)=>({ChildComponent:a.imageURL?Zt(a.imageURL,a.imageAltText):zt,isActive:void 0,key:"inlineBlock-"+a.slug,label:({i18n:p})=>a?.labels?.singular?ro(a.labels.singular,p):a?.slug,onSelect:({editor:p})=>{p.dispatchCommand(Xe,{blockName:"",blockType:a.slug})},order:m})),key:"inlineBlocks",order:25}:null].filter(Boolean)}}});import{c as Wu}from"react/compiler-runtime";import{jsx as Ae,jsxs as Yo}from"react/jsx-runtime";import{useLexicalComposerContext as Gu}from"@lexical/react/LexicalComposerContext.js";import{$createParagraphNode as Vu,$createTextNode as Ku,$getRoot as Ju,getDOMSelection as Xo}from"lexical";import*as Bn from"react";import{useCallback as $e,useEffect as zo,useLayoutEffect as On,useRef as Zo,useState as no}from"react";var Hu=le&&"documentMode"in document?document.documentMode:null,An=le&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),R5=le&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),I5=le&&"InputEvent"in window&&!Hu?"getTargetRanges"in new window.InputEvent("input"):!1,v5=le&&/Version\/[\d.].*Safari/.test(navigator.userAgent),M5=le&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,D5=le&&/Android/.test(navigator.userAgent),$5=le&&/Win/.test(navigator.platform),Uu=le&&/^(?=.*Chrome).*/i.test(navigator.userAgent),A5=le&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!Uu;var Xu=t=>{let e=document.createElement("textarea");e.value=t||"",e.style.position="absolute",e.style.opacity="0",document.body?.appendChild(e),e.focus(),e.select();try{let o=document.execCommand("copy");console.log(o)}catch(o){console.error(o)}document.body?.removeChild(e)},zu=(t,e)=>{let o=document.createElement("a");o.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e||"")),o.setAttribute("download",t),o.style.display="none",document.body?.appendChild(o),o.click(),document.body?.removeChild(o)},Zu=t=>{let o=((r,n)=>{switch(r){case"click":return`      await page.mouse.click(${n.x}, ${n.y});`;case"keydown":return`      await page.keyboard.keydown('${n}');`;case"keyup":return`      await page.keyboard.keyup('${n}');`;case"press":return`      await page.keyboard.press('${n}');`;case"selectAll":return"      await selectAll(page);";case"snapshot":return`      await assertHTMLSnapshot(page);
      await assertSelection(page, {
        anchorPath: [${n.anchorPath.toString()}],
        anchorOffset: ${n.anchorOffset},
        focusPath: [${n.focusPath.toString()}],
        focusOffset: ${n.focusOffset},
      });
`;case"type":return`      await page.keyboard.type('${n}');`;default:return""}})(t.name,t.value);switch(t.count){case 1:return o;case 2:return[o,o].join(`
`);default:return`      await repeat(${t.count}, async () => {
  ${o}
      );`}};function Yu(t){return t.key.toLowerCase()==="a"&&(An?t.metaKey:t.ctrlKey)}function qu(t){let{anchorNode:e,focusNode:o}=t,{anchorOffset:r,focusOffset:n}=t;return r!==0&&r--,n!==0&&n--,{anchorNode:e,anchorOffset:r,focusNode:o,focusOffset:n}}function Fn(t,e){let o=t,r=[];for(;o!==e;)o!=null&&r.unshift(Array.from(o?.parentNode?.childNodes??[]).indexOf(o)),o=o?.parentNode;return r}var Pn=new Set(["ArrowDown","ArrowLeft","ArrowRight","ArrowUp","Backspace","Delete","Enter","Escape"]);function Qu(t){let[e,o]=no([]),[r,n]=no(!1),[,l]=no(""),[i,s]=no(""),d=Zo(null),c=Zo(!1),u=Zo(null),a=$e(()=>t,[t]),m=$e(()=>{let T=t.getRootElement(),C=Xo(t._window);return T==null||C==null||C.anchorNode==null||C.focusNode==null||!T.contains(C.anchorNode)||!T.contains(C.focusNode)?null:`
import {
  initializeE2E,
  assertHTMLSnapshot,
  assertSelection,
  repeat,
} from '../utils';
import {selectAll} from '../keyboardShortcuts';
import { RangeSelection } from 'lexical';
import { NodeSelection } from 'lexical';

describe('Test case', () => {
  initializeE2E((e2e) => {
    it('Should pass this test', async () => {
      const {page} = e2e;

      await page.focus('div[contenteditable="true"]');
${e.map(Zu).join(`
`)}
    });
});
    `},[t,e]),p=$e((T,C)=>{o(g=>{let b=e.length-1,k=e[b];if(k&&k.name===T){if(T==="type")return[...e.slice(0,b),{...k,value:k.value+C}];if(k.value===C)return[...e.slice(0,b),{...k,count:k.count+1}]}return[...g,{name:T,count:1,value:C}]})},[e,o]);On(()=>{let T=g=>{if(!r)return;let b=g.key;Yu(g)?p("selectAll",""):Pn.has(b)?p("press",g.key):[...b].length>1?p("keydown",g.key):p("type",g.key)},C=g=>{if(!r)return;let b=g.key;!Pn.has(b)&&[...b].length>1&&p("keyup",g.key)};return t.registerRootListener((g,b)=>{b!==null&&(b.removeEventListener("keydown",T),b.removeEventListener("keyup",C)),g!==null&&(g.addEventListener("keydown",T),g.addEventListener("keyup",C))})},[t,r,p]),On(()=>{u.current&&u.current.scrollTo(0,u.current.scrollHeight)},[m]),zo(()=>{if(e){let T=m();T!==null&&s(T),u.current&&u.current.scrollTo(0,u.current.scrollHeight)}},[m,e]),zo(()=>t.registerUpdateListener(({dirtyElements:C,dirtyLeaves:g,editorState:b})=>{if(!r)return;let k=b._selection,y=d.current,R=c.current;if(y!==k){if(g.size===0&&C.size===0&&!R){let L=Xo(t._window);if(L&&(L.anchorNode==null||L.focusNode==null))return}d.current=k}c.current=!1;let M=m();M!==null&&s(M)}),[t,m,r,p]),zo(()=>r?t.registerUpdateListener(()=>{let C=t.getRootElement();C!==null&&l(C?.innerHTML)}):void 0,[t,r]);let f=$e(T=>{r||(T.update(()=>{let C=Ju();C.clear();let g=Ku();C.append(Vu().append(g)),g.select()}),o([])),n(C=>!C)},[r]),h=$e(()=>{if(!r)return;let T=Xo(t._window);if(T===null||T.anchorNode==null||T.focusNode==null)return;let{anchorNode:C,anchorOffset:g,focusNode:b,focusOffset:k}=qu(T),y=a().getRootElement(),R;C!==null&&(R=Fn(C,y));let M;b!==null&&(M=Fn(b,y)),p("snapshot",{anchorNode:C,anchorOffset:g,anchorPath:R,focusNode:b,focusOffset:k,focusPath:M})},[p,r,a]),x=$e(()=>{Xu(m())},[m]),_=$e(()=>{zu("test.js",m())},[m]);return[Ae("button",{className:`editor-dev-button ${r?"active":""}`,id:"test-recorder-button",onClick:T=>{f(a()),T.preventDefault()},title:r?"Disable test recorder":"Enable test recorder",type:"button",children:r?"Disable test recorder":"Enable test recorder"}),r?Yo("div",{className:"test-recorder-output",children:[Yo("div",{className:"test-recorder-toolbar",children:[Ae("button",{className:"test-recorder-button",id:"test-recorder-button-snapshot",onClick:T=>{h(),T.preventDefault()},title:"Insert snapshot",type:"button",children:"Insert Snapshot"}),Ae("button",{className:"test-recorder-button",id:"test-recorder-button-copy",onClick:T=>{x(),T.preventDefault()},title:"Copy to clipboard",type:"button",children:"Copy"}),Ae("button",{className:"test-recorder-button",id:"test-recorder-button-download",onClick:T=>{_(),T.preventDefault()},title:"Download as a file",type:"button",children:"Download"})]}),Ae("pre",{id:"test-recorder",ref:u,children:i})]}):null]}var jn=()=>{let t=Wu(3),[e]=Gu(),[o,r]=Qu(e),n;return t[0]!==o||t[1]!==r?(n=Yo(Bn.Fragment,{children:[Ae("p",{children:"HI"}),o,r,Ae("p",{children:"DONE"})]}),t[0]=o,t[1]=r,t[2]=n):n=t[2],n};var ed=$({plugins:[{Component:jn,position:"bottom"}]});import{c as td}from"react/compiler-runtime";import{jsx as od}from"react/jsx-runtime";import{useLexicalComposerContext as rd}from"@lexical/react/LexicalComposerContext.js";import{TreeView as nd}from"@lexical/react/LexicalTreeView.js";import"react";var Hn=()=>{let t=td(2),[e]=rd(),o;return t[0]!==e?(o=od(nd,{editor:e,timeTravelButtonClassName:"debug-timetravel-button",timeTravelPanelButtonClassName:"debug-timetravel-panel-button",timeTravelPanelClassName:"debug-timetravel-panel",timeTravelPanelSliderClassName:"debug-timetravel-panel-slider",treeTypeButtonClassName:"debug-treetype-button",viewClassName:"tree-view-output"}),t[0]=e,t[1]=o):o=t[1],o};var ld=$({plugins:[{Component:Hn,position:"bottom"}]});import{$isTableSelection as id}from"@lexical/table";import{$isRangeSelection as sd,FORMAT_TEXT_COMMAND as ad}from"lexical";import{jsx as Un}from"react/jsx-runtime";import"react";var Wn=()=>Un("svg",{"aria-hidden":"true",className:"icon",fill:"currentColor",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:Un("path",{d:"M10.6772 15H6.27017V5.718H10.4172C12.6792 5.718 13.8492 6.602 13.8492 8.292C13.8492 9.098 13.1992 9.982 12.4712 10.216C13.3812 10.476 14.1742 11.256 14.1742 12.322C14.1742 14.09 12.9002 15 10.6772 15ZM8.46717 9.501H10.3262C11.3012 9.501 11.7042 9.046 11.7042 8.409C11.7042 7.72 11.2362 7.317 10.3392 7.317H8.46717V9.501ZM8.46717 11.061V13.401H10.4822C11.4702 13.401 11.9642 12.959 11.9642 12.218C11.9642 11.49 11.4702 11.061 10.4822 11.061H8.46717Z",fill:"currentColor"})});var q=t=>({type:"buttons",items:t,key:"format",order:40});var Gn={type:"text-format",format:["bold","italic"],tag:"***"},Vn={type:"text-format",format:["bold","italic"],intraword:!1,tag:"___"},Kn={type:"text-format",format:["bold"],tag:"**"},Jn={type:"text-format",format:["bold"],intraword:!1,tag:"__"};var Xn=[q([{ChildComponent:Wn,isActive:({selection:t})=>sd(t)||id(t)?t.hasFormat("bold"):!1,key:"bold",onSelect:({editor:t})=>{t.dispatchCommand(ad,"bold")},order:1}])],cd=$(({featureProviderMap:t})=>{let e=[Kn,Jn];return t.get("italic")&&e.push(Vn,Gn),{enableFormats:["bold"],markdownTransformers:e,toolbarFixed:{groups:Xn},toolbarInline:{groups:Xn}}});import{$isTableSelection as dd}from"@lexical/table";import{$isRangeSelection as md,FORMAT_TEXT_COMMAND as pd}from"lexical";import{jsx as zn,jsxs as ud}from"react/jsx-runtime";import"react";var Zn=()=>ud("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[zn("path",{d:"M7.76465 6L3.76465 10L7.76465 14",stroke:"currentColor"}),zn("path",{d:"M12.2354 6L16.2354 10L12.2354 14",stroke:"currentColor"})]});var Yn={type:"text-format",format:["code"],tag:"`"};var qn=[q([{ChildComponent:Zn,isActive:({selection:t})=>md(t)||dd(t)?t.hasFormat("code"):!1,key:"inlineCode",onSelect:({editor:t})=>{t.dispatchCommand(pd,"code")},order:7}])],fd=$({enableFormats:["code"],markdownTransformers:[Yn],toolbarFixed:{groups:qn},toolbarInline:{groups:qn}});import{$isTableSelection as hd}from"@lexical/table";import{$isRangeSelection as gd,FORMAT_TEXT_COMMAND as xd}from"lexical";import{jsx as Qn}from"react/jsx-runtime";import"react";var el=()=>Qn("svg",{"aria-hidden":"true",className:"icon",fill:"currentColor",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:Qn("path",{d:"M11.311 14.2969L11.0327 15H6.18408L6.4624 14.2969C7.54639 14.2969 7.70752 14.209 7.83936 13.8721L10.8423 6.45996C10.8716 6.38672 10.8862 6.32812 10.8862 6.26953C10.8862 6.09375 10.6519 6.03516 9.80225 6.03516L10.0952 5.33203H14.9438L14.6509 6.03516C13.5669 6.03516 13.4204 6.12305 13.2886 6.45996L10.2856 13.8721C10.2563 13.9453 10.2271 14.0039 10.2271 14.0625C10.2271 14.2383 10.4614 14.2969 11.311 14.2969Z",fill:"currentColor"})});var tl={type:"text-format",format:["italic"],tag:"*"},ol={type:"text-format",format:["italic"],intraword:!1,tag:"_"};var rl=[q([{ChildComponent:el,isActive:({selection:t})=>gd(t)||hd(t)?t.hasFormat("italic"):!1,key:"italic",onSelect:({editor:t})=>{t.dispatchCommand(xd,"italic")},order:2}])],Cd=$({enableFormats:["italic"],markdownTransformers:[tl,ol],toolbarFixed:{groups:rl},toolbarInline:{groups:rl}});import{$isTableSelection as kd}from"@lexical/table";import{$isRangeSelection as _d,FORMAT_TEXT_COMMAND as Td}from"lexical";import{jsx as nl,jsxs as bd}from"react/jsx-runtime";import"react";var ll=()=>bd("svg",{"aria-hidden":"true",className:"icon",fill:"currentColor",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[nl("path",{d:"M5.50756 12.76H7.42756C7.56256 14.215 8.82256 14.71 10.1576 14.71C11.4326 14.71 12.4226 14.14 12.4226 13.06C12.4226 12.28 11.9576 11.845 10.6676 11.605L8.70256 11.245C7.12756 10.96 5.85256 10.21 5.85256 8.335C5.85256 6.43 7.53256 5.11 9.87256 5.11C12.4226 5.11 13.9526 6.22 14.1626 8.23H12.2876C12.1526 7.18 11.2226 6.595 9.88756 6.595C8.59756 6.595 7.78756 7.27 7.78756 8.215C7.78756 9.1 8.34256 9.385 9.49756 9.61L11.5676 10.015C13.3226 10.345 14.3726 11.215 14.3726 12.94C14.3726 14.89 12.5876 16.18 10.2176 16.18C7.66756 16.18 5.70256 15.115 5.50756 12.76Z",fill:"currentColor"}),nl("path",{d:"M4.99756 11.44H15.0026V12.19H4.99756V11.44Z",fill:"currentColor"})]});var il={type:"text-format",format:["strikethrough"],tag:"~~"};var sl=[q([{ChildComponent:ll,isActive:({selection:t})=>_d(t)||kd(t)?t.hasFormat("strikethrough"):!1,key:"strikethrough",onSelect:({editor:t})=>{t.dispatchCommand(Td,"strikethrough")},order:4}])],wd=$({enableFormats:["strikethrough"],markdownTransformers:[il],toolbarFixed:{groups:sl},toolbarInline:{groups:sl}});import{$isTableSelection as Ed}from"@lexical/table";import{$isRangeSelection as Sd,FORMAT_TEXT_COMMAND as Nd}from"lexical";import{jsx as al}from"react/jsx-runtime";import"react";var cl=()=>al("svg",{"aria-hidden":"true",className:"icon",fill:"currentColor",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:al("path",{d:"M10.167 15L7.45002 11.36L4.73302 15H2.91302L6.55302 10.177L3.23802 5.718H5.20102L7.54102 8.89L9.89402 5.718H11.714L8.43802 10.06L12.13 15H10.167ZM16.7768 13.258C16.7768 14.155 16.1398 14.532 15.2038 15C14.5538 15.325 14.2808 15.546 14.2418 15.78H16.7898V16.82H12.7208V16.339C12.7208 15.286 13.5918 14.675 14.3588 14.233C15.0868 13.83 15.4378 13.635 15.4378 13.232C15.4378 12.894 15.2038 12.686 14.8268 12.686C14.3848 12.686 14.1248 13.024 14.1118 13.427H12.7468C12.8248 12.426 13.5528 11.633 14.8398 11.633C15.9448 11.633 16.7768 12.257 16.7768 13.258Z",fill:"currentColor"})});var ul=[q([{ChildComponent:cl,isActive:({selection:t})=>Sd(t)||Ed(t)?t.hasFormat("subscript"):!1,key:"subscript",onSelect:({editor:t})=>{t.dispatchCommand(Nd,"subscript")},order:5}])],Ld=$({enableFormats:["subscript"],toolbarFixed:{groups:ul},toolbarInline:{groups:ul}});import{$isTableSelection as yd}from"@lexical/table";import{$isRangeSelection as Rd,FORMAT_TEXT_COMMAND as Id}from"lexical";import{jsx as dl}from"react/jsx-runtime";import"react";var ml=()=>dl("svg",{"aria-hidden":"true",className:"icon",fill:"currentColor",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:dl("path",{d:"M10.167 15L7.45002 11.36L4.73302 15H2.91302L6.55302 10.177L3.23802 5.718H5.20102L7.54102 8.89L9.89402 5.718H11.714L8.43802 10.06L12.13 15H10.167ZM16.7768 7.252C16.7768 8.149 16.1398 8.526 15.2038 8.994C14.5538 9.319 14.2808 9.54 14.2418 9.774H16.7898V10.814H12.7208V10.333C12.7208 9.28 13.5918 8.669 14.3588 8.227C15.0868 7.824 15.4378 7.629 15.4378 7.226C15.4378 6.888 15.2038 6.68 14.8268 6.68C14.3848 6.68 14.1248 7.018 14.1118 7.421H12.7468C12.8248 6.42 13.5528 5.627 14.8398 5.627C15.9448 5.627 16.7768 6.251 16.7768 7.252Z",fill:"currentColor"})});var pl=[q([{ChildComponent:ml,isActive:({selection:t})=>Rd(t)||yd(t)?t.hasFormat("superscript"):!1,key:"superscript",onSelect:({editor:t})=>{t.dispatchCommand(Id,"superscript")},order:6}])],vd=$({enableFormats:["superscript"],toolbarFixed:{groups:pl},toolbarInline:{groups:pl}});import{$isTableSelection as Dd}from"@lexical/table";import{$isRangeSelection as $d,FORMAT_TEXT_COMMAND as Ad}from"lexical";import{jsx as fl,jsxs as Md}from"react/jsx-runtime";import"react";var hl=()=>Md("svg",{"aria-hidden":"true",className:"icon",fill:"currentColor",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[fl("path",{d:"M13.9656 11.256C13.9656 13.791 12.5096 15.156 10.0006 15.156C7.50461 15.156 6.03561 13.791 6.03561 11.23V5.718H7.76461V11.243C7.76461 12.868 8.50561 13.778 10.0006 13.778C11.4956 13.778 12.2496 12.868 12.2496 11.243V5.718H13.9656V11.256Z",fill:"currentColor"}),fl("path",{d:"M5.09961 16.3H14.9016V16.95H5.09961V16.3Z",fill:"currentColor"})]});var gl=[q([{ChildComponent:hl,isActive:({selection:t})=>$d(t)||Dd(t)?t.hasFormat("underline"):!1,key:"underline",onSelect:({editor:t})=>{t.dispatchCommand(Ad,"underline")},order:3}])],Od=$({enableFormats:["underline"],toolbarFixed:{groups:gl},toolbarInline:{groups:gl}});import{jsx as Qo}from"react/jsx-runtime";import{jsx as Fd}from"react/jsx-runtime";function Pd(t){return t.replace(/-([a-z])/g,(e,o)=>o.toUpperCase())}var lo=({css:t})=>{let e=t?Object.fromEntries(Object.entries(t).map(([o,r])=>[Pd(o),r])):{};return Fd("span",{style:{...e,alignItems:"center",borderRadius:"4px",display:"flex",fontSize:"16px",height:"20px",justifyContent:"center",width:"20px"},children:"A"})};import{useLexicalComposerContext as Bd}from"@lexical/react/LexicalComposerContext";import{$forEachSelectedTextNode as jd}from"@lexical/selection";import{$getNodeByKey as Hd,$getState as Ud,$setState as Wd,createState as Gd,TextNode as Vd}from"lexical";import{useEffect as Kd}from"react";function xl(t){let e=new Map;for(let o in t){let r=t[o],n=Gd(o,{parse:l=>typeof l=="string"&&Object.keys(r).includes(l)?l:void 0});e.set(o,{stateConfig:n,stateValues:r})}return e}function qo(t,e,o,r){t.update(()=>{jd(n=>{let l=e.get(o);if(!l)throw new Error(`State config for ${o} not found`);Wd(n,l.stateConfig,r)})})}function Cl({stateMap:t}){let[e]=Bd();return Kd(()=>e.registerMutationListener(Vd,o=>{e.getEditorState().read(()=>{for(let[r,n]of o){if(n==="destroyed")continue;let l=Hd(r),i=e.getElementByKey(r);if(!l||!i)continue;let s=Object.create(null);t.forEach((d,c)=>{let u=Ud(l,d.stateConfig);if(!u){delete i.dataset[c];return}i.dataset[c]=u;let a=d.stateValues[u]?.css;a&&Object.assign(s,a)}),i.style.cssText="",Object.assign(i.style,s)}})}),[e]),null}var bl=(t,e)=>{let o=[];for(let n in t.state){let l=t.state[n];for(let i in l){let s=l[i];o.push({ChildComponent:()=>Qo(lo,{css:s.css}),key:i,label:s.label,onSelect:({editor:d})=>{qo(d,e,n,i)}})}}return[{type:"dropdown",ChildComponent:()=>Qo(lo,{css:{color:"var(--theme-elevation-600)"}}),items:[...[{ChildComponent:()=>Qo(lo,{}),key:"clear-style",label:({i18n:n})=>n.t("lexical:textState:defaultStyle"),onSelect:({editor:n})=>{for(let l in t.state)qo(n,e,l,void 0)},order:1}],...o],key:"textState",order:30}]},Jd=$(({props:t})=>{let e=xl(t.state);return{plugins:[{Component:()=>Cl({stateMap:e}),position:"normal"}],toolbarFixed:{groups:bl(t,e)},toolbarInline:{groups:bl(t,e)}}});import{c as Yd}from"react/compiler-runtime";import{useLexicalComposerContext as qd}from"@lexical/react/LexicalComposerContext";import{$createHeadingNode as Qd,$isHeadingNode as Dl,HeadingNode as Ol}from"@lexical/rich-text";import{$setBlocksType as em}from"@lexical/selection";import{$getSelection as tm,$isRangeSelection as om}from"lexical";import{useEffect as rm}from"react";import{jsx as kl}from"react/jsx-runtime";import"react";var _l=()=>kl("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:kl("path",{d:"M4.639 13.5V7.074H6.196V9.648H9.076V7.074H10.642V13.5H9.076V10.836H6.196V13.5H4.639ZM11.5656 9.045V8.019C12.6636 8.019 13.1316 7.731 13.2846 7.065H14.4006V13.5H12.8436V9.045H11.5656Z",fill:"currentColor"})});import{jsx as Tl}from"react/jsx-runtime";import"react";var wl=()=>Tl("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:Tl("path",{d:"M4.139 13.5V7.074H5.696V9.648H8.576V7.074H10.142V13.5H8.576V10.836H5.696V13.5H4.139ZM15.9796 8.973C15.9796 10.116 15.1696 10.656 14.0356 11.232C13.2256 11.646 12.8206 11.943 12.7846 12.294H15.9886V13.5H11.0566V12.951C11.0566 11.601 12.1636 10.845 13.1176 10.287C14.0356 9.756 14.5126 9.486 14.5126 8.946C14.5126 8.46 14.2156 8.145 13.6306 8.145C13.0186 8.145 12.6586 8.613 12.6226 9.198H11.1196C11.2186 7.947 12.1006 6.966 13.6396 6.966C15.0346 6.966 15.9796 7.785 15.9796 8.973Z",fill:"currentColor"})});import{jsx as El}from"react/jsx-runtime";import"react";var Sl=()=>El("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:El("path",{d:"M4.139 13.5V7.074H5.696V9.648H8.576V7.074H10.142V13.5H8.576V10.836H5.696V13.5H4.139ZM16.1146 11.745C16.1146 12.744 15.2236 13.608 13.6126 13.608C12.0736 13.608 11.0926 12.762 10.9846 11.547H12.4696C12.5146 12.114 13.0006 12.456 13.6126 12.456C14.2876 12.456 14.6746 12.132 14.6746 11.619C14.6746 11.061 14.2426 10.836 13.6216 10.836H12.9826V9.738H13.6036C14.1526 9.738 14.5486 9.486 14.5486 8.937C14.5486 8.46 14.2156 8.127 13.6486 8.127C13.0366 8.127 12.6586 8.514 12.6226 9.045H11.1916C11.2726 7.929 12.1276 6.966 13.6666 6.966C15.1876 6.966 15.9706 7.848 15.9706 8.865C15.9706 9.603 15.5026 10.143 14.8186 10.269C15.6196 10.404 16.1146 10.971 16.1146 11.745Z",fill:"currentColor"})});import{jsx as Nl}from"react/jsx-runtime";import"react";var Ll=()=>Nl("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:Nl("path",{d:"M3.639 13.5V7.074H5.196V9.648H8.076V7.074H9.642V13.5H8.076V10.836H5.196V13.5H3.639ZM15.1736 7.074V10.854H16.3706V12.033H15.1736V13.5H13.6796V12.033H10.5116V10.845L13.4996 7.074H15.1736ZM13.6796 8.46L11.8256 10.854H13.6796V8.46Z",fill:"currentColor"})});import{jsx as yl}from"react/jsx-runtime";import"react";var Rl=()=>yl("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:yl("path",{d:"M3.639 13.5V7.074H5.196V9.648H8.076V7.074H9.642V13.5H8.076V10.836H5.196V13.5H3.639ZM13.1576 10.269C12.6896 10.269 12.3746 10.494 12.2216 10.737H10.8176L11.1956 7.074H15.2546V8.28H12.3206L12.1856 9.549C12.4016 9.351 12.8516 9.126 13.4636 9.126C14.7866 9.126 15.6596 10.053 15.6596 11.358C15.6596 12.609 14.7326 13.608 13.1756 13.608C11.5826 13.608 10.6556 12.753 10.5566 11.511H12.1136C12.1586 12.06 12.5456 12.465 13.1576 12.465C13.8236 12.465 14.1746 11.97 14.1746 11.376C14.1746 10.764 13.8416 10.269 13.1576 10.269Z",fill:"currentColor"})});import{jsx as Il}from"react/jsx-runtime";import"react";var vl=()=>Il("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:Il("path",{d:"M3.639 13.5V7.074H5.196V9.648H8.076V7.074H9.642V13.5H8.076V10.836H5.196V13.5H3.639ZM13.3646 8.127C12.5456 8.127 12.0416 8.937 12.0416 9.999C12.3296 9.54 12.8246 9.207 13.5536 9.207C14.8586 9.207 15.8036 10.134 15.8036 11.376C15.8036 12.645 14.8226 13.608 13.3196 13.608C11.7266 13.608 10.6196 12.393 10.6196 10.395C10.6196 8.316 11.7716 6.966 13.4186 6.966C14.7056 6.966 15.5786 7.749 15.7316 8.829H14.3186C14.2016 8.415 13.9226 8.127 13.3646 8.127ZM13.3106 12.51C13.9586 12.51 14.3816 12.042 14.3816 11.385C14.3816 10.737 13.9586 10.278 13.3106 10.278C12.6536 10.278 12.2126 10.737 12.2126 11.385C12.2126 12.042 12.6536 12.51 13.3106 12.51Z",fill:"currentColor"})});import{$createHeadingNode as Xd,$isHeadingNode as zd,HeadingNode as Zd}from"@lexical/rich-text";var er=t=>(e,o,r)=>{let n=t(r);n&&(n.append(...o),e.replace(n),n.select(0,0))};var Ml=t=>{let o=`^(${t.map(n=>Number(n.slice(1))).map(n=>`#{${n}}`).join("|")})\\s`,r=new RegExp(o);return{type:"element",dependencies:[Zd],export:(n,l)=>{if(!zd(n))return null;let i=Number(n.getTag().slice(1));return"#".repeat(i)+" "+l(n)},regExp:r,replace:er(n=>{let l="h"+n[1]?.length;return Xd(l)})}};var $l=t=>{let e=tm();em(e,()=>Qd(t))},Al={h1:_l,h2:wl,h3:Sl,h4:Ll,h5:Rl,h6:vl},nm=$(({props:t})=>{let{enabledHeadingSizes:e=["h1","h2","h3","h4","h5","h6"]}=t,o=[te(e.map((r,n)=>({ChildComponent:Al[r],isActive:({selection:l})=>{if(!om(l))return!1;for(let i of l.getNodes()){if(Dl(i)&&i.getTag()===r)continue;let s=i.getParent();if(!(Dl(s)&&s.getTag()===r))return!1}return!0},key:r,label:({i18n:l})=>l.t("lexical:heading:label",{headingLevel:r.charAt(1)}),onSelect:({editor:l})=>{l.update(()=>{$l(r)})},order:n+2})))];return{markdownTransformers:[Ml(e)],nodes:[Ol],plugins:[{Component:lm,position:"normal"}],sanitizedClientFeatureProps:t,slashMenu:{groups:e?.length?[Y(e.map(r=>({Icon:Al[r],key:`heading-${r.charAt(1)}`,keywords:["heading",r],label:({i18n:n})=>n.t("lexical:heading:label",{headingLevel:r.charAt(1)}),onSelect:({editor:n})=>{n.update(()=>{$l(r)})}})))]:[]},toolbarFixed:{groups:e?.length?o:[]},toolbarInline:{groups:e?.length?o:[]}}}),lm=t=>{let e=Yd(9),{clientProps:o}=t,{enabledHeadingSizes:r}=o,n;e[0]!==r?(n=r===void 0?["h1","h2","h3","h4","h5","h6"]:r,e[0]=r,e[1]=n):n=e[1];let l=n,i;e[2]!==l?(i=l.at(-1),e[2]=l,e[3]=i):i=e[3];let s=i,[d]=qd(),c,u;return e[4]!==d||e[5]!==l||e[6]!==s?(c=()=>{if(!(!s||l.length===6))return d.registerNodeTransform(Ol,a=>{l.includes(a.getTag())||a.setTag(s)})},u=[d,l,s],e[4]=d,e[5]=l,e[6]=s,e[7]=c,e[8]=u):(c=e[7],u=e[8]),rm(c,u),null};import{$isNodeSelection as _m}from"lexical";import{jsx as Fl}from"react/jsx-runtime";import"react";var tr=()=>Fl("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:Fl("rect",{fill:"currentColor",height:"1",width:"12",x:"4",y:"9.5"})});import{jsx as Pl,jsxs as im}from"react/jsx-runtime";import"react";var Bl=()=>im("svg",{fill:"none",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[Pl("path",{d:"M5 10h10",stroke:"currentColor"}),Pl("path",{d:"M10 15V5",stroke:"currentColor"})]});var xe=t=>({type:"dropdown",ChildComponent:Bl,items:t,key:"add",order:10});import{addClassNamesToElement as sm}from"@lexical/utils";import{$applyNodeReplacement as am,createCommand as cm,DecoratorNode as um}from"lexical";var bt=cm("INSERT_HORIZONTAL_RULE_COMMAND"),Ct=class extends um{static clone(e){return new this(e.__key)}static getType(){return"horizontalrule"}static importDOM(){return{hr:()=>({conversion:dm,priority:0})}}static importJSON(e){return jl()}createDOM(e){let o=document.createElement("hr");return sm(o,e.theme.hr),o}decorate(){return null}exportDOM(){return{element:document.createElement("hr")}}exportJSON(){return{type:"horizontalrule",version:1}}getTextContent(){return`
`}isInline(){return!1}updateDOM(){return!1}};function dm(){return{node:jl()}}function jl(){return am(new Ct)}import{$applyNodeReplacement as mm}from"lexical";import"react";var ye=class extends Ct{static clone(e){return super.clone(e)}static getType(){return super.getType()}static importJSON(e){return kt()}decorate(){return null}exportJSON(){return super.exportJSON()}};function kt(){return mm(new ye)}function io(t){return t instanceof ye}var Hl={type:"element",dependencies:[ye],export:(t,e)=>io(t)?"---":null,regExp:/^---\s*$/,replace:t=>{let e=kt();e&&t.replace(e)}};import{c as pm}from"react/compiler-runtime";import{useLexicalComposerContext as fm}from"@lexical/react/LexicalComposerContext.js";import{$insertNodeToNearestRoot as hm}from"@lexical/utils";import{$getSelection as gm,$isRangeSelection as xm,COMMAND_PRIORITY_EDITOR as Cm}from"lexical";import{useEffect as bm}from"react";var Ul=()=>{let t=pm(3),[e]=fm(),o,r;return t[0]!==e?(o=()=>e.registerCommand(bt,km,Cm),r=[e],t[0]=e,t[1]=o,t[2]=r):(o=t[1],r=t[2]),bm(o,r),null};function km(t){let e=gm();if(!xm(e))return!1;if(e.focus.getNode()!==null){let r=kt();hm(r)}return!0}var Tm=$({markdownTransformers:[Hl],nodes:[ye],plugins:[{Component:Ul,position:"normal"}],slashMenu:{groups:[Y([{Icon:tr,key:"horizontalRule",keywords:["hr","horizontal rule","line","separator"],label:({i18n:t})=>t.t("lexical:horizontalRule:label"),onSelect:({editor:t})=>{t.dispatchCommand(bt,void 0)}}])]},toolbarFixed:{groups:[xe([{ChildComponent:tr,isActive:({selection:t})=>{if(!_m(t)||!t.getNodes().length)return!1;let e=t.getNodes()[0];return io(e)},key:"horizontalRule",label:({i18n:t})=>t.t("lexical:horizontalRule:label"),onSelect:({editor:t})=>{t.dispatchCommand(bt,void 0)}}])]}});import{$findMatchingParent as ql}from"@lexical/utils";import{$isElementNode as Am,INDENT_CONTENT_COMMAND as Om,OUTDENT_CONTENT_COMMAND as Fm}from"lexical";import{jsx as so,jsxs as wm}from"react/jsx-runtime";import"react";var Wl=()=>wm("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[so("path",{d:"M2.5 5H10.5",stroke:"currentColor",strokeWidth:"1.5"}),so("path",{d:"M2.5 10H10.5",stroke:"currentColor",strokeWidth:"1.5"}),so("path",{d:"M2.5 15H17.5",stroke:"currentColor",strokeWidth:"1.5"}),so("path",{d:"M12.25 7.25L17.25 3.75V10.75L12.25 7.25Z",fill:"currentColor"})]});import{jsx as ao,jsxs as Em}from"react/jsx-runtime";import"react";var Gl=()=>Em("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[ao("path",{d:"M17.5 5H9.5",stroke:"currentColor",strokeWidth:"1.5"}),ao("path",{d:"M17.5 10H9.5",stroke:"currentColor",strokeWidth:"1.5"}),ao("path",{d:"M17.5 15H2.5",stroke:"currentColor",strokeWidth:"1.5"}),ao("path",{d:"M7.75 7.25L2.75 3.75V10.75L7.75 7.25Z",fill:"currentColor"})]});import{jsx as Sm}from"react/jsx-runtime";import{useLexicalComposerContext as Nm}from"@lexical/react/LexicalComposerContext";import{TabIndentationPlugin as Lm}from"@lexical/react/LexicalTabIndentationPlugin";import{$findMatchingParent as ym,mergeRegister as Vl}from"@lexical/utils";import{$getSelection as Rm,$isElementNode as zl,$isRangeSelection as Im,COMMAND_PRIORITY_LOW as Kl,INDENT_CONTENT_COMMAND as Jl,KEY_TAB_COMMAND as vm,OUTDENT_CONTENT_COMMAND as Mm,TabNode as Dm}from"lexical";import{useEffect as Xl}from"react";var Zl=({clientProps:t})=>{let[e]=Nm(),{disabledNodes:o,disableTabNode:r}=t;return Xl(()=>{if(!(!e||!o?.length))return Vl(e.registerCommand(Jl,()=>$m(n=>{if(!o.includes(n.getType())){let l=n.getIndent();n.setIndent(l+1)}}),Kl),e.registerUpdateListener(({dirtyElements:n,editorState:l})=>{e.update(()=>{for(let[i]of n){let s=l._nodeMap.get(i);zl(s)&&o.includes(s.getType())&&s.getIndent()>0&&s.setIndent(0)}})}))},[e,o]),Xl(()=>{if(!(!e||!r))return Vl(e.registerCommand(vm,n=>(n.preventDefault(),e.dispatchCommand(n.shiftKey?Mm:Jl,void 0)),Kl),e.registerNodeTransform(Dm,n=>{n.remove()}))},[e,r]),Sm(Lm,{})};function $m(t){let e=Rm();if(!Im(e))return!1;let o=new Set,r=e.getNodes();for(let n=0;n<r.length;n++){let l=r[n],i=l.getKey();if(o.has(i))continue;let s=ym(l,c=>zl(c)&&!c.isInline());if(s===null)continue;let d=s.getKey();s.canIndent()&&!o.has(d)&&(o.add(d),t(s))}return o.size>0}var Yl=t=>({type:"buttons",items:t,key:"indent",order:35});var Ql=({disabledNodes:t})=>[Yl([{ChildComponent:Wl,isActive:()=>!1,isEnabled:({selection:e})=>{let o=e?.getNodes()??[],r=n=>ei(n)&&n.getIndent()>0;return o.some(n=>r(n)||!!ql(n,r))},key:"indentDecrease",label:({i18n:e})=>e.t("lexical:indent:decreaseLabel"),onSelect:({editor:e})=>{e.dispatchCommand(Fm,void 0)},order:1},{ChildComponent:Gl,isActive:()=>!1,isEnabled:({selection:e})=>{let o=e?.getNodes()??[],r=n=>ei(n)&&!(t??[]).includes(n.getType());return o.some(n=>r(n)||!!ql(n,r))},key:"indentIncrease",label:({i18n:e})=>e.t("lexical:indent:increaseLabel"),onSelect:({editor:e})=>{e.dispatchCommand(Om,void 0)},order:2}])],Pm=$(({props:t})=>{let e=t.disabledNodes??[];return{plugins:[{Component:Zl,position:"normal"}],sanitizedClientFeatureProps:t,toolbarFixed:{groups:Ql({disabledNodes:e})},toolbarInline:{groups:Ql({disabledNodes:e})}}}),ei=t=>Am(t)&&t.canIndent();import{$findMatchingParent as Yp}from"@lexical/utils";import{$getSelection as ur,$isRangeSelection as vi}from"lexical";import{jsx as ti}from"react/jsx-runtime";import"react";var oi=()=>ti("svg",{"aria-hidden":"true",className:"icon",fill:"none",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:ti("path",{d:"M8.5 11.5L11.5 8.5M8.5 7L9.625 5.875C10.868 4.633 12.882 4.633 14.125 5.875C15.368 7.118 15.368 9.133 14.125 10.375L13 11.5M7 8.5L5.746 9.754C4.56 10.94 4.519 12.85 5.652 14.087C6.814 15.354 8.78 15.449 10.058 14.298L11.5 13",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})});import{$isAtNodeEnd as ri}from"@lexical/selection";function ze(t){let{anchor:e}=t,{focus:o}=t,r=t.anchor.getNode(),n=t.focus.getNode();return r===n?r:t.isBackward()?ri(o)?r:n:ri(e)?r:n}var or=t=>({type:"buttons",items:t,key:"features",order:50});import{$createTextNode as zm}from"lexical";import{addClassNamesToElement as Bm,isHTMLAnchorElement as jm}from"@lexical/utils";import lr from"bson-objectid";import{$applyNodeReplacement as Hm,$createTextNode as ni,$getSelection as Um,$isElementNode as li,$isRangeSelection as nr,createCommand as Wm,ElementNode as Gm}from"lexical";var Vm=new Set(["http:","https:","mailto:","sms:","tel:"]),oe=class extends Gm{__fields;__id;constructor({id:e,fields:o={linkType:"custom",newTab:!1},key:r}){super(r),this.__fields=o,this.__id=e}static clone(e){return new this({id:e.__id,fields:e.__fields,key:e.__key})}static getType(){return"link"}static importDOM(){return{a:e=>({conversion:Km,priority:1})}}static importJSON(e){let o=Ce({}).updateFromJSON(e);return e.version===1&&typeof e.fields?.doc?.value=="object"&&e.fields?.doc?.value?.id&&(e.fields.doc.value=e.fields.doc.value.id,e.version=2),e.version===2&&!e.id&&(e.id=new lr.default().toHexString(),e.version=3),o}canBeEmpty(){return!1}canInsertTextAfter(){return!1}canInsertTextBefore(){return!1}createDOM(e){let o=document.createElement("a");return this.__fields?.linkType==="custom"&&(o.href=this.sanitizeUrl(this.__fields.url??"")),(this.__fields?.newTab??!1)&&(o.target="_blank"),this.__fields?.newTab===!0&&this.__fields?.linkType==="custom"&&(o.rel=rr(o.rel,"add","noopener")),Bm(o,e.theme.link),o}exportJSON(){let e=this.getFields();e?.linkType==="internal"?delete e.url:e?.linkType==="custom"&&delete e.doc;let o={...super.exportJSON(),type:"link",fields:e,version:3},r=this.getID();return r&&(o.id=r),o}extractWithChild(e,o,r){if(!nr(o))return!1;let n=o.anchor.getNode(),l=o.focus.getNode();return this.isParentOf(n)&&this.isParentOf(l)&&o.getTextContent().length>0}getFields(){return this.getLatest().__fields}getID(){return this.getLatest().__id}insertNewAfter(e,o=!0){let r=this.getParentOrThrow().insertNewAfter(e,o);if(li(r)){let n=Ce({fields:this.__fields});return r.append(n),n}return null}isInline(){return!0}sanitizeUrl(e){try{let o=new URL(e);if(!Vm.has(o.protocol))return"about:blank"}catch{return"https://"}return e}setFields(e){let o=this.getWritable();return o.__fields=e,o}setID(e){let o=this.getWritable();return o.__id=e,o}updateDOM(e,o,r){let n=this.__fields?.url,l=this.__fields?.newTab;return n!=null&&n!==e.__fields?.url&&this.__fields?.linkType==="custom"&&(o.href=n),this.__fields?.linkType==="internal"&&e.__fields?.linkType==="custom"&&o.removeAttribute("href"),o.rel==null&&(o.rel=""),l!==e.__fields?.newTab&&(l??!1?(o.target="_blank",this.__fields?.linkType==="custom"&&(o.rel=rr(o.rel,"add","noopener"))):(o.removeAttribute("target"),o.rel=rr(o.rel,"remove","noopener"))),!1}updateFromJSON(e){return super.updateFromJSON(e).setFields(e.fields).setID(e.id)}};function Km(t){let e=null;if(jm(t)){let o=t.textContent;o!==null&&o!==""&&(e=Ce({id:new lr.default().toHexString(),fields:{doc:null,linkType:"custom",newTab:t.getAttribute("target")==="_blank",url:t.getAttribute("href")??""}}))}return{node:e}}function Ce({id:t,fields:e}){return Hm(new oe({id:t??new lr.default().toHexString(),fields:e}))}function K(t){return t instanceof oe}var ce=Wm("TOGGLE_LINK_COMMAND");function ir(t){let e=Um();if(!nr(e)&&(t===null||!t.selectedNodes?.length))return;let o=nr(e)?e.extract():t===null?[]:t.selectedNodes;if(t===null){o?.forEach(l=>{let i=l.getParent();K(i)&&(i.getChildren().forEach(d=>{i.insertBefore(d)}),i.remove())});return}if(o?.length===1){let l=o[0],i=K(l)?l:Jm(l);if(i!==null){i.setFields(t.fields),t.text!=null&&t.text!==i.getTextContent()&&(i.append(ni(t.text)),i.getChildren().forEach(s=>{s!==i.getLastChild()&&s.remove()}));return}}let r=null,n=null;o?.forEach(l=>{let i=l.getParent();if(!(i===n||i===null||li(l)&&!l.isInline())){if(K(i)){n=i,i.setFields(t.fields),t.text!=null&&t.text!==i.getTextContent()&&(i.append(ni(t.text)),i.getChildren().forEach(s=>{s!==i.getLastChild()&&s.remove()}));return}if(i.is(r)||(r=i,n=Ce({fields:t.fields}),K(i)?l.getPreviousSibling()===null?i.insertBefore(n):i.insertAfter(n):l.insertBefore(n)),K(l)){if(l.is(n))return;if(n!==null){let s=l.getChildren();n.append(...s)}l.remove();return}n!==null&&n.append(l)}})}function Jm(t){return Xm(t,e=>K(e))}function Xm(t,e){let o=t;for(;o!==null&&(o=o.getParent(),!(o===null||e(o))););return o}function rr(t,e,o){let r,n=`${t}`;if(e==="add"){if(n.includes(o)){let l=new RegExp(o,"g");n=n.replace(l,"").trim()}n=n.trim(),r=n.length===0?`${o}`:`${n} ${o}`}else{let l=new RegExp(o,"g");r=n.replace(l,"").trim()}return r}var ii={type:"text-match",dependencies:[oe],export:(t,e)=>{if(!K(t))return null;let o=t,{url:r}=o.getFields();return`[${e(o)}](${r})`},importRegExp:/\[([^[]+)\]\(([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?\)/,regExp:/\[([^[]+)\]\(([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?\)$/,replace:(t,e)=>{let[,o,r]=e,n=Ce({fields:{doc:null,linkType:"custom",newTab:!1,url:r}}),l=zm(o);return l.setFormat(t.getFormat()),n.append(l),t.replace(n),l},trigger:")"};import{$applyNodeReplacement as Zm,$isElementNode as Ym}from"lexical";var be=class extends oe{static clone(e){return new this({id:"",fields:e.__fields,key:e.__key})}static getType(){return"autolink"}static importDOM(){return null}static importJSON(e){let o=_t({}).updateFromJSON(e);return e.version===1&&typeof e.fields?.doc?.value=="object"&&e.fields?.doc?.value?.id&&(e.fields.doc.value=e.fields.doc.value.id,e.version=2),o}exportJSON(){let e=super.exportJSON();return{type:"autolink",children:e.children,direction:e.direction,fields:e.fields,format:e.format,indent:e.indent,version:2}}insertNewAfter(e,o=!0){let r=this.getParentOrThrow().insertNewAfter(e,o);if(Ym(r)){let n=_t({fields:this.__fields});return r.append(n),n}return null}updateFromJSON(e){return super.updateFromJSON(e).setFields(e.fields)}};function _t({fields:t}){return Zm(new be({id:"",fields:t}))}function ke(t){return t instanceof be}import{c as qm}from"react/compiler-runtime";import{useLexicalComposerContext as Qm}from"@lexical/react/LexicalComposerContext.js";import{mergeRegister as ep}from"@lexical/utils";import{$createTextNode as si,$getSelection as tp,$isElementNode as ci,$isLineBreakNode as ui,$isNodeSelection as op,$isRangeSelection as rp,$isTextNode as Tt,TextNode as np}from"lexical";import{useEffect as lp}from"react";function ai(t,e=o=>o){return o=>{let r=t.exec(o);return r===null?null:{index:r.index,length:r[0].length,text:r[0],url:e(r[0])}}}function di(t,e){for(let o of e){let r=o(t);if(r!=null)return r}return null}var ip=/[.,;\s]/;function uo(t){return t!==void 0&&ip.test(t)}function mi(t){return uo(t[t.length-1])}function ar(t){return uo(t[0])}function sp(t,e){return e?/^\.[a-z]{2,}/i.test(t):/^\.[a-z0-9]+/i.test(t)}function pi(t){let e=t.getPreviousSibling();return ci(e)&&(e=e.getLastDescendant()),e===null||ui(e)||Tt(e)&&mi(e.getTextContent())}function fi(t){let e=t.getNextSibling();return ci(e)&&(e=e.getFirstDescendant()),e===null||ui(e)||Tt(e)&&ar(e.getTextContent())}function ap(t,e,o,r){return(t>0?uo(o[t-1]):pi(r[0]))?e<o.length?uo(o[e]):fi(r[r.length-1]):!1}function cp(t,e,o){let r=[],n=[],l=[],i=0,s=0,d=[...t];for(;d.length>0;){let c=d[0],a=c.getTextContent().length,m=s;s+a<=e?(r.push(c),i+=a):m>=o?l.push(c):n.push(c),s+=a,d.shift()}return[i,r,n,l]}function up(t,e,o,r){let n={linkType:"custom",url:r.url,...r.fields},l=_t({fields:n});if(t.length===1){let i=t[0],s;if(e===0?[s]=i.splitText(o):[,s]=i.splitText(e,o),s){let d=si(r.text);d.setFormat(s.getFormat()),d.setDetail(s.getDetail()),d.setStyle(s.getStyle()),l.append(d),s.replace(l)}return i}else if(t.length>1){let i=t[0],s=i.getTextContent().length,d;e===0?d=i:[,d]=i.splitText(e);let c=[],u;if(t.forEach(a=>{let p=a.getTextContent().length,f=s,h=s+p;if(f<o)if(h<=o)c.push(a);else{let[x,_]=a.splitText(o-f);x&&c.push(x),u=_}s+=p}),d){let a=tp(),m=a?a.getNodes().find(Tt):void 0,p=si(d.getTextContent());return p.setFormat(d.getFormat()),p.setDetail(d.getDetail()),p.setStyle(d.getStyle()),l.append(p,...c),m&&m===d&&(rp(a)?p.select(a.anchor.offset,a.focus.offset):op(a)&&p.select(0,p.getTextContent().length)),d.replace(l),u}}}function dp(t,e,o){let r=[...t],n=r.map(d=>d.getTextContent()).join(""),l=n,i,s=0;for(;(i=di(l,e))!=null&&i!==null;){let d=i.index,c=i.length,u=d+c;if(ap(s+d,s+u,n,r)){let[m,,p,f]=cp(r,s+d,s+u),h=s+d-m,x=s+u-m,_=up(p,h,x,i);r=_?[_,...f]:f,o(i.url,null),s=0}else s+=u;l=l.substring(u)}}function sr(t,e,o){let r=t.getChildren(),n=r.length;for(let d=0;d<n;d++){let c=r[d];if(!Tt(c)||!c.isSimpleText()){co(t),o(null,t.getFields()?.url??null);return}}let l=t.getTextContent(),i=di(l,e);if(i===null||i.text!==l){co(t),o(null,t.getFields()?.url??null);return}if(!pi(t)||!fi(t)){co(t),o(null,t.getFields()?.url??null);return}let s=t.getFields()?.url;if(s!==i?.url){let d=t.getFields();d.url=i?.url,t.setFields(d),o(i.url,s??null)}}function mp(t,e,o){let r=t.getPreviousSibling(),n=t.getNextSibling(),l=t.getTextContent();if(ke(r)){let i=r.getFields()?.url?r.getFields()?.url?.startsWith("mailto:")??!1:!1;(!ar(l)||sp(l,i))&&(r.append(t),sr(r,e,o),o(null,r.getFields()?.url??null))}ke(n)&&!mi(l)&&(co(n),sr(n,e,o),o(null,n.getFields()?.url??null))}function co(t){let e=t.getChildren(),o=e.length;for(let r=o-1;r>=0;r--)t.insertAfter(e[r]);return t.remove(),e.map(r=>r.getLatest())}function pp(t){let e=[t],o=t.getNextSibling();for(;o!==null&&Tt(o)&&o.isSimpleText()&&(e.push(o),!/\s/.test(o.getTextContent()));)o=o.getNextSibling();return e}function fp(t,e,o){let r=qm(5),n,l;r[0]!==t||r[1]!==e||r[2]!==o?(n=()=>{if(!t.hasNodes([be]))throw new Error("LexicalAutoLinkPlugin: AutoLinkNode not registered on editor");let i=(s,d)=>{o?.(s,d)};return ep(t.registerNodeTransform(np,s=>{let d=s.getParentOrThrow(),c=s.getPreviousSibling();if(ke(d))sr(d,e,i);else if(!K(d)){if(s.isSimpleText()&&(ar(s.getTextContent())||!ke(c))){let u=pp(s);dp(u,e,i)}mp(s,e,i)}}))},l=[t,e,o],r[0]=t,r[1]=e,r[2]=o,r[3]=n,r[4]=l):(n=r[3],l=r[4]),lp(n,l)}var hp=/((https?:\/\/(www\.)?)|(www\.))[-\w@:%.+~#=]{1,256}\.[a-zA-Z\d()]{1,6}\b([-\w()@:%+.~#?&/=]*)(?<![-.+():%])/,gp=/(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\])|(([a-z\-\d]+\.)+[a-z]{2,}))/i,xp=[ai(hp,t=>t.startsWith("http")?t:`https://${t}`),ai(gp,t=>`mailto:${t}`)],hi=()=>{let[t]=Qm();return fp(t,xp),null};import{jsx as Cp}from"react/jsx-runtime";import{ClickableLinkPlugin as bp}from"@lexical/react/LexicalClickableLinkPlugin.js";import"react";var gi=()=>Cp(bp,{});import{jsx as Pp}from"react/jsx-runtime";import"react";import{createPortal as Bp}from"react-dom";import{jsx as _e,jsxs as wt,Fragment as _p}from"react/jsx-runtime";import{useLexicalComposerContext as Tp}from"@lexical/react/LexicalComposerContext.js";import{useLexicalEditable as wp}from"@lexical/react/useLexicalEditable";import{$findMatchingParent as xi,mergeRegister as Ci}from"@lexical/utils";import{getTranslation as cr}from"@payloadcms/translations";import{CloseMenuIcon as Ep,EditIcon as Sp,ExternalLinkIcon as bi,formatDrawerSlug as Np,useConfig as Lp,useEditDepth as yp,useLocale as Rp,useTranslation as Ip}from"@payloadcms/ui";import{requests as vp}from"@payloadcms/ui/shared";import{$getSelection as ki,$isLineBreakNode as Mp,$isRangeSelection as _i,COMMAND_PRIORITY_HIGH as Dp,COMMAND_PRIORITY_LOW as Ti,getDOMSelection as $p,KEY_ESCAPE_COMMAND as Ap,SELECTION_CHANGE_COMMAND as Op}from"lexical";import wi,{useCallback as Ei,useEffect as fo,useRef as Fp,useState as Oe}from"react";function mo(t,e,o,r=10,n=5){let l=o.parentElement;if(t===null||l==null){e.style.opacity="0",e.style.transform="translate(-10000px, -10000px)";return}let i=e.getBoundingClientRect(),s=o.getBoundingClientRect(),d=l.getBoundingClientRect(),c=t.top-r,u=t.left-n;c<d.top&&(c+=i.height+t.height+r*2),u+i.width>d.right&&(u=d.right-i.width-n),c-=s.top,u-=s.left,e.style.opacity="1",e.style.transform=`translate(${u}px, ${c}px)`}import{createCommand as kp}from"lexical";var po=kp("TOGGLE_LINK_WITH_MODAL_COMMAND");function Si(t){t.preventDefault()}function Ni({anchorElem:t}){let[e]=Tp(),[o,r]=Oe(),n=Fp(null),[l,i]=Oe(null),[s,d]=Oe(null),{fieldProps:{schemaPath:c},uuid:u}=H(),a=wp(),{config:m,getEntityConfig:p}=Lp(),{i18n:f,t:h}=Ip(),[x,_]=Oe(),E=yp(),[S,T]=Oe(!1),[C,g]=Oe([]),b=Rp(),[k,y]=Oe(!1),R=Np({slug:"lexical-rich-text-link-"+u,depth:E}),{toggleDrawer:M}=fe(R),L=Ei(()=>{T(!1),n&&n.current&&(n.current.style.opacity="0",n.current.style.transform="translate(-10000px, -10000px)"),y(!1),i(null),d(null),g([]),_(void 0)},[T,i,d,g]),w=Ei(()=>{let N=ki(),I;if(!_i(N)||!N){L();return}let A=ze(N);I=e.getElementByKey(A.getKey())?.getBoundingClientRect();let v=xi(A,K),O=N.getNodes().filter(X=>!Mp(X)).find(X=>{let U=xi(X,K);return v&&!v.is(U)||U&&!U.is(v)});if(v==null||O){L();return}r(v);let D=v.getFields(),G={...D,id:v.getID(),text:v.getTextContent()};if(D?.linkType==="custom")i(D?.url??null),d(null);else{i(`${m.routes.admin==="/"?"":m.routes.admin}/collections/${D?.doc?.relationTo}/${D?.doc?.value}`);let X=D?.doc?.relationTo?p({collectionSlug:D?.doc?.relationTo}):void 0;if(!X)d(D?.label?String(D?.label):null),i(D?.url?String(D?.url):null);else{let U=typeof D.doc?.value=="object"?D.doc.value.id:D.doc?.value,Ue=D.doc?.relationTo;if(!U||!Ue)throw new Error("Focus link parent is missing doc.value or doc.relationTo");let Se=h("fields:linkedTo",{label:`${cr(X.labels.singular,f)} - ${h("lexical:link:loadingWithEllipsis",f)}`}).replace(/<[^>]*>?/g,"");d(Se),vp.get(`${m.serverURL}${m.routes.api}/${Ue}/${U}`,{headers:{"Accept-Language":f.language},params:{depth:0,locale:b?.code}}).then(async pe=>{if(!pe.ok)throw new Error(`HTTP error! Status: ${pe.status}`);let Bt=await pe.json(),Ne=X?.admin?.useAsTitle||"id",jt=Bt[Ne],We=h("fields:linkedTo",{label:`${cr(X.labels.singular,f)} - ${jt}`}).replace(/<[^>]*>?/g,"");d(We)}).catch(()=>{let pe=h("fields:linkedTo",{label:`${cr(X.labels.singular,f)} - ${h("general:untitled",f)} - ID: ${U}`}).replace(/<[^>]*>?/g,"");d(pe)})}}_(G),T(!0),g(N?N?.getNodes():[]),ke(v)?y(!0):y(!1);let Q=n.current,J=$p(e._window),{activeElement:Ft}=document;if(Q===null)return;let Pt=e.getRootElement();return J!==null&&Pt!==null&&Pt.contains(J.anchorNode)?(I||(I=J.getRangeAt(0).getBoundingClientRect()),I!=null&&(I.y+=40,mo(I,Q,t))):(Ft==null||Ft.className!=="link-input")&&(Pt!==null&&mo(null,Q,t),i(null),d(null)),!0},[e,L,m.routes.admin,m.routes.api,m.serverURL,p,h,f,b?.code,t]);return fo(()=>Ci(e.registerCommand(po,N=>(e.dispatchCommand(ce,N),w(),M(),!0),Ti)),[e,w,M,R]),fo(()=>{let N=t.parentElement,I=()=>{e.getEditorState().read(()=>{w()})};return window.addEventListener("resize",I),N?.addEventListener("scroll",I),()=>{window.removeEventListener("resize",I),N?.removeEventListener("scroll",I)}},[t.parentElement,e,w]),fo(()=>Ci(e.registerUpdateListener(({editorState:N})=>{N.read(()=>{w()})}),e.registerCommand(Op,()=>(w(),!0),Ti),e.registerCommand(Ap,()=>S?(L(),!0):!1,Dp)),[e,w,S,L]),fo(()=>{e.getEditorState().read(()=>{w()})},[e,w]),wt(wi.Fragment,{children:[_e("div",{className:"link-editor",ref:n,children:wt("div",{className:"link-input",children:[l&&l.length>0?wt("a",{href:l,rel:"noopener noreferrer",target:"_blank",children:[o?.__fields.newTab?_e(bi,{}):null,s!=null&&s.length>0?s:l]}):s!=null&&s.length>0?wt(_p,{children:[o?.__fields.newTab?_e(bi,{}):null,_e("span",{className:"link-input__label-pure",children:s})]}):null,a&&wt(wi.Fragment,{children:[_e("button",{"aria-label":"Edit link",className:"link-edit",onClick:N=>{N.preventDefault(),M()},onMouseDown:Si,tabIndex:0,type:"button",children:_e(Sp,{})}),!k&&_e("button",{"aria-label":"Remove link",className:"link-trash",onClick:()=>{e.dispatchCommand(ce,null)},onMouseDown:Si,tabIndex:0,type:"button",children:_e(Ep,{})})]})]})}),_e(dt,{className:"lexical-link-edit-drawer",data:x,drawerSlug:R,drawerTitle:h("fields:editLink"),featureKey:"link",handleDrawerSubmit:(N,I)=>{let A=I,v={...A};delete v.text,e.update(()=>{let O=ki(),D=null;if(_i(O)?D=ze(O).getParent():C.length&&(D=C[0]?.getParent()??null),D&&ke(D)){let G=Ce({fields:v});D.replace(G,!0)}}),e.dispatchCommand(ce,{fields:v,selectedNodes:C,text:A.text})},schemaPath:c,schemaPathSuffix:"fields"})]})}var Li=t=>{let{anchorElem:e=document.body}=t;return Bp(Pp(Ni,{anchorElem:e}),e)};import{c as Up}from"react/compiler-runtime";import{useLexicalComposerContext as Wp}from"@lexical/react/LexicalComposerContext.js";import{mergeRegister as Gp}from"@lexical/utils";import{$getSelection as Vp,$isElementNode as Kp,$isRangeSelection as Jp,COMMAND_PRIORITY_LOW as Ri,PASTE_COMMAND as Xp}from"lexical";import{useEffect as zp}from"react";var jp=/^(?:[a-zA-Z][a-zA-Z\d+.-]*:(?:\/\/)?(?:[-;:&=+$,\w]+@)?[A-Za-z\d]+(?:\.[A-Za-z\d]+)+|www\.[A-Za-z\d]+(?:\.[A-Za-z\d]+)+|(?:tel|mailto):[\w+.-]+)(?:\/[+~%/\w-]*)?(?:\?[-;&=%\w]*)?(?:#\w+)?$/,Hp=/^(?:\/[\w\-./]*(?:#\w[\w-]*)?|#[\w\-]+)$/;function yi(t){if(!t)return!1;if(t==="https://"||jp.test(t)||Hp.test(t))return!0;try{return new URL(t),!0}catch{}return!1}var Ii=t=>{let e=Up(5),{clientProps:o}=t,[r]=Wp(),n,l;return e[0]!==o.defaultLinkType||e[1]!==o.defaultLinkURL||e[2]!==r?(n=()=>{if(!r.hasNodes([oe]))throw new Error("LinkPlugin: LinkNode not registered on editor");return Gp(r.registerCommand(ce,i=>i===null?(ir(null),!0):(i.fields?.linkType||(i.fields.linkType=o.defaultLinkType),i.fields?.url||(i.fields.url=o.defaultLinkURL),ir(i),!0),Ri),r.registerCommand(Xp,i=>{let s=Vp();if(!Jp(s)||s.isCollapsed()||!(i instanceof ClipboardEvent)||i.clipboardData==null)return!1;let d=i.clipboardData.getData("text");if(!yi(d))return!1;if(!s.getNodes().some(Zp)){let c={doc:null,linkType:"custom",newTab:!1,url:d};return r.dispatchCommand(ce,{fields:c,text:null}),i.preventDefault(),!0}return!1},Ri))},l=[o.defaultLinkType,o.defaultLinkURL,r],e[0]=o.defaultLinkType,e[1]=o.defaultLinkURL,e[2]=r,e[3]=n,e[4]=l):(n=e[3],l=e[4]),zp(n,l),null};function Zp(t){return Kp(t)}var Mi=[or([{ChildComponent:oi,isActive:({selection:t})=>{if(vi(t)){let e=ze(t);return Yp(e,K)!=null}return!1},isEnabled:({selection:t})=>!!(vi(t)&&ur()?.getTextContent()?.length),key:"link",label:({i18n:t})=>t.t("lexical:link:label"),onSelect:({editor:t,isActive:e})=>{if(e)t.dispatchCommand(ce,null);else{let o,r=[];if(t.getEditorState().read(()=>{o=ur()?.getTextContent(),r=ur()?.getNodes()??[]}),!o?.length)return;let n={doc:null};t.dispatchCommand(po,{fields:n,selectedNodes:r,text:o})}},order:1}])],qp=$(({props:t})=>({markdownTransformers:[ii],nodes:[oe,t?.disableAutoLinks===!0?null:be].filter(Boolean),plugins:[{Component:Ii,position:"normal"},t?.disableAutoLinks===!0||t?.disableAutoLinks==="creationOnly"?null:{Component:hi,position:"normal"},{Component:gi,position:"normal"},{Component:Li,position:"floatingAnchorElem"}].filter(Boolean),sanitizedClientFeatureProps:t,toolbarFixed:{groups:Mi},toolbarInline:{groups:Mi}}));import{$isListNode as pr,INSERT_CHECK_LIST_COMMAND as Pi,ListItemNode as df,ListNode as mf}from"@lexical/list";import{$isRangeSelection as pf}from"lexical";import{jsx as Di,jsxs as Qp}from"react/jsx-runtime";import"react";var dr=()=>Qp("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[Di("rect",{height:"13",rx:"1.5",stroke:"currentColor",width:"13",x:"3.5",y:"3.5"}),Di("path",{d:"M7 10L9 12.5L13 7.5",stroke:"currentColor",strokeWidth:"1.5"})]});import{jsx as ef}from"react/jsx-runtime";import{ListPlugin as tf}from"@lexical/react/LexicalListPlugin.js";import"react";var Ze=()=>ef(tf,{});function ho(t,e){return t==="ordered"?!e.has("unorderedList"):t==="checklist"?!e.has("unorderedList")&&!e.has("orderedList"):!1}function Ye(t){return{items:t,key:"lists",label:({i18n:e})=>e.t("lexical:general:slashMenuListGroupLabel")}}import{$isListNode as lf,ListItemNode as sf,ListNode as af}from"@lexical/list";import{$createListItemNode as of,$createListNode as rf,$isListItemNode as nf,$isListNode as mr}from"@lexical/list";var $i=4,qe=t=>(e,o,r)=>{let n=e.getPreviousSibling(),l=e.getNextSibling(),i=of(t==="check"?r[3]==="x":void 0);if(mr(l)&&l.getListType()===t){let d=l.getFirstChild();d!==null?d.insertBefore(i):l.append(i),e.remove()}else if(mr(n)&&n.getListType()===t)n.append(i),e.remove();else{let d=rf(t,t==="number"?Number(r[2]):void 0);d.append(i),e.replace(d)}i.append(...o),i.select(0,0);let s=Math.floor(r[1].length/$i);s&&i.setIndent(s)},Fe=(t,e,o)=>{let r=[],n=t.getChildren(),l=0;for(let i of n)if(nf(i)){if(i.getChildrenSize()===1){let u=i.getFirstChild();if(mr(u)){r.push(Fe(u,e,o+1));continue}}let s=" ".repeat(o*$i),d=t.getListType(),c=d==="number"?`${t.getStart()+l}. `:d==="check"?`- [${i.getChecked()?"x":" "}] `:"- ";r.push(s+c+e(i)),l++}return r.join(`
`)};var Ai={type:"element",dependencies:[af,sf],export:(t,e)=>lf(t)?Fe(t,e,0):null,regExp:/^(\s*)(?:-\s)?\s?(\[(\s|x)?\])\s/i,replace:qe("check")};import{jsx as cf}from"react/jsx-runtime";import{CheckListPlugin as uf}from"@lexical/react/LexicalCheckListPlugin.js";import"react";var Oi=()=>cf(uf,{});var Fi=[te([{ChildComponent:dr,isActive:({selection:t})=>{if(!pf(t))return!1;for(let e of t.getNodes()){if(pr(e)&&e.getListType()==="check")continue;let o=e.getParent();if(pr(o)&&o.getListType()==="check")continue;let r=o?.getParent();if(!(pr(r)&&r.getListType()==="check"))return!1}return!0},key:"checklist",label:({i18n:t})=>t.t("lexical:checklist:label"),onSelect:({editor:t})=>{t.dispatchCommand(Pi,void 0)},order:12}])],ff=$(({featureProviderMap:t})=>{let e=[{Component:Oi,position:"normal"}],o=ho("checklist",t);return o&&e.push({Component:Ze,position:"normal"}),{markdownTransformers:[Ai],nodes:o?[mf,df]:[],plugins:e,slashMenu:{groups:[Ye([{Icon:dr,key:"checklist",keywords:["check list","check","checklist","cl"],label:({i18n:r})=>r.t("lexical:checklist:label"),onSelect:({editor:r})=>{r.dispatchCommand(Pi,void 0)}}])]},toolbarFixed:{groups:Fi},toolbarInline:{groups:Fi}}});import{$isListNode as hr,INSERT_ORDERED_LIST_COMMAND as Hi,ListItemNode as bf,ListNode as kf}from"@lexical/list";import{$isRangeSelection as _f}from"lexical";import{jsx as Et,jsxs as hf}from"react/jsx-runtime";import"react";var fr=()=>hf("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[Et("path",{d:"M5.89284 12.479C5.89284 13.368 5.26284 13.788 4.38084 14.236C3.75084 14.558 3.43584 14.789 3.40784 15.062H5.89984V16H2.06384V15.573C2.06384 14.523 2.92484 13.935 3.66684 13.501C4.38084 13.088 4.75184 12.878 4.75184 12.458C4.75184 12.08 4.52084 11.835 4.06584 11.835C3.58984 11.835 3.30984 12.199 3.28184 12.654H2.11284C2.18984 11.681 2.87584 10.918 4.07284 10.918C5.15784 10.918 5.89284 11.555 5.89284 12.479Z",fill:"currentColor"}),Et("path",{d:"M2.68608 4.535V3.737C3.54008 3.737 3.90408 3.513 4.02308 2.995H4.89108V8H3.68008L3.68008 4.535H2.68608Z",fill:"currentColor"}),Et("path",{d:"M8 15L17 15",stroke:"currentColor",strokeWidth:"1.5"}),Et("path",{d:"M8 10L17 10",stroke:"currentColor",strokeWidth:"1.5"}),Et("path",{d:"M8 5L17 5",stroke:"currentColor",strokeWidth:"1.5"})]});import{$isListNode as gf,ListItemNode as xf,ListNode as Cf}from"@lexical/list";var Bi={type:"element",dependencies:[Cf,xf],export:(t,e)=>gf(t)?Fe(t,e,0):null,regExp:/^(\s*)(\d+)\.\s/,replace:qe("number")};var ji=[te([{ChildComponent:fr,isActive:({selection:t})=>{if(!_f(t))return!1;for(let e of t.getNodes()){if(hr(e)&&e.getListType()==="number")continue;let o=e.getParent();if(hr(o)&&o.getListType()==="number")continue;let r=o?.getParent();if(!(hr(r)&&r.getListType()==="number"))return!1}return!0},key:"orderedList",label:({i18n:t})=>t.t("lexical:orderedList:label"),onSelect:({editor:t})=>{t.dispatchCommand(Hi,void 0)},order:10}])],Tf=$(({featureProviderMap:t})=>{let e=ho("ordered",t);return{markdownTransformers:[Bi],nodes:e?[kf,bf]:[],plugins:e?[{Component:Ze,position:"normal"}]:[],slashMenu:{groups:[Ye([{Icon:fr,key:"orderedList",keywords:["ordered list","ol"],label:({i18n:o})=>o.t("lexical:orderedList:label"),onSelect:({editor:o})=>{o.dispatchCommand(Hi,void 0)}}])]},toolbarFixed:{groups:ji},toolbarInline:{groups:ji}}});import{$isListNode as xr,INSERT_UNORDERED_LIST_COMMAND as Gi,ListItemNode as Lf,ListNode as yf}from"@lexical/list";import{$isRangeSelection as Rf}from"lexical";import{jsx as Qe,jsxs as wf}from"react/jsx-runtime";import"react";var gr=()=>wf("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[Qe("circle",{cx:"4",cy:"5",fill:"currentColor",r:"1.15",stroke:"currentColor",strokeWidth:"0.3"}),Qe("circle",{cx:"4",cy:"10",fill:"currentColor",r:"1.15",stroke:"currentColor",strokeWidth:"0.3"}),Qe("circle",{cx:"4",cy:"15",fill:"currentColor",r:"1.15",stroke:"currentColor",strokeWidth:"0.3"}),Qe("path",{d:"M17 5H7",stroke:"currentColor",strokeWidth:"1.5"}),Qe("path",{d:"M17 10H7",stroke:"currentColor",strokeWidth:"1.5"}),Qe("path",{d:"M17 15H7",stroke:"currentColor",strokeWidth:"1.5"})]});import{$isListNode as Ef,ListItemNode as Sf,ListNode as Nf}from"@lexical/list";var Ui={type:"element",dependencies:[Nf,Sf],export:(t,e)=>Ef(t)?Fe(t,e,0):null,regExp:/^(\s*)[-*+]\s/,replace:qe("bullet")};var Wi=[te([{ChildComponent:gr,isActive:({selection:t})=>{if(!Rf(t))return!1;for(let e of t.getNodes()){if(xr(e)&&e.getListType()==="bullet")continue;let o=e.getParent();if(xr(o)&&o.getListType()==="bullet")continue;let r=o?.getParent();if(!(xr(r)&&r.getListType()==="bullet"))return!1}return!0},key:"unorderedList",label:({i18n:t})=>t.t("lexical:unorderedList:label"),onSelect:({editor:t})=>{t.dispatchCommand(Gi,void 0)},order:11}])],If=$({markdownTransformers:[Ui],nodes:[yf,Lf],plugins:[{Component:Ze,position:"normal"}],slashMenu:{groups:[Ye([{Icon:gr,key:"unorderedList",keywords:["unordered list","ul"],label:({i18n:t})=>t.t("lexical:unorderedList:label"),onSelect:({editor:t})=>{t.dispatchCommand(Gi,void 0)}}])]},toolbarFixed:{groups:Wi},toolbarInline:{groups:Wi}});import{jsx as vf}from"react/jsx-runtime";import{addClassNamesToElement as Mf}from"@lexical/utils";import{$applyNodeReplacement as Df,DecoratorNode as $f}from"lexical";import*as Vi from"react";var Af=Vi.lazy(()=>import("./Component-MBLHTKDK.js").then(t=>({default:t.UnknownConvertedNodeComponent}))),St=class extends $f{__data;constructor({data:e,key:o}){super(o),this.__data=e}static clone(e){return new this({data:e.__data,key:e.__key})}static getType(){return"unknownConverted"}static importJSON(e){return Of({data:e.data})}canInsertTextAfter(){return!0}canInsertTextBefore(){return!0}createDOM(e){let o=document.createElement("span");return Mf(o,"unknownConverted"),o}decorate(){return vf(Af,{data:this.__data})}exportJSON(){return{type:this.getType(),data:this.__data,version:1}}isInline(){return!0}updateDOM(e,o){return!1}};function Of({data:t}){return Df(new St({data:t}))}var Ff=$(()=>({nodes:[St]}));import{jsx as Pf}from"react/jsx-runtime";import{addClassNamesToElement as Bf}from"@lexical/utils";import{$applyNodeReplacement as jf,DecoratorNode as Hf}from"lexical";import*as Ki from"react";var Uf=Ki.lazy(()=>import("./Component-DOSSWC76.js").then(t=>({default:t.UnknownConvertedNodeComponent}))),Nt=class extends Hf{__data;constructor({data:e,key:o}){super(o),this.__data=e}static clone(e){return new this({data:e.__data,key:e.__key})}static getType(){return"unknownConverted"}static importJSON(e){return Wf({data:e.data})}canInsertTextAfter(){return!0}canInsertTextBefore(){return!0}createDOM(e){let o=document.createElement("span");return Bf(o,"unknownConverted"),o}decorate(){return Pf(Uf,{data:this.__data})}exportJSON(){return{type:this.getType(),data:this.__data,version:1}}isInline(){return!0}updateDOM(e,o){return!1}};function Wf({data:t}){return jf(new Nt({data:t}))}var Gf=$(()=>({nodes:[Nt]}));import{$setBlocksType as zi}from"@lexical/selection";import{$createParagraphNode as Zi,$getSelection as Yi,$isParagraphNode as Ji,$isRangeSelection as Vf}from"lexical";var Xi=[te([{ChildComponent:mt,isActive:({selection:t})=>{if(!Vf(t))return!1;for(let e of t.getNodes())if(!Ji(e)&&!Ji(e.getParent()))return!1;return!0},key:"paragraph",label:({i18n:t})=>t.t("lexical:paragraph:label2"),onSelect:({editor:t})=>{t.update(()=>{let e=Yi();zi(e,()=>Zi())})},order:1}])],Kf=$({slashMenu:{groups:[Y([{Icon:mt,key:"paragraph",keywords:["normal","paragraph","p","text"],label:({i18n:t})=>t.t("lexical:paragraph:label"),onSelect:({editor:t})=>{t.update(()=>{let e=Yi();zi(e,()=>Zi())})}}])]},toolbarFixed:{groups:Xi},toolbarInline:{groups:Xi}});import{c as p0}from"react/compiler-runtime";import{jsx as xs}from"react/jsx-runtime";import{useLexicalComposerContext as f0}from"@lexical/react/LexicalComposerContext";import{useEffect as h0,useState as g0}from"react";import{jsx as gs,Fragment as m0}from"react/jsx-runtime";import"react";import{jsx as Jf}from"react/jsx-runtime";var qi={quote:({node:t,nodesToJSX:e})=>{let o=e({nodes:t.children});return Jf("blockquote",{children:o})}};import{jsx as Xf}from"react/jsx-runtime";var Qi={heading:({node:t,nodesToJSX:e})=>{let o=e({nodes:t.children}),r=t.tag;return Xf(r,{children:o})}};import{jsx as zf}from"react/jsx-runtime";var es={horizontalrule:zf("hr",{})};import{jsx as Zf}from"react/jsx-runtime";var ts={linebreak:Zf("br",{})};import{jsx as os}from"react/jsx-runtime";var rs=({internalDocToHref:t})=>({autolink:({node:e,nodesToJSX:o})=>{let r=o({nodes:e.children}),n=e.fields.newTab?"noopener noreferrer":void 0,l=e.fields.newTab?"_blank":void 0;return os("a",{href:e.fields.url,rel:n,target:l,children:r})},link:({node:e,nodesToJSX:o})=>{let r=o({nodes:e.children}),n=e.fields.newTab?"noopener noreferrer":void 0,l=e.fields.newTab?"_blank":void 0,i=e.fields.url??"";return e.fields.linkType==="internal"&&(t?i=t({linkNode:e}):(console.error("Lexical => JSX converter: Link converter: found internal link, but internalDocToHref is not provided"),i="#")),os("a",{href:i,rel:n,target:l,children:r})}});import{jsx as et,jsxs as Yf,Fragment as qf}from"react/jsx-runtime";import{v4 as Qf}from"uuid";var ns={list:({node:t,nodesToJSX:e})=>{let o=e({nodes:t.children}),r=t.tag;return et(r,{className:`list-${t?.listType}`,children:o})},listitem:({node:t,nodesToJSX:e,parent:o})=>{let r=t.children.some(l=>l.type==="list"),n=e({nodes:t.children});if("listType"in o&&o?.listType==="check"){let l=Qf();return et("li",{"aria-checked":t.checked?"true":"false",className:`list-item-checkbox${t.checked?" list-item-checkbox-checked":" list-item-checkbox-unchecked"}${r?" nestedListItem":""}`,role:"checkbox",style:{listStyleType:"none"},tabIndex:-1,value:t?.value,children:r?n:Yf(qf,{children:[et("input",{checked:t.checked,id:l,readOnly:!0,type:"checkbox"}),et("label",{htmlFor:l,children:n}),et("br",{})]})})}else return et("li",{className:`${r?"nestedListItem":""}`,style:r?{listStyleType:"none"}:void 0,value:t?.value,children:n})}};import{jsx as Cr}from"react/jsx-runtime";var ls={paragraph:({node:t,nodesToJSX:e})=>{let o=e({nodes:t.children});return o?.length?Cr("p",{children:o}):Cr("p",{children:Cr("br",{})})}};var is={tab:"	"};import{jsx as Lt}from"react/jsx-runtime";var ss={table:({node:t,nodesToJSX:e})=>{let o=e({nodes:t.children});return Lt("div",{className:"lexical-table-container",children:Lt("table",{className:"lexical-table",style:{borderCollapse:"collapse"},children:Lt("tbody",{children:o})})})},tablecell:({node:t,nodesToJSX:e})=>{let o=e({nodes:t.children}),r=t.headerState>0?"th":"td",n=`lexical-table-cell-header-${t.headerState}`,l={backgroundColor:t.backgroundColor||void 0,border:"1px solid #ccc",padding:"8px"},i=t.colSpan&&t.colSpan>1?t.colSpan:void 0,s=t.rowSpan&&t.rowSpan>1?t.rowSpan:void 0;return Lt(r,{className:`lexical-table-cell ${n}`,colSpan:i,rowSpan:s,style:l,children:o})},tablerow:({node:t,nodesToJSX:e})=>{let o=e({nodes:t.children});return Lt("tr",{className:"lexical-table-row",children:o})}};import{jsx as Pe}from"react/jsx-runtime";import"react";var F={DOM_ELEMENT_TYPE:1,DOM_TEXT_TYPE:3,NO_DIRTY_NODES:0,HAS_DIRTY_NODES:1,FULL_RECONCILE:2,IS_NORMAL:0,IS_TOKEN:1,IS_SEGMENTED:2,IS_INERT:3,IS_BOLD:1,IS_ITALIC:2,IS_STRIKETHROUGH:4,IS_UNDERLINE:8,IS_CODE:16,IS_SUBSCRIPT:32,IS_SUPERSCRIPT:64,IS_HIGHLIGHT:128,IS_DIRECTIONLESS:1,IS_UNMERGEABLE:2,IS_ALIGN_LEFT:1,IS_ALIGN_CENTER:2,IS_ALIGN_RIGHT:3,IS_ALIGN_JUSTIFY:4,IS_ALIGN_START:5,IS_ALIGN_END:6},e0=F.IS_BOLD|F.IS_ITALIC|F.IS_STRIKETHROUGH|F.IS_UNDERLINE|F.IS_CODE|F.IS_SUBSCRIPT|F.IS_SUPERSCRIPT|F.IS_HIGHLIGHT,t0="\xA0",o0=`

`,as="\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC",cs="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u0300-\u0590\u0800-\u1FFF\u200E\u2C00-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF",r0=new RegExp("^[^"+cs+"]*["+as+"]"),n0=new RegExp("^[^"+as+"]*["+cs+"]"),l0={bold:F.IS_BOLD,code:F.IS_CODE,highlight:F.IS_HIGHLIGHT,italic:F.IS_ITALIC,strikethrough:F.IS_STRIKETHROUGH,subscript:F.IS_SUBSCRIPT,superscript:F.IS_SUPERSCRIPT,underline:F.IS_UNDERLINE},i0={directionless:F.IS_DIRECTIONLESS,unmergeable:F.IS_UNMERGEABLE},s0={center:F.IS_ALIGN_CENTER,end:F.IS_ALIGN_END,justify:F.IS_ALIGN_JUSTIFY,left:F.IS_ALIGN_LEFT,right:F.IS_ALIGN_RIGHT,start:F.IS_ALIGN_START},a0={[F.IS_ALIGN_CENTER]:"center",[F.IS_ALIGN_END]:"end",[F.IS_ALIGN_JUSTIFY]:"justify",[F.IS_ALIGN_LEFT]:"left",[F.IS_ALIGN_RIGHT]:"right",[F.IS_ALIGN_START]:"start"},c0={normal:F.IS_NORMAL,segmented:F.IS_SEGMENTED,token:F.IS_TOKEN},u0={[F.IS_NORMAL]:"normal",[F.IS_SEGMENTED]:"segmented",[F.IS_TOKEN]:"token"};var us={text:({node:t})=>{let e=t.text;return t.format&F.IS_BOLD&&(e=Pe("strong",{children:e})),t.format&F.IS_ITALIC&&(e=Pe("em",{children:e})),t.format&F.IS_STRIKETHROUGH&&(e=Pe("span",{style:{textDecoration:"line-through"},children:e})),t.format&F.IS_UNDERLINE&&(e=Pe("span",{style:{textDecoration:"underline"},children:e})),t.format&F.IS_CODE&&(e=Pe("code",{children:e})),t.format&F.IS_SUBSCRIPT&&(e=Pe("sub",{children:e})),t.format&F.IS_SUPERSCRIPT&&(e=Pe("sup",{children:e})),e}};import{jsx as yt}from"react/jsx-runtime";var ds={upload:({node:t})=>{let e=t;if(typeof e.value!="object")return null;let o=e.value,r=o.url;if(!o.mimeType.startsWith("image"))return yt("a",{href:r,rel:"noopener noreferrer",children:o.filename});if(!o.sizes||!Object.keys(o.sizes).length)return yt("img",{alt:o.filename,height:o.height,src:r,width:o.width});let n=[];for(let l in o.sizes){let i=o.sizes[l];if(!i||!i.width||!i.height||!i.mimeType||!i.filesize||!i.filename||!i.url)continue;let s=i?.url;n.push(yt("source",{media:`(max-width: ${i.width}px)`,srcSet:s,type:i.mimeType},l))}return n.push(yt("img",{alt:o?.filename,height:o?.height,src:r,width:o?.width},"image")),yt("picture",{children:n})}};var tt={...ls,...us,...ts,...qi,...ss,...Qi,...es,...ns,...rs({}),...ds,...is};import{jsx as ps,Fragment as d0}from"react/jsx-runtime";import br from"react";function ms(t){let e=!!t?.root?.children?.length,o=!1;if(t?.root?.children?.length===1&&t?.root?.children[0]?.type==="paragraph"){let r=t?.root?.children[0];if(!r?.children||r?.children?.length===0)o=!0;else if(r?.children?.length===1){let n=r?.children[0];n?.type==="text"&&(n?.text?.length||(o=!0))}}return!(!e||o)}function fs({converters:t,data:e,disableIndent:o,disableTextAlign:r}){return ms(e)?hs({converters:t,disableIndent:o,disableTextAlign:r,nodes:e?.root?.children,parent:e?.root}):ps(d0,{})}function hs({converters:t,disableIndent:e,disableTextAlign:o,nodes:r,parent:n}){let l=t.unknown;return r.map((s,d)=>{let c;s.type==="block"?(c=t?.blocks?.[s?.fields?.blockType],!c&&!l&&console.error(`Lexical => JSX converter: Blocks converter: found ${s?.fields?.blockType} block, but no converter is provided`)):s.type==="inlineBlock"?(c=t?.inlineBlocks?.[s?.fields?.blockType],!c&&!l&&console.error(`Lexical => JSX converter: Inline Blocks converter: found ${s?.fields?.blockType} inline block, but no converter is provided`)):c=t[s.type];try{!c&&l&&(c=l);let u;c?u=typeof c=="function"?c({childIndex:d,converters:t,node:s,nodesToJSX:p=>hs({converters:p.converters??t,disableIndent:p.disableIndent??e,disableTextAlign:p.disableTextAlign??o,nodes:p.nodes,parent:p.parent??{...s,parent:n}}),parent:n}):c:u=ps("span",{children:"unknown node"},d);let a={};if(!o&&(!Array.isArray(o)||!o?.includes(s.type))&&"format"in s&&s.format)switch(s.format){case"center":a.textAlign="center";break;case"end":a.textAlign="right";break;case"justify":a.textAlign="justify";break;case"left":break;case"right":a.textAlign="right";break;case"start":a.textAlign="left";break}if(!e&&(!Array.isArray(e)||!e?.includes(s.type))&&"indent"in s&&s.indent&&s.type!=="listitem"&&(a.paddingInlineStart=`${Number(s.indent)*40}px`),br.isValidElement(u)){if(a.textAlign||a.paddingInlineStart){let m={...a,...u?.props?.style??{}};return br.cloneElement(u,{key:d,style:m})}return br.cloneElement(u,{key:d})}return u}catch(u){return console.error("Error converting lexical node to JSX:",u,"node:",s),null}}).filter(Boolean)}var kr=({className:t,converters:e,data:o,disableContainer:r,disableIndent:n,disableTextAlign:l})=>{if(!o)return null;let i={};e?typeof e=="function"?i=e({defaultConverters:tt}):i=e:i=tt;let s=o&&!Array.isArray(o)&&typeof o=="object"&&"root"in o&&fs({converters:i,data:o,disableIndent:n,disableTextAlign:l});return r?gs(m0,{children:s}):gs("div",{className:t??"payload-richtext",children:s})};function Cs(){let t=p0(7),[e]=f0(),o;t[0]!==e?(o=e.getEditorState().toJSON(),t[0]=e,t[1]=o):o=t[1];let[r,n]=g0(o),l,i;t[2]!==e?(l=()=>e.registerUpdateListener(d=>{let{editorState:c}=d;n(c.toJSON())}),i=[e],t[2]=e,t[3]=l,t[4]=i):(l=t[3],i=t[4]),h0(l,i);let s;return t[5]!==r?(s=xs("div",{className:"debug-jsx-converter",children:xs(kr,{converters:tt,data:r})}),t[5]=r,t[6]=s):s=t[6],s}var x0=$({plugins:[{Component:Cs,position:"bottom"}]});var B={amber:{50:"oklch(0.987 0.022 95.277)",100:"oklch(0.962 0.059 95.617)",200:"oklch(0.924 0.12 95.746)",300:"oklch(0.879 0.169 91.605)",400:"oklch(0.828 0.189 84.429)",500:"oklch(0.769 0.188 70.08)",600:"oklch(0.666 0.179 58.318)",700:"oklch(0.555 0.163 48.998)",800:"oklch(0.473 0.137 46.201)",900:"oklch(0.414 0.112 45.904)",950:"oklch(0.279 0.077 45.635)"},black:"#000",blue:{50:"oklch(0.97 0.014 254.604)",100:"oklch(0.932 0.032 255.585)",200:"oklch(0.882 0.059 254.128)",300:"oklch(0.809 0.105 251.813)",400:"oklch(0.707 0.165 254.624)",500:"oklch(0.623 0.214 259.815)",600:"oklch(0.546 0.245 262.881)",700:"oklch(0.488 0.243 264.376)",800:"oklch(0.424 0.199 265.638)",900:"oklch(0.379 0.146 265.522)",950:"oklch(0.282 0.091 267.935)"},current:"currentColor",cyan:{50:"oklch(0.984 0.019 200.873)",100:"oklch(0.956 0.045 203.388)",200:"oklch(0.917 0.08 205.041)",300:"oklch(0.865 0.127 207.078)",400:"oklch(0.789 0.154 211.53)",500:"oklch(0.715 0.143 215.221)",600:"oklch(0.609 0.126 221.723)",700:"oklch(0.52 0.105 223.128)",800:"oklch(0.45 0.085 224.283)",900:"oklch(0.398 0.07 227.392)",950:"oklch(0.302 0.056 229.695)"},emerald:{50:"oklch(0.979 0.021 166.113)",100:"oklch(0.95 0.052 163.051)",200:"oklch(0.905 0.093 164.15)",300:"oklch(0.845 0.143 164.978)",400:"oklch(0.765 0.177 163.223)",500:"oklch(0.696 0.17 162.48)",600:"oklch(0.596 0.145 163.225)",700:"oklch(0.508 0.118 165.612)",800:"oklch(0.432 0.095 166.913)",900:"oklch(0.378 0.077 168.94)",950:"oklch(0.262 0.051 172.552)"},fuchsia:{50:"oklch(0.977 0.017 320.058)",100:"oklch(0.952 0.037 318.852)",200:"oklch(0.903 0.076 319.62)",300:"oklch(0.833 0.145 321.434)",400:"oklch(0.74 0.238 322.16)",500:"oklch(0.667 0.295 322.15)",600:"oklch(0.591 0.293 322.896)",700:"oklch(0.518 0.253 323.949)",800:"oklch(0.452 0.211 324.591)",900:"oklch(0.401 0.17 325.612)",950:"oklch(0.293 0.136 325.661)"},gray:{50:"oklch(0.985 0.002 247.839)",100:"oklch(0.967 0.003 264.542)",200:"oklch(0.928 0.006 264.531)",300:"oklch(0.872 0.01 258.338)",400:"oklch(0.707 0.022 261.325)",500:"oklch(0.551 0.027 264.364)",600:"oklch(0.446 0.03 256.802)",700:"oklch(0.373 0.034 259.733)",800:"oklch(0.278 0.033 256.848)",900:"oklch(0.21 0.034 264.665)",950:"oklch(0.13 0.028 261.692)"},green:{50:"oklch(0.982 0.018 155.826)",100:"oklch(0.962 0.044 156.743)",200:"oklch(0.925 0.084 155.995)",300:"oklch(0.871 0.15 154.449)",400:"oklch(0.792 0.209 151.711)",500:"oklch(0.723 0.219 149.579)",600:"oklch(0.627 0.194 149.214)",700:"oklch(0.527 0.154 150.069)",800:"oklch(0.448 0.119 151.328)",900:"oklch(0.393 0.095 152.535)",950:"oklch(0.266 0.065 152.934)"},indigo:{50:"oklch(0.962 0.018 272.314)",100:"oklch(0.93 0.034 272.788)",200:"oklch(0.87 0.065 274.039)",300:"oklch(0.785 0.115 274.713)",400:"oklch(0.673 0.182 276.935)",500:"oklch(0.585 0.233 277.117)",600:"oklch(0.511 0.262 276.966)",700:"oklch(0.457 0.24 277.023)",800:"oklch(0.398 0.195 277.366)",900:"oklch(0.359 0.144 278.697)",950:"oklch(0.257 0.09 281.288)"},inherit:"inherit",lime:{50:"oklch(0.986 0.031 120.757)",100:"oklch(0.967 0.067 122.328)",200:"oklch(0.938 0.127 124.321)",300:"oklch(0.897 0.196 126.665)",400:"oklch(0.841 0.238 128.85)",500:"oklch(0.768 0.233 130.85)",600:"oklch(0.648 0.2 131.684)",700:"oklch(0.532 0.157 131.589)",800:"oklch(0.453 0.124 130.933)",900:"oklch(0.405 0.101 131.063)",950:"oklch(0.274 0.072 132.109)"},neutral:{50:"oklch(0.985 0 0)",100:"oklch(0.97 0 0)",200:"oklch(0.922 0 0)",300:"oklch(0.87 0 0)",400:"oklch(0.708 0 0)",500:"oklch(0.556 0 0)",600:"oklch(0.439 0 0)",700:"oklch(0.371 0 0)",800:"oklch(0.269 0 0)",900:"oklch(0.205 0 0)",950:"oklch(0.145 0 0)"},orange:{50:"oklch(0.98 0.016 73.684)",100:"oklch(0.954 0.038 75.164)",200:"oklch(0.901 0.076 70.697)",300:"oklch(0.837 0.128 66.29)",400:"oklch(0.75 0.183 55.934)",500:"oklch(0.705 0.213 47.604)",600:"oklch(0.646 0.222 41.116)",700:"oklch(0.553 0.195 38.402)",800:"oklch(0.47 0.157 37.304)",900:"oklch(0.408 0.123 38.172)",950:"oklch(0.266 0.079 36.259)"},pink:{50:"oklch(0.971 0.014 343.198)",100:"oklch(0.948 0.028 342.258)",200:"oklch(0.899 0.061 343.231)",300:"oklch(0.823 0.12 346.018)",400:"oklch(0.718 0.202 349.761)",500:"oklch(0.656 0.241 354.308)",600:"oklch(0.592 0.249 0.584)",700:"oklch(0.525 0.223 3.958)",800:"oklch(0.459 0.187 3.815)",900:"oklch(0.408 0.153 2.432)",950:"oklch(0.284 0.109 3.907)"},purple:{50:"oklch(0.977 0.014 308.299)",100:"oklch(0.946 0.033 307.174)",200:"oklch(0.902 0.063 306.703)",300:"oklch(0.827 0.119 306.383)",400:"oklch(0.714 0.203 305.504)",500:"oklch(0.627 0.265 303.9)",600:"oklch(0.558 0.288 302.321)",700:"oklch(0.496 0.265 301.924)",800:"oklch(0.438 0.218 303.724)",900:"oklch(0.381 0.176 304.987)",950:"oklch(0.291 0.149 302.717)"},red:{50:"oklch(0.971 0.013 17.38)",100:"oklch(0.936 0.032 17.717)",200:"oklch(0.885 0.062 18.334)",300:"oklch(0.808 0.114 19.571)",400:"oklch(0.704 0.191 22.216)",500:"oklch(0.637 0.237 25.331)",600:"oklch(0.577 0.245 27.325)",700:"oklch(0.505 0.213 27.518)",800:"oklch(0.444 0.177 26.899)",900:"oklch(0.396 0.141 25.723)",950:"oklch(0.258 0.092 26.042)"},rose:{50:"oklch(0.969 0.015 12.422)",100:"oklch(0.941 0.03 12.58)",200:"oklch(0.892 0.058 10.001)",300:"oklch(0.81 0.117 11.638)",400:"oklch(0.712 0.194 13.428)",500:"oklch(0.645 0.246 16.439)",600:"oklch(0.586 0.253 17.585)",700:"oklch(0.514 0.222 16.935)",800:"oklch(0.455 0.188 13.697)",900:"oklch(0.41 0.159 10.272)",950:"oklch(0.271 0.105 12.094)"},sky:{50:"oklch(0.977 0.013 236.62)",100:"oklch(0.951 0.026 236.824)",200:"oklch(0.901 0.058 230.902)",300:"oklch(0.828 0.111 230.318)",400:"oklch(0.746 0.16 232.661)",500:"oklch(0.685 0.169 237.323)",600:"oklch(0.588 0.158 241.966)",700:"oklch(0.5 0.134 242.749)",800:"oklch(0.443 0.11 240.79)",900:"oklch(0.391 0.09 240.876)",950:"oklch(0.293 0.066 243.157)"},slate:{50:"oklch(0.984 0.003 247.858)",100:"oklch(0.968 0.007 247.896)",200:"oklch(0.929 0.013 255.508)",300:"oklch(0.869 0.022 252.894)",400:"oklch(0.704 0.04 256.788)",500:"oklch(0.554 0.046 257.417)",600:"oklch(0.446 0.043 257.281)",700:"oklch(0.372 0.044 257.287)",800:"oklch(0.279 0.041 260.031)",900:"oklch(0.208 0.042 265.755)",950:"oklch(0.129 0.042 264.695)"},stone:{50:"oklch(0.985 0.001 106.423)",100:"oklch(0.97 0.001 106.424)",200:"oklch(0.923 0.003 48.717)",300:"oklch(0.869 0.005 56.366)",400:"oklch(0.709 0.01 56.259)",500:"oklch(0.553 0.013 58.071)",600:"oklch(0.444 0.011 73.639)",700:"oklch(0.374 0.01 67.558)",800:"oklch(0.268 0.007 34.298)",900:"oklch(0.216 0.006 56.043)",950:"oklch(0.147 0.004 49.25)"},teal:{50:"oklch(0.984 0.014 180.72)",100:"oklch(0.953 0.051 180.801)",200:"oklch(0.91 0.096 180.426)",300:"oklch(0.855 0.138 181.071)",400:"oklch(0.777 0.152 181.912)",500:"oklch(0.704 0.14 182.503)",600:"oklch(0.6 0.118 184.704)",700:"oklch(0.511 0.096 186.391)",800:"oklch(0.437 0.078 188.216)",900:"oklch(0.386 0.063 188.416)",950:"oklch(0.277 0.046 192.524)"},transparent:"transparent",violet:{50:"oklch(0.969 0.016 293.756)",100:"oklch(0.943 0.029 294.588)",200:"oklch(0.894 0.057 293.283)",300:"oklch(0.811 0.111 293.571)",400:"oklch(0.702 0.183 293.541)",500:"oklch(0.606 0.25 292.717)",600:"oklch(0.541 0.281 293.009)",700:"oklch(0.491 0.27 292.581)",800:"oklch(0.432 0.232 292.759)",900:"oklch(0.38 0.189 293.745)",950:"oklch(0.283 0.141 291.089)"},white:"#fff",yellow:{50:"oklch(0.987 0.026 102.212)",100:"oklch(0.973 0.071 103.193)",200:"oklch(0.945 0.129 101.54)",300:"oklch(0.905 0.182 98.111)",400:"oklch(0.852 0.199 91.936)",500:"oklch(0.795 0.184 86.047)",600:"oklch(0.681 0.162 75.834)",700:"oklch(0.554 0.135 66.442)",800:"oklch(0.476 0.114 61.907)",900:"oklch(0.421 0.095 57.708)",950:"oklch(0.286 0.066 53.813)"},zinc:{50:"oklch(0.985 0 0)",100:"oklch(0.967 0.001 286.375)",200:"oklch(0.92 0.004 286.32)",300:"oklch(0.871 0.006 286.286)",400:"oklch(0.705 0.015 286.067)",500:"oklch(0.552 0.016 285.938)",600:"oklch(0.442 0.017 285.786)",700:"oklch(0.37 0.013 285.805)",800:"oklch(0.274 0.006 286.033)",900:"oklch(0.21 0.006 285.885)",950:"oklch(0.141 0.005 285.823)"}},C0={text:{"text-red":{css:{color:`light-dark(${B.red[600]}, ${B.red[400]})`},label:"Red"},"text-orange":{css:{color:`light-dark(${B.orange[600]}, ${B.orange[400]})`},label:"Orange"},"text-yellow":{css:{color:`light-dark(${B.yellow[700]}, ${B.yellow[300]})`},label:"Yellow"},"text-green":{css:{color:`light-dark(${B.green[700]}, ${B.green[400]})`},label:"Green"},"text-blue":{css:{color:`light-dark(${B.blue[600]}, ${B.blue[400]})`},label:"Blue"},"text-purple":{css:{color:`light-dark(${B.purple[600]}, ${B.purple[400]})`},label:"Purple"},"text-pink":{css:{color:`light-dark(${B.pink[600]}, ${B.pink[400]})`},label:"Pink"}},background:{"bg-red":{css:{"background-color":`light-dark(${B.red[400]}, ${B.red[600]})`},label:"Red"},"bg-orange":{css:{"background-color":`light-dark(${B.orange[400]}, ${B.orange[600]})`},label:"Orange"},"bg-yellow":{css:{"background-color":`light-dark(${B.yellow[300]}, ${B.yellow[700]})`},label:"Yellow"},"bg-green":{css:{"background-color":`light-dark(${B.green[400]}, ${B.green[700]})`},label:"Green"},"bg-blue":{css:{"background-color":`light-dark(${B.blue[400]}, ${B.blue[600]})`},label:"Blue"},"bg-purple":{css:{"background-color":`light-dark(${B.purple[400]}, ${B.purple[600]})`},label:"Purple"},"bg-pink":{css:{"background-color":`light-dark(${B.pink[400]}, ${B.pink[600]})`},label:"Pink"}}};import{$isNodeSelection as i1}from"lexical";import{jsx as Rt,jsxs as b0}from"react/jsx-runtime";import"react";var _r=()=>b0("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[Rt("g",{clipPath:"url(#clip0_4397_10817)",children:Rt("path",{d:"M7.75 12.25L15.25 4.75M15.25 4.75H11.5M15.25 4.75V8.5M13 11.5V13.75C13 14.5784 12.3284 15.25 11.5 15.25H6.25C5.42157 15.25 4.75 14.5784 4.75 13.75V8.5C4.75 7.67157 5.42157 7 6.25 7H8.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})}),Rt("defs",{children:Rt("clipPath",{id:"clip0_4397_10817",children:Rt("rect",{fill:"currentColor",height:"12",transform:"translate(4 4)",width:"12"})})})]});import{jsx as E0}from"react/jsx-runtime";import{$applyNodeReplacement as S0}from"lexical";import*as ks from"react";import{DecoratorBlockNode as k0}from"@lexical/react/LexicalDecoratorBlockNode.js";import{addClassNamesToElement as _0}from"@lexical/utils";import{$applyNodeReplacement as T0}from"lexical";function w0(t){let e=t.getAttribute("data-lexical-relationship-id"),o=t.getAttribute("data-lexical-relationship-relationTo");return e!=null&&o!=null?{node:bs({relationTo:o,value:e})}:null}var It=class extends k0{__data;constructor({data:e,format:o,key:r}){super(o,r),this.__data=e}static clone(e){return new this({data:e.__data,format:e.__format,key:e.__key})}static getType(){return"relationship"}static importDOM(){return{div:e=>!e.hasAttribute("data-lexical-relationship-relationTo")||!e.hasAttribute("data-lexical-relationship-id")?null:{conversion:w0,priority:2}}}static importJSON(e){e.version===1&&e?.value?.id&&(e.value=e.value.id);let o={relationTo:e.relationTo,value:e.value},r=bs(o);return r.setFormat(e.format),r}static isInline(){return!1}createDOM(e){let o=document.createElement("div");return _0(o,e?.theme?.relationship),o}decorate(e,o){return null}exportDOM(){let e=document.createElement("div");e.setAttribute("data-lexical-relationship-id",String(typeof this.__data?.value=="object"?this.__data?.value?.id:this.__data?.value)),e.setAttribute("data-lexical-relationship-relationTo",this.__data?.relationTo);let o=document.createTextNode(this.getTextContent());return e.append(o),{element:e}}exportJSON(){return{...super.exportJSON(),...this.getData(),type:"relationship",version:2}}getData(){return this.getLatest().__data}getTextContent(){return`${this.__data?.relationTo} relation to ${typeof this.__data?.value=="object"?this.__data?.value?.id:this.__data?.value}`}setData(e){let o=this.getWritable();o.__data=e}};function bs(t){return T0(new It({data:t}))}var N0=ks.lazy(()=>import("./RelationshipComponent-UCIWIEVD.js").then(t=>({default:t.RelationshipComponent})));function L0(t){let e=t.getAttribute("data-lexical-relationship-id"),o=t.getAttribute("data-lexical-relationship-relationTo");return e!=null&&o!=null?{node:Be({relationTo:o,value:e})}:null}var Te=class extends It{static clone(e){return super.clone(e)}static getType(){return super.getType()}static importDOM(){return{div:e=>!e.hasAttribute("data-lexical-relationship-relationTo")||!e.hasAttribute("data-lexical-relationship-id")?null:{conversion:L0,priority:2}}}static importJSON(e){e.version===1&&e?.value?.id&&(e.value=e.value.id);let o={relationTo:e.relationTo,value:e.value},r=Be(o);return r.setFormat(e.format),r}decorate(e,o){return E0(N0,{className:o.theme.relationship??"LexicalEditorTheme__relationship",data:this.__data,format:this.__format,nodeKey:this.getKey()})}exportJSON(){return super.exportJSON()}};function Be(t){return S0(new Te({data:t}))}function Tr(t){return t instanceof Te}import{c as X0}from"react/compiler-runtime";import{jsx as z0}from"react/jsx-runtime";import{useLexicalComposerContext as Z0}from"@lexical/react/LexicalComposerContext.js";import{$insertNodeToNearestRoot as Y0}from"@lexical/utils";import{$getPreviousSelection as q0,$getSelection as Q0,$isParagraphNode as e1,$isRangeSelection as t1,COMMAND_PRIORITY_EDITOR as o1,createCommand as r1}from"lexical";import{useEffect as n1}from"react";import{c as ws}from"react/compiler-runtime";import{jsx as wr}from"react/jsx-runtime";import{useLexicalComposerContext as Es}from"@lexical/react/LexicalComposerContext.js";import{toast as B0}from"@payloadcms/ui";import{$getNodeByKey as j0,COMMAND_PRIORITY_EDITOR as Ss}from"lexical";import{useEffect as Ns,useState as H0}from"react";import{c as y0}from"react/compiler-runtime";import{jsx as R0}from"react/jsx-runtime";import{useLexicalComposerContext as I0}from"@lexical/react/LexicalComposerContext";import{useListDrawer as v0,useModal as M0}from"@payloadcms/ui";import{$getNodeByKey as _s,$getPreviousSelection as D0,$getRoot as $0,$getSelection as A0,$isRangeSelection as O0,$setSelection as F0}from"lexical";import{useEffect as P0,useState as Ts}from"react";var vt=t=>{let e=y0(23),[o]=I0(),[r,n]=Ts(null),[l,i]=Ts(!1),[s,d,c]=v0(t),{closeDrawer:u,drawerSlug:a,isDrawerOpen:m,openDrawer:p}=c,{modalState:f}=M0(),h;e[0]===Symbol.for("react.memo_cache_sentinel")?(h=()=>{let R=A0()??D0();n(R)},e[0]=h):h=e[0];let x=h,_;e[1]!==o||e[2]!==r?(_=()=>{r&&o.update(()=>{if(O0(r)){let{anchor:R,focus:M}=r;_s(R.key)&&_s(M.key)&&F0(r.clone())}else $0().selectEnd()},{discrete:!0,skipTransforms:!0})},e[1]=o,e[2]=r,e[3]=_):_=e[3];let E=_,S;e[4]!==u?(S=()=>{u()},e[4]=u,e[5]=S):S=e[5];let T=S,C,g;e[6]!==a||e[7]!==f||e[8]!==E||e[9]!==l?(C=()=>{if(!l)return;let R=f[a];R&&!R?.isOpen&&(i(!1),setTimeout(()=>{E()},1))},g=[f,a,E,l],e[6]=a,e[7]=f,e[8]=E,e[9]=l,e[10]=C,e[11]=g):(C=e[10],g=e[11]),P0(C,g);let b;e[12]!==d?(b=R=>R0(d,{...R,onClick:()=>{x()}}),e[12]=d,e[13]=b):b=e[13];let k;e[14]!==p?(k=()=>{x(),p(),i(!0)},e[14]=p,e[15]=k):k=e[15];let y;return e[16]!==s||e[17]!==T||e[18]!==m||e[19]!==a||e[20]!==b||e[21]!==k?(y={closeListDrawer:T,isListDrawerOpen:m,ListDrawer:s,listDrawerSlug:a,ListDrawerToggler:b,openListDrawer:k},e[16]=s,e[17]=T,e[18]=m,e[19]=a,e[20]=b,e[21]=k,e[22]=y):y=e[22],y};var U0=({editor:t,relationTo:e,replaceNodeKey:o,value:r})=>{o?t.update(()=>{let n=j0(o);n&&n.replace(Be({relationTo:e,value:r}))}):t.dispatchCommand(Er,{relationTo:e,value:r})},W0=t=>{let e=ws(14),{enabledCollectionSlugs:o}=t,[r]=Es(),[n,l]=H0(null),i=o?.[0],s;e[0]!==o||e[1]!==i?(s={collectionSlugs:o,selectedCollection:i},e[0]=o,e[1]=i,e[2]=s):s=e[2];let{closeListDrawer:d,ListDrawer:c,openListDrawer:u}=vt(s),a,m;e[3]!==r||e[4]!==u?(a=()=>r.registerCommand(Ve,x=>(l(x?.replace?x?.replace.nodeKey:null),u(),!0),Ss),m=[r,u],e[3]=r,e[4]=u,e[5]=a,e[6]=m):(a=e[5],m=e[6]),Ns(a,m);let p;e[7]!==d||e[8]!==r||e[9]!==n?(p=x=>{let{collectionSlug:_,doc:E}=x;U0({editor:r,relationTo:_,replaceNodeKey:n,value:E.id}),d()},e[7]=d,e[8]=r,e[9]=n,e[10]=p):p=e[10];let f=p,h;return e[11]!==c||e[12]!==f?(h=wr(c,{onSelect:f}),e[11]=c,e[12]=f,e[13]=h):h=e[13],h},G0=()=>{let t=ws(3),[e]=Es(),o,r;return t[0]!==e?(o=()=>e.registerCommand(Ve,V0,Ss),r=[e],t[0]=e,t[1]=o,t[2]=r):(o=t[1],r=t[2]),Ns(o,r),null},Ls=({enabledCollectionSlugs:t})=>t?.length?wr(W0,{enabledCollectionSlugs:t}):wr(G0,{});function V0(){return B0.error("No relationship collections enabled"),!0}import{useConfig as K0,useEntityVisibility as J0}from"@payloadcms/ui";import*as ys from"react";var go=t=>{let{collectionSlugsBlacklist:e,collectionSlugsWhitelist:o,uploads:r=!1}=t||{},{config:{collections:n}}=K0(),{visibleEntities:l}=J0();return ys.useMemo(()=>{let s=[],d=[],c=o?new Set(o):null,u=e?new Set(e):null;for(let a of n){let{slug:m,admin:{enableRichTextRelationship:p},upload:f}=a;if(l?.collections.includes(m)){if(r){if(!p||!f)continue}else if(f||!p)continue;c&&!c.has(m)||u&&u.has(m)||(s.push(m),d.push(a))}}return{enabledCollections:d,enabledCollectionSlugs:s}},[n,l,r,o,e])};var Er=r1("INSERT_RELATIONSHIP_COMMAND"),Rs=t=>{let e=X0(8),{clientProps:o}=t,[r]=Z0(),n=o?.disabledCollections,l=o?.enabledCollections,i;e[0]!==n||e[1]!==l?(i={collectionSlugsBlacklist:n,collectionSlugsWhitelist:l},e[0]=n,e[1]=l,e[2]=i):i=e[2];let{enabledCollectionSlugs:s}=go(i),d,c;e[3]!==r?(d=()=>{if(!r.hasNodes([Te]))throw new Error("RelationshipPlugin: RelationshipNode not registered on editor");return r.registerCommand(Er,l1,o1)},c=[r],e[3]=r,e[4]=d,e[5]=c):(d=e[4],c=e[5]),n1(d,c);let u;return e[6]!==s?(u=z0(Ls,{enabledCollectionSlugs:s}),e[6]=s,e[7]=u):u=e[7],u};function l1(t){let e=Q0()||q0();if(t1(e)){let o=Be(t),{focus:r}=e,n=r.getNode();Y0(o),e1(n)&&!n.__first&&n.remove()}return!0}var s1=$({nodes:[Te],plugins:[{Component:Rs,position:"normal"}],slashMenu:{groups:[Y([{Icon:_r,key:"relationship",keywords:["relationship","relation","rel"],label:({i18n:t})=>t.t("lexical:relationship:label"),onSelect:({editor:t})=>{t.dispatchCommand(Ve,{replace:!1})}}])]},toolbarFixed:{groups:[xe([{ChildComponent:_r,isActive:({selection:t})=>{if(!i1(t)||!t.getNodes().length)return!1;let e=t.getNodes()[0];return Tr(e)},key:"relationship",label:({i18n:t})=>t.t("lexical:relationship:label"),onSelect:({editor:t})=>{t.dispatchCommand(Ve,{replace:!1})}}])]}});import{c as Ps}from"react/compiler-runtime";import{jsx as se,jsxs as $1}from"react/jsx-runtime";import{useLexicalComposerContext as A1}from"@lexical/react/LexicalComposerContext.js";import{useLexicalEditable as Bs}from"@lexical/react/useLexicalEditable";import{useScrollInfo as O1,useThrottledEffect as F1,useTranslation as P1}from"@payloadcms/ui";import*as we from"react";import{useMemo as B1}from"react";import{c as a1}from"react/compiler-runtime";import{jsx as c1}from"react/jsx-runtime";import{mergeRegister as u1}from"@lexical/utils";import{$addUpdateTag as d1,$getSelection as m1}from"lexical";import{useDeferredValue as p1,useEffect as f1,useState as h1}from"react";var Is="toolbar-popup__button",Mt=t=>{let e=a1(23),{children:o,editor:r,item:n}=t,l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l={active:!1,enabled:!0},e[0]=l):l=e[0];let[i,s]=h1(l),d=p1(i),c=H(),u=d.enabled?"":"disabled",a=d.active?"active":"",m=n.key?`${Is}-${n.key}`:"",p;e[1]!==u||e[2]!==a||e[3]!==m?(p=[Is,u,a,m].filter(Boolean),e[1]=u,e[2]=a,e[3]=m,e[4]=p):p=e[4];let f=p.join(" "),h;e[5]!==r||e[6]!==c||e[7]!==n?(h=()=>{r.getEditorState().read(()=>{let k=m1();if(!k)return;let y=n.isActive?n.isActive({editor:r,editorConfigContext:c,selection:k}):!1,R=n.isEnabled?n.isEnabled({editor:r,editorConfigContext:c,selection:k}):!0;s(M=>M.active===y&&M.enabled===R?M:{active:y,enabled:R})})},e[5]=r,e[6]=c,e[7]=n,e[8]=h):h=e[8];let x=h,_=Gt(),E,S;e[9]!==r||e[10]!==_||e[11]!==x?(E=()=>{_(x);let k=()=>_(x),y=u1(r.registerUpdateListener(k));return document.addEventListener("mouseup",k),()=>{y(),document.removeEventListener("mouseup",k)}},S=[r,_,x],e[9]=r,e[10]=_,e[11]=x,e[12]=E,e[13]=S):(E=e[12],S=e[13]),f1(E,S);let T;e[14]!==i||e[15]!==r||e[16]!==n?(T=()=>{i.enabled&&r.focus(()=>{r.update(g1),n.onSelect?.({editor:r,isActive:i.active})})},e[14]=i,e[15]=r,e[16]=n,e[17]=T):T=e[17];let C=T,g=x1,b;return e[18]!==o||e[19]!==f||e[20]!==C||e[21]!==n.key?(b=c1("button",{className:f,"data-button-key":n.key,onClick:C,onMouseDown:g,type:"button",children:o}),e[18]=o,e[19]=f,e[20]=C,e[21]=n.key,e[22]=b):b=e[22],b};function g1(){d1("toolbar")}function x1(t){t.preventDefault()}import{c as E1}from"react/compiler-runtime";import{jsx as ot}from"react/jsx-runtime";import Fs,{useCallback as S1,useDeferredValue as N1,useEffect as L1,useMemo as y1}from"react";import{mergeRegister as R1}from"@lexical/utils";import{useTranslation as I1}from"@payloadcms/ui";import{$getSelection as v1}from"lexical";import{jsx as Re,jsxs as vs}from"react/jsx-runtime";import{Button as C1}from"@payloadcms/ui";import{$addUpdateTag as b1,isDOMNode as k1}from"lexical";import xo,{useCallback as _1,useEffect as Co,useMemo as Ds,useRef as Sr,useState as Nr}from"react";import{createPortal as T1}from"react-dom";var Ms="toolbar-popup__dropdown-item",$s=xo.createContext(null);function As({active:t,children:e,editor:o,enabled:r,Icon:n,item:l,itemKey:i,tooltip:s}){let d=Ds(()=>[Ms,r===!1?"disabled":"",t?"active":"",l?.key?`${Ms}-${l.key}`:""].filter(Boolean).join(" "),[r,t,l.key]),c=Sr(null),u=xo.use($s);if(u===null)throw new Error("DropDownItem must be used within a DropDown");let{registerItem:a}=u;return Co(()=>{c?.current!=null&&a(c)},[c,a]),Re(C1,{"aria-label":s,buttonStyle:"none",className:d,disabled:r===!1,extraButtonProps:{"data-item-key":i},icon:n,iconPosition:"left",iconStyle:"none",onClick:()=>{r!==!1&&o.focus(()=>{o.update(()=>{b1("toolbar")}),l.onSelect?.({editor:o,isActive:t})})},onMouseDown:m=>{m.preventDefault()},ref:c,tooltip:s,type:"button",children:e})}function w1({children:t,dropDownRef:e,itemsContainerClassNames:o,onClose:r}){let[n,l]=Nr(),[i,s]=Nr(),d=_1(a=>{l(m=>m!=null?[...m,a]:[a])},[l]),c=a=>{if(n==null)return;let{key:m}=a;["ArrowDown","ArrowUp","Escape","Tab"].includes(m)&&a.preventDefault(),m==="Escape"||m==="Tab"?r():m==="ArrowUp"?s(p=>{if(p==null)return n[0];let f=n.indexOf(p)-1;return n[f===-1?n.length-1:f]}):m==="ArrowDown"&&s(p=>p==null?n[0]:n[n.indexOf(p)+1])},u=Ds(()=>({registerItem:d}),[d]);return Co(()=>{n!=null&&i==null&&s(n[0]),i!=null&&i?.current!=null&&i.current.focus()},[n,i]),Re($s,{value:u,children:Re("div",{className:(o??["toolbar-popup__dropdown-items"]).join(" "),onKeyDown:c,ref:e,children:t})})}function Os({buttonAriaLabel:t,buttonClassName:e,children:o,disabled:r=!1,dropdownKey:n,Icon:l,itemsContainerClassNames:i,label:s,stopCloseOnClickSelf:d}){let c=Sr(null),u=Sr(null),[a,m]=Nr(!1),p=()=>{m(!1),u?.current!=null&&u.current.focus()};Co(()=>{let h=u.current,x=c.current;if(a&&h!==null&&x!==null){let{left:_,top:E}=h.getBoundingClientRect(),S=window.scrollY||document.documentElement.scrollTop;x.style.top=`${E+S+h.offsetHeight+5}px`,x.style.left=`${Math.min(_-5,window.innerWidth-x.offsetWidth-20)}px`}},[c,u,a]),Co(()=>{let h=u.current;if(h!==null&&a){let x=_=>{let E=_.target;k1(E)&&(d&&c.current&&c.current.contains(E)||h.contains(E)||m(!1))};return document.addEventListener("click",x),()=>{document.removeEventListener("click",x)}}},[c,u,a,d]);let f=T1(Re(w1,{dropDownRef:c,itemsContainerClassNames:i,onClose:p,children:o}),document.body);return vs(xo.Fragment,{children:[vs("button",{"aria-label":t,className:e+(a?" active":""),"data-dropdown-key":n,disabled:r,onClick:h=>{h.preventDefault(),m(!a)},onMouseDown:h=>{h.preventDefault()},ref:u,type:"button",children:[l&&Re(l,{}),s&&Re("span",{className:"toolbar-popup__dropdown-label",children:s}),Re("i",{className:"toolbar-popup__dropdown-caret"})]}),a&&Re(xo.Fragment,{children:f})]})}var Lr="toolbar-popup__dropdown",M1=t=>{let e=E1(14),{active:o,anchorElem:r,editor:n,enabled:l,item:i}=t,{i18n:s}=I1(),{fieldProps:d}=H(),{featureClientSchemaMap:c,schemaPath:u}=d;if(i.Component){let m;return e[0]!==o||e[1]!==r||e[2]!==n||e[3]!==l||e[4]!==i?(m=i?.Component&&ot(i.Component,{active:o,anchorElem:r,editor:n,enabled:l,item:i},i.key),e[0]=o,e[1]=r,e[2]=n,e[3]=l,e[4]=i,e[5]=m):m=e[5],m}let a;if(e[6]!==o||e[7]!==n||e[8]!==l||e[9]!==c||e[10]!==s||e[11]!==i||e[12]!==u){let m=i.key,p;i.label&&(m=typeof i.label=="function"?i.label({featureClientSchemaMap:c,i18n:s,schemaPath:u}):i.label),m.length>25?p=m.substring(0,25)+"...":p=m,a=ot(As,{active:o,editor:n,enabled:l,Icon:i?.ChildComponent?ot(i.ChildComponent,{}):void 0,item:i,itemKey:i.key,tooltip:m,children:ot("span",{className:"text",children:p})},i.key),e[6]=o,e[7]=n,e[8]=l,e[9]=c,e[10]=s,e[11]=i,e[12]=u,e[13]=a}else a=e[13];return a},D1=Fs.memo(M1),je=({anchorElem:t,classNames:e,editor:o,group:r,Icon:n,itemsContainerClassNames:l,label:i,maxActiveItems:s,onActiveChange:d})=>{let[c,u]=Fs.useState({activeItemKeys:[],enabledGroup:!0,enabledItemKeys:[]}),a=N1(c),m=H(),{items:p,key:f}=r,h=Gt(),x=S1(()=>{o.getEditorState().read(()=>{let E=v1();if(!E)return;let S=[],T=[],C=[];for(let g of p)g.isActive&&(!s||S.length<s)&&g.isActive({editor:o,editorConfigContext:m,selection:E})&&(S.push(g.key),T.push(g)),g.isEnabled?g.isEnabled({editor:o,editorConfigContext:m,selection:E})&&C.push(g.key):C.push(g.key);u({activeItemKeys:S,enabledGroup:r.isEnabled?r.isEnabled({editor:o,editorConfigContext:m,selection:E}):!0,enabledItemKeys:C}),d&&d({activeItems:T})})},[o,m,r,p,s,d]);L1(()=>(h(x),R1(o.registerUpdateListener(async()=>{await h(x)}))),[o,h,x]);let _=y1(()=>p?.length?p.map(E=>ot(D1,{active:a.activeItemKeys.includes(E.key),anchorElem:t,editor:o,enabled:a.enabledItemKeys.includes(E.key),item:E},E.key)):null,[p,a,t,o]);return ot(Os,{buttonAriaLabel:`${f} dropdown`,buttonClassName:[Lr,`${Lr}-${f}`,...e||[]].filter(Boolean).join(" "),disabled:!a.enabledGroup,dropdownKey:f,Icon:n,itemsContainerClassNames:[`${Lr}-items`,...l||[]],label:i,children:_},f)};function j1({anchorElem:t,editor:e,item:o}){return o.Component?o?.Component&&se(o.Component,{anchorElem:t,editor:e,item:o},o.key):o.ChildComponent?se(Mt,{editor:e,item:o,children:se(o.ChildComponent,{})},o.key):null}function H1(t){let e=Ps(23),{anchorElem:o,editor:r,editorConfig:n,group:l,index:i}=t,{i18n:s}=P1(),{fieldProps:d}=H(),{featureClientSchemaMap:c,schemaPath:u}=d,[a,m]=we.useState(void 0),[p,f]=we.useState(void 0),h;e[0]!==l.ChildComponent||e[1]!==l.items||e[2]!==l.type?(h=()=>{l?.type==="dropdown"&&l.items.length&&l.ChildComponent?f(()=>l.ChildComponent):f(void 0)},e[0]=l.ChildComponent,e[1]=l.items,e[2]=l.type,e[3]=h):h=e[3];let x;e[4]!==l?(x=[l],e[4]=l,e[5]=x):x=e[5],we.useEffect(h,x);let _;e[6]!==c||e[7]!==l.ChildComponent||e[8]!==l.items||e[9]!==l.type||e[10]!==s||e[11]!==u?(_=C=>{let{activeItems:g}=C;if(!g.length){l?.type==="dropdown"&&l.items.length&&l.ChildComponent?(f(()=>l.ChildComponent),m(void 0)):(f(void 0),m(void 0));return}let b=g[0],k=b.key;b.label&&(k=typeof b.label=="function"?b.label({featureClientSchemaMap:c,i18n:s,schemaPath:u}):b.label),k.length>25&&(k=k.substring(0,25)+"..."),g.length===1?(m(k),f(()=>b.ChildComponent)):(m(s.t("lexical:general:toolbarItemsActive",{count:g.length})),l?.type==="dropdown"&&l.items.length&&l.ChildComponent?f(()=>l.ChildComponent):f(void 0))},e[6]=c,e[7]=l.ChildComponent,e[8]=l.items,e[9]=l.type,e[10]=s,e[11]=u,e[12]=_):_=e[12];let E=_,S=`fixed-toolbar__group fixed-toolbar__group-${l.key}`,T;return e[13]!==p||e[14]!==o||e[15]!==a||e[16]!==r||e[17]!==n.features.toolbarFixed?.groups.length||e[18]!==l||e[19]!==i||e[20]!==E||e[21]!==S?(T=$1("div",{className:S,"data-toolbar-group-key":l.key,children:[l.type==="dropdown"&&l.items.length?p?se(je,{anchorElem:o,editor:r,group:l,Icon:p,itemsContainerClassNames:["fixed-toolbar__dropdown-items"],label:a,maxActiveItems:l.maxActiveItems??1,onActiveChange:E}):se(je,{anchorElem:o,editor:r,group:l,itemsContainerClassNames:["fixed-toolbar__dropdown-items"],label:a,maxActiveItems:l.maxActiveItems??1,onActiveChange:E}):null,l.type==="buttons"&&l.items.length?l.items.map(C=>se(j1,{anchorElem:o,editor:r,item:C},C.key)):null,i<n.features.toolbarFixed?.groups.length-1&&se("div",{className:"divider"})]},l.key),e[13]=p,e[14]=o,e[15]=a,e[16]=r,e[17]=n.features.toolbarFixed?.groups.length,e[18]=l,e[19]=i,e[20]=E,e[21]=S,e[22]=T):T=e[22],T}function U1({anchorElem:t,clientProps:e,editor:o,editorConfig:r,parentWithFixedToolbar:n}){let l=we.useRef(null),i=Bs(),{y:s}=O1(),d=B1(()=>{if(!n||e?.disableIfParentHasFixedToolbar)return null;let u=n.editorContainerRef.current.previousElementSibling;for(;u;){if(u.classList.contains("fixed-toolbar"))return u;u=u.previousElementSibling}return null},[e?.disableIfParentHasFixedToolbar,n]);return F1(()=>{if(!d)return;let c=l.current;if(!c)return;let u=c.getBoundingClientRect(),a=d.getBoundingClientRect();if(!(u.bottom<a.top||u.top>a.bottom))c.classList.remove("fixed-toolbar"),c.classList.add("fixed-toolbar","fixed-toolbar--overlapping"),d.classList.remove("fixed-toolbar"),d.classList.add("fixed-toolbar","fixed-toolbar--hide");else{if(!c.classList.contains("fixed-toolbar--overlapping"))return;c.classList.remove("fixed-toolbar--overlapping"),c.classList.add("fixed-toolbar"),d.classList.remove("fixed-toolbar--hide"),d.classList.add("fixed-toolbar")}},50,[l,d,s]),se("div",{className:"fixed-toolbar",onFocus:c=>{c.stopPropagation()},ref:l,children:i&&se(we.Fragment,{children:r?.features&&r.features?.toolbarFixed?.groups.map((c,u)=>se(H1,{anchorElem:t,editor:o,editorConfig:r,group:c,index:u},c.key))})})}var js=t=>{if(t.parentEditor?.editorConfig){if(t.parentEditor?.editorConfig.resolvedFeatureMap.has("toolbarFixed"))return t.parentEditor;if(t.parentEditor)return js(t.parentEditor)}return!1},Hs=t=>{let e=Ps(6),{clientProps:o}=t,[r]=A1(),n=H();if(!Bs())return null;let{editorConfig:i}=n,s=o.applyToFocusedEditor&&n.focusedEditor?.editor||r,d=o.applyToFocusedEditor&&n.focusedEditor?.editorConfig||i,c,u;if(e[0]!==o.disableIfParentHasFixedToolbar||e[1]!==s||e[2]!==d||e[3]!==n){u=Symbol.for("react.early_return_sentinel");e:{let a=js(n);if(o?.disableIfParentHasFixedToolbar&&a){u=null;break e}if(!d?.features?.toolbarFixed?.groups?.length){u=null;break e}c=se(U1,{anchorElem:document.body,editor:s,editorConfig:d,parentWithFixedToolbar:a})}e[0]=o.disableIfParentHasFixedToolbar,e[1]=s,e[2]=d,e[3]=n,e[4]=c,e[5]=u}else c=e[4],u=e[5];return u!==Symbol.for("react.early_return_sentinel")?u:c};var W1=$({plugins:[{Component:Hs,position:"aboveContainer"}]});import{c as Gs}from"react/compiler-runtime";import{jsx as ue,jsxs as Vs}from"react/jsx-runtime";import{useLexicalComposerContext as G1}from"@lexical/react/LexicalComposerContext.js";import{useLexicalEditable as V1}from"@lexical/react/useLexicalEditable";import{mergeRegister as Ks}from"@lexical/utils";import{$getSelection as Js,$isRangeSelection as Us,$isTextNode as K1,COMMAND_PRIORITY_LOW as J1,getDOMSelection as Xs,SELECTION_CHANGE_COMMAND as X1}from"lexical";import{useCallback as ko,useEffect as Dt,useRef as Ws,useState as z1}from"react";import*as _o from"react";import{createPortal as Z1}from"react-dom";function yr(t,e){let o=t.getRangeAt(0),r;if(t.anchorNode===e){let n=e;for(;n.firstElementChild!=null;)n=n.firstElementChild;r=n.getBoundingClientRect()}else r=o.getBoundingClientRect();return r}function bo(t){let{alwaysDisplayOnTop:e=!1,anchorElem:o,anchorFlippedOffset:r=0,floatingElem:n,horizontalOffset:l=32,horizontalPosition:i="left",specialHandlingForCaret:s=!1,targetRect:d,verticalGap:c=10}=t,u=o.parentElement;if(d===null||u==null){n.style.opacity="0",n.style.transform="translate(-10000px, -10000px)";return}let a=n.getBoundingClientRect(),m=o.getBoundingClientRect(),p=u.getBoundingClientRect(),f=d.top-a.height-c,h=d.left-l;i==="center"&&(h=d.left+d.width/2-a.width/2);let x=0;return!e&&f<p.top&&!s&&(x=a.height+d.height+c*2,f+=x),i==="center"?h+a.width>p.right?h=p.right-a.width-l:h<p.left&&(h=p.left+l):h+a.width>p.right&&(h=p.right-a.width-l),h-=m.left,n.style.opacity="1",s&&r!==0?(f-=m.bottom-r+a.height-3,n.style.transform=`translate(${h}px, ${f}px) rotate(180deg)`):(f-=m.top,n.style.transform=`translate(${h}px, ${f}px)`),x}function Y1({anchorElem:t,editor:e,item:o}){return o.Component?o?.Component&&ue(o.Component,{anchorElem:t,editor:e,item:o},o.key):o.ChildComponent?ue(Mt,{editor:e,item:o,children:ue(o.ChildComponent,{})},o.key):null}function q1(t){let e=Gs(19),{anchorElem:o,editor:r,group:n,index:l}=t,{editorConfig:i}=H(),[s,d]=_o.useState(),c;e[0]!==n.ChildComponent||e[1]!==n.items||e[2]!==n.type?(c=()=>{n?.type==="dropdown"&&n.items.length&&n.ChildComponent?d(()=>n.ChildComponent):d(void 0)},e[0]=n.ChildComponent,e[1]=n.items,e[2]=n.type,e[3]=c):c=e[3];let u;e[4]!==n?(u=[n],e[4]=n,e[5]=u):u=e[5],_o.useEffect(c,u);let a;e[6]!==n.ChildComponent||e[7]!==n.items||e[8]!==n.type?(a=h=>{let{activeItems:x}=h;if(!x.length){n?.type==="dropdown"&&n.items.length&&n.ChildComponent?d(()=>n.ChildComponent):d(void 0);return}let _=x[0];d(()=>_?.ChildComponent)},e[6]=n.ChildComponent,e[7]=n.items,e[8]=n.type,e[9]=a):a=e[9];let m=a,p=`inline-toolbar-popup__group inline-toolbar-popup__group-${n.key}`,f;return e[10]!==s||e[11]!==o||e[12]!==r||e[13]!==i.features.toolbarInline?.groups.length||e[14]!==n||e[15]!==l||e[16]!==m||e[17]!==p?(f=Vs("div",{className:p,"data-toolbar-group-key":n.key,children:[n.type==="dropdown"&&n.items.length?s?ue(je,{anchorElem:o,editor:r,group:n,Icon:s,maxActiveItems:n.maxActiveItems??1,onActiveChange:m}):ue(je,{anchorElem:o,editor:r,group:n,maxActiveItems:n.maxActiveItems??1,onActiveChange:m}):null,n.type==="buttons"&&n.items.length?n.items.map(h=>ue(Y1,{anchorElem:o,editor:r,item:h},h.key)):null,l<i.features.toolbarInline?.groups.length-1&&ue("div",{className:"divider"})]},n.key),e[10]=s,e[11]=o,e[12]=r,e[13]=i.features.toolbarInline?.groups.length,e[14]=n,e[15]=l,e[16]=m,e[17]=p,e[18]=f):f=e[18],f}function Q1({anchorElem:t,editor:e}){let o=Ws(null),r=Ws(null),{editorConfig:n}=H(),l=ko(()=>{if(o?.current){let c=o.current.style.opacity==="0",u=o.current.style.pointerEvents==="none";c||(o.current.style.opacity="0"),u||(o.current.style.pointerEvents="none")}},[o]),i=ko(c=>{if(o?.current&&(c.buttons===1||c.buttons===3)){let u=o.current.style.opacity==="0",a=o.current.style.pointerEvents==="none";if(!u||!a){let m=c.clientX,p=c.clientY,f=document.elementFromPoint(m,p);o.current.contains(f)||l()}}},[l]),s=ko(()=>{o?.current&&(o.current.style.opacity!=="1"&&(o.current.style.opacity="1"),o.current.style.pointerEvents!=="auto"&&(o.current.style.pointerEvents="auto"))},[]);Dt(()=>(document.addEventListener("mousemove",i),document.addEventListener("mouseup",s),()=>{document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",s)}),[o,i,s]);let d=ko(()=>{let c=Js(),u=Xs(e._window);if(o.current===null)return;let a=t.querySelector(":scope > .link-editor"),m=a!==null&&"style"in a&&a?.style?.opacity==="1",p=e.getRootElement();if(c!==null&&u!==null&&!u.isCollapsed&&p!==null&&p.contains(u.anchorNode)){let f=yr(u,p),h=bo({alwaysDisplayOnTop:m,anchorElem:t,floatingElem:o.current,horizontalPosition:"center",targetRect:f});r.current&&bo({anchorElem:o.current,anchorFlippedOffset:h,floatingElem:r.current,horizontalOffset:5,horizontalPosition:"center",specialHandlingForCaret:!0,targetRect:f,verticalGap:8})}else l()},[e,l,t]);return Dt(()=>{let c=t.parentElement,u=()=>{e.getEditorState().read(()=>{d()})};return window.addEventListener("resize",u),c&&c.addEventListener("scroll",u),()=>{window.removeEventListener("resize",u),c&&c.removeEventListener("scroll",u)}},[e,d,t]),Dt(()=>(e.getEditorState().read(()=>{d()}),Ks(e.registerUpdateListener(({editorState:c})=>{c.read(()=>{d()})}),e.registerCommand(X1,()=>(d(),!1),J1))),[e,d]),Vs("div",{className:"inline-toolbar-popup",ref:o,children:[ue("div",{className:"caret",ref:r}),n?.features&&n.features?.toolbarInline?.groups.map((c,u)=>ue(q1,{anchorElem:t,editor:e,group:c,index:u},c.key))]})}function eh(t,e){let o=Gs(12),[r,n]=z1(!1),l=V1(),i;o[0]!==t?(i=()=>{t.getEditorState().read(()=>{if(t.isComposing())return;let p=Js(),f=Xs(t._window),h=t.getRootElement();if(f!==null&&(!Us(p)||h===null||!h.contains(f.anchorNode))){n(!1);return}if(!Us(p))return;if(p.getTextContent()!==""){let _=p.getNodes(),E=!1;for(let S of _)if(K1(S)){n(!0),E=!0;break}E||n(!1)}else n(!1);let x=p.getTextContent().replace(/\n/g,"");if(!p.isCollapsed()&&x===""){n(!1);return}})},o[0]=t,o[1]=i):i=o[1];let s=i,d,c;o[2]!==s?(d=()=>(document.addEventListener("selectionchange",s),document.addEventListener("mouseup",s),()=>{document.removeEventListener("selectionchange",s),document.removeEventListener("mouseup",s)}),c=[s],o[2]=s,o[3]=d,o[4]=c):(d=o[3],c=o[4]),Dt(d,c);let u,a;if(o[5]!==t||o[6]!==s?(u=()=>Ks(t.registerUpdateListener(()=>{s()}),t.registerRootListener(()=>{t.getRootElement()===null&&n(!1)})),a=[t,s],o[5]=t,o[6]=s,o[7]=u,o[8]=a):(u=o[7],a=o[8]),Dt(u,a),!r||!l)return null;let m;return o[9]!==e||o[10]!==t?(m=Z1(ue(Q1,{anchorElem:e,editor:t}),e),o[9]=e,o[10]=t,o[11]=m):m=o[11],m}var zs=t=>{let{anchorElem:e}=t,[o]=G1();return eh(o,e)};var th=$({plugins:[{Component:zs,position:"floatingAnchorElem"}]});import{TableCellNode as Gg,TableNode as Vg,TableRowNode as Kg}from"@lexical/table";import{jsx as Zs}from"react/jsx-runtime";import"react";var Rr=()=>Zs("svg",{className:"icon",fill:"none",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:Zs("path",{clipRule:"evenodd",d:"M5.33333 4.5C4.8731 4.5 4.5 4.8731 4.5 5.33333V7.5H9.5V4.5H5.33333ZM5.33333 3.5C4.32081 3.5 3.5 4.32081 3.5 5.33333V14.6667C3.5 15.6792 4.32081 16.5 5.33333 16.5H14.6667C15.6792 16.5 16.5 15.6792 16.5 14.6667V5.33333C16.5 4.32081 15.6792 3.5 14.6667 3.5H5.33333ZM10.5 4.5V7.5H15.5V5.33333C15.5 4.8731 15.1269 4.5 14.6667 4.5H10.5ZM15.5 8.5H10.5V11.5H15.5V8.5ZM15.5 12.5H10.5V15.5H14.6667C15.1269 15.5 15.5 15.1269 15.5 14.6667V12.5ZM9.5 15.5V12.5H4.5V14.6667C4.5 15.1269 4.8731 15.5 5.33333 15.5H9.5ZM4.5 11.5H9.5V8.5H4.5V11.5Z",fill:"currentColor",fillRule:"evenodd"})});import{$createTableCellNode as oh,$createTableNode as rh,$createTableRowNode as nh,$isTableCellNode as Ys,$isTableNode as Ir,$isTableRowNode as vr,TableCellHeaderStates as To,TableCellNode as lh,TableNode as ih,TableRowNode as sh}from"@lexical/table";import{$isParagraphNode as ah,$isTextNode as ch}from"lexical";var Qs=/^\|(.+)\|\s?$/,uh=/^(\| ?:?-*:? ?)+\|\s?$/,ea=({allTransformers:t})=>({type:"element",dependencies:[ih,sh,lh],export:e=>{if(!Ir(e))return null;let o=[];for(let r of e.getChildren()){let n=[];if(!vr(r))continue;let l=!1;for(let i of r.getChildren())Ys(i)&&(n.push(Wt(t,i).replace(/\n/g,"\\n").trim()),i.__headerState===To.ROW&&(l=!0));o.push(`| ${n.join(" | ")} |`),l&&o.push(`| ${n.map(i=>"---").join(" | ")} |`)}return o.join(`
`)},regExp:Qs,replace:(e,o,r)=>{let n=r[0];if(!n)return;if(uh.test(n)){let a=e.getPreviousSibling();if(!a||!Ir(a))return;let m=a.getChildren(),p=m[m.length-1];if(!p||!vr(p))return;p.getChildren().forEach(f=>{Ys(f)&&f.setHeaderStyles(To.ROW,To.ROW)}),e.remove();return}let l=qs(n,t);if(l==null)return;let i=[l],s=e.getPreviousSibling(),d=l.length;for(;s&&!(!ah(s)||s.getChildrenSize()!==1);){let a=s.getFirstChild();if(!ch(a))break;let m=qs(a.getTextContent(),t);if(m==null)break;d=Math.max(d,m.length),i.unshift(m);let p=s.getPreviousSibling();s.remove(),s=p}let c=rh();for(let a of i){let m=nh();c.append(m);for(let p=0;p<d;p++)m.append(p<a.length?a[p]:ta("",t))}let u=e.getPreviousSibling();Ir(u)&&dh(u)===d?(u.append(...c.getChildren()),e.remove()):e.replace(c),c.selectEnd()}});function dh(t){let e=t.getFirstChild();return vr(e)?e.getChildrenSize():0}var ta=(t,e)=>{t=t.replace(/\\n/g,`
`);let o=oh(To.NO_STATUS);return Ut(t,e,o),o},qs=(t,e)=>{let o=t.match(Qs);return!o||!o[1]?null:o[1].split("|").map(r=>ta(r,e))};import{c as ph}from"react/compiler-runtime";import{jsx as P,jsxs as Ee}from"react/jsx-runtime";import{useLexicalComposerContext as ia}from"@lexical/react/LexicalComposerContext";import{useLexicalEditable as fh}from"@lexical/react/useLexicalEditable";import{$computeTableMapSkipCellCheck as ra,$deleteTableColumnAtSelection as hh,$deleteTableRowAtSelection as gh,$getNodeTriplet as xh,$getTableCellNodeFromLexicalNode as na,$getTableColumnIndexFromTableCellNode as Ch,$getTableNodeFromLexicalNodeOrThrow as ve,$getTableRowIndexFromTableCellNode as bh,$insertTableColumnAtSelection as kh,$insertTableRowAtSelection as _h,$isTableCellNode as sa,$isTableSelection as $t,$mergeCells as Th,$unmergeCell as wh,getTableElement as Dr,getTableObserverFromTableElement as $r,TableCellHeaderStates as Ie,TableCellNode as Eh}from"@lexical/table";import{mergeRegister as Sh}from"@lexical/utils";import{useScrollInfo as Nh}from"@payloadcms/ui";import{$getSelection as Eo,$isElementNode as Lh,$isRangeSelection as Ar,$isTextNode as yh,$setSelection as Rh,COMMAND_PRIORITY_CRITICAL as Ih,getDOMSelection as vh,isDOMNode as Mh,SELECTION_CHANGE_COMMAND as Dh}from"lexical";import*as Or from"react";import{useCallback as ae,useEffect as rt,useRef as wo,useState as nt}from"react";import{createPortal as aa}from"react-dom";import{jsx as Mr,jsxs as mh}from"react/jsx-runtime";import"react";var oa=()=>mh("svg",{fill:"none",height:"18",viewBox:"0 0 20 20",width:"18",xmlns:"http://www.w3.org/2000/svg",children:[Mr("path",{d:"M5 11C5.55228 11 6 10.5523 6 10C6 9.44772 5.55228 9 5 9C4.44772 9 4 9.44772 4 10C4 10.5523 4.44772 11 5 11Z",fill:"currentColor"}),Mr("path",{d:"M10 11C10.5523 11 11 10.5523 11 10C11 9.44772 10.5523 9 10 9C9.44772 9 9 9.44772 9 10C9 10.5523 9.44772 11 10 11Z",fill:"currentColor"}),Mr("path",{d:"M15 11C15.5523 11 16 10.5523 16 10C16 9.44772 15.5523 9 15 9C14.4477 9 14 9.44772 14 10C14 10.5523 14.4477 11 15 11Z",fill:"currentColor"})]});function la(t){let e=t.getShape();return{columns:e.toX-e.fromX+1,rows:e.toY-e.fromY+1}}function $h(){let t=Eo();if(Ar(t)&&!t.isCollapsed()||$t(t)&&!t.anchor.is(t.focus)||!Ar(t)&&!$t(t))return!1;let[e]=xh(t.anchor);return e.__colSpan>1||e.__rowSpan>1}function Ah(t){let e=t.getLastDescendant();yh(e)?e.select():Lh(e)?e.selectEnd():e!==null&&e.selectNext()}function Oh({cellMerge:t,contextRef:e,onClose:o,setIsMenuOpen:r,tableCellNode:n}){let[l]=ia(),i=wo(null),[s,d]=nt(n),[c,u]=nt({columns:1,rows:1}),[a,m]=nt(!1),[p,f]=nt(!1),{y:h}=Nh();rt(()=>l.registerMutationListener(Eh,w=>{w.get(s.getKey())==="updated"&&l.getEditorState().read(()=>{d(s.getLatest())})},{skipInitialization:!0}),[l,s]),rt(()=>{l.getEditorState().read(()=>{let w=Eo();if($t(w)){let N=la(w);u(la(w)),m(N.columns>1||N.rows>1)}f($h())})},[l]),rt(()=>{let w=e.current,N=i.current,I=l.getRootElement();if(w!=null&&N!=null&&I!=null){let A=I.getBoundingClientRect(),v=w.getBoundingClientRect();N.style.opacity="1";let O=N.getBoundingClientRect(),D=5,G=v.right+D;if(G+O.width>window.innerWidth||G+O.width>A.right){let J=v.left-O.width-D;G=(J<0?D:J)+window.pageXOffset}N.style.left=`${G+window.pageXOffset}px`;let Q=v.top;if(Q+O.height>window.innerHeight){let J=v.bottom-O.height;Q=J<0?D:J}N.style.top=`${Q}px`}},[e,i,l,h]),rt(()=>{function w(N){i.current!=null&&e.current!=null&&Mh(N.target)&&!i.current.contains(N.target)&&!e.current.contains(N.target)&&r(!1)}return window.addEventListener("click",w),()=>window.removeEventListener("click",w)},[r,e]);let x=ae(()=>{l.update(()=>{if(s.isAttached()){let w=ve(s),N=Dr(w,l.getElementByKey(w.getKey()));if(N===null)throw new Error("Expected to find tableElement in DOM");let I=$r(N);I!==null&&I.$clearHighlight(),w.markDirty(),d(s.getLatest())}Rh(null)})},[l,s]),_=()=>{l.update(()=>{let w=Eo();if(!$t(w))return;let I=w.getNodes().filter(sa),A=Th(I);A&&(Ah(A),o())})},E=()=>{l.update(()=>{wh()})},S=ae(w=>{l.update(()=>{for(let N=0;N<c.rows;N++)_h(w);o()})},[l,o,c.rows]),T=ae(w=>{l.update(()=>{for(let N=0;N<c.columns;N++)kh(w);o()})},[l,o,c.columns]),C=ae(()=>{l.update(()=>{gh(),o()})},[l,o]),g=ae(()=>{l.update(()=>{ve(s).remove(),x(),o()})},[l,s,x,o]),b=ae(()=>{l.update(()=>{hh(),o()})},[l,o]),k=ae(()=>{l.update(()=>{let w=ve(s),N=bh(s),[I]=ra(w,null,null),A=new Set,v=s.getHeaderStyles()^Ie.ROW;if(I[N])for(let O=0;O<I[N].length;O++){let D=I[N][O];D?.cell&&(A.has(D.cell)||(A.add(D.cell),D.cell.setHeaderStyles(v,Ie.ROW)))}x(),o()})},[l,s,x,o]),y=ae(()=>{l.update(()=>{let w=ve(s),N=Ch(s),[I]=ra(w,null,null),A=new Set,v=s.getHeaderStyles()^Ie.COLUMN;if(I)for(let O=0;O<I.length;O++){let D=I?.[O]?.[N];D?.cell&&(A.has(D.cell)||(A.add(D.cell),D.cell.setHeaderStyles(v,Ie.COLUMN)))}x(),o()})},[l,s,x,o]),R=ae(()=>{l.update(()=>{if(s.isAttached()){let w=ve(s);w&&w.setRowStriping(!w.getRowStriping())}x(),o()})},[l,s,x,o]),M=ae(()=>{l.update(()=>{if(s.isAttached()){let w=ve(s);w&&w.setFrozenColumns(w.getFrozenColumns()===0?1:0)}x(),o()})},[l,s,x,o]),L=null;return t&&(a?L=P("button",{className:"item","data-test-id":"table-merge-cells",onClick:()=>_(),type:"button",children:P("span",{className:"text",children:"Merge cells"})}):p&&(L=P("button",{className:"item","data-test-id":"table-unmerge-cells",onClick:()=>E(),type:"button",children:P("span",{className:"text",children:"Unmerge cells"})}))),aa(Ee("div",{className:"table-action-menu-dropdown",onClick:w=>{w.stopPropagation()},ref:i,children:[L?Ee(Or.Fragment,{children:[L,P("hr",{})]}):null,P("button",{className:"item","data-test-id":"table-row-striping",onClick:()=>R(),type:"button",children:P("span",{className:"text",children:"Toggle Row Striping"})}),P("button",{className:"item","data-test-id":"table-freeze-first-column",onClick:()=>M(),type:"button",children:P("span",{className:"text",children:"Toggle First Column Freeze"})}),P("button",{className:"item","data-test-id":"table-insert-row-above",onClick:()=>S(!1),type:"button",children:Ee("span",{className:"text",children:["Insert ",c.rows===1?"row":`${c.rows} rows`," above"]})}),P("button",{className:"item","data-test-id":"table-insert-row-below",onClick:()=>S(!0),type:"button",children:Ee("span",{className:"text",children:["Insert ",c.rows===1?"row":`${c.rows} rows`," below"]})}),P("hr",{}),P("button",{className:"item","data-test-id":"table-insert-column-before",onClick:()=>T(!1),type:"button",children:Ee("span",{className:"text",children:["Insert ",c.columns===1?"column":`${c.columns} columns`," ","left"]})}),P("button",{className:"item","data-test-id":"table-insert-column-after",onClick:()=>T(!0),type:"button",children:Ee("span",{className:"text",children:["Insert ",c.columns===1?"column":`${c.columns} columns`," ","right"]})}),P("hr",{}),P("button",{className:"item","data-test-id":"table-delete-columns",onClick:()=>b(),type:"button",children:P("span",{className:"text",children:"Delete column"})}),P("button",{className:"item","data-test-id":"table-delete-rows",onClick:()=>C(),type:"button",children:P("span",{className:"text",children:"Delete row"})}),P("button",{className:"item","data-test-id":"table-delete",onClick:()=>g(),type:"button",children:P("span",{className:"text",children:"Delete table"})}),P("hr",{}),P("button",{className:"item","data-test-id":"table-row-header",onClick:()=>k(),type:"button",children:Ee("span",{className:"text",children:[(s.__headerState&Ie.ROW)===Ie.ROW?"Remove":"Add"," ","row header"]})}),P("button",{className:"item","data-test-id":"table-column-header",onClick:()=>y(),type:"button",children:Ee("span",{className:"text",children:[(s.__headerState&Ie.COLUMN)===Ie.COLUMN?"Remove":"Add"," ","column header"]})})]}),document.body)}function Fh({anchorElem:t,cellMerge:e}){let[o]=ia(),r=wo(null),n=wo(null),[l,i]=nt(!1),[s,d]=nt(null),c=ae(()=>{let a=r.current,m=Eo(),p=vh(o._window),f=document.activeElement;function h(){a&&(a.classList.remove("table-cell-action-button-container--active"),a.classList.add("table-cell-action-button-container--inactive")),d(null)}if(m==null||a==null)return h();let x=o.getRootElement(),_=null,E=null;if(Ar(m)&&x!==null&&p!==null&&x.contains(p.anchorNode)){let T=na(m.anchor.getNode());if(T==null||(E=o.getElementByKey(T.getKey()),E==null||!T.isAttached()))return h();let C=ve(T),g=Dr(C,o.getElementByKey(C.getKey()));if(g===null)throw new Error("TableActionMenu: Expected to find tableElement in DOM");_=$r(g),d(T)}else if($t(m)){let T=na(m.anchor.getNode());if(!sa(T))throw new Error("TableSelection anchorNode must be a TableCellNode");let C=ve(T),g=Dr(C,o.getElementByKey(C.getKey()));if(g===null)throw new Error("TableActionMenu: Expected to find tableElement in DOM");_=$r(g),E=o.getElementByKey(T.getKey())}else if(!f)return h();if(_===null||E===null)return h();let S=!_||!_.isSelecting;if(a.classList.toggle("table-cell-action-button-container--active",S),a.classList.toggle("table-cell-action-button-container--inactive",!S),S){let T=E.getBoundingClientRect(),C=t.getBoundingClientRect(),g=T.top-C.top,b=T.right-C.left;a.style.transform=`translate(${b}px, ${g}px)`}},[o,t]);rt(()=>{let a,m=()=>{a=void 0,o.getEditorState().read(c)},p=()=>(a===void 0&&(a=setTimeout(m,0)),!1);return Sh(o.registerUpdateListener(p),o.registerCommand(Dh,p,Ih),o.registerRootListener((f,h)=>{h&&h.removeEventListener("pointerup",p),f&&(f.addEventListener("pointerup",p),p())}),()=>clearTimeout(a))});let u=wo(s);return rt(()=>{u.current!==s&&i(!1),u.current=s},[u,s]),P("div",{className:"table-cell-action-button-container",ref:r,children:s!=null&&Ee(Or.Fragment,{children:[P("button",{className:"table-cell-action-button",onClick:a=>{a.stopPropagation(),i(!l)},ref:n,type:"button",children:P(oa,{})}),l&&P(Oh,{cellMerge:e,contextRef:n,onClose:()=>i(!1),setIsMenuOpen:i,tableCellNode:s})]})})}var ca=t=>{let e=ph(3),{anchorElem:o}=t,r=fh(),n;return e[0]!==o||e[1]!==r?(n=aa(r?P(Fh,{anchorElem:o??document.body,cellMerge:!0}):null,o??document.body),e[0]=o,e[1]=r,e[2]=n):n=e[2],n};import{c as Ph}from"react/compiler-runtime";import{jsx as No,jsxs as Bh}from"react/jsx-runtime";import{useLexicalComposerContext as jh}from"@lexical/react/LexicalComposerContext";import{useLexicalEditable as Hh}from"@lexical/react/useLexicalEditable";import{$computeTableMapSkipCellCheck as Uh,$getTableNodeFromLexicalNodeOrThrow as Fr,$getTableRowIndexFromTableCellNode as Wh,$isTableCellNode as ua,$isTableRowNode as Gh,getDOMCellFromTarget as Vh,getTableElement as Kh,TableNode as da}from"@lexical/table";import{calculateZoomLevel as ma,mergeRegister as Jh}from"@lexical/utils";import{$getNearestNodeFromDOMNode as Pr,isHTMLElement as Xh,SKIP_SCROLL_INTO_VIEW_TAG as pa}from"lexical";import*as ha from"react";import{useCallback as At,useEffect as Br,useRef as So,useState as lt}from"react";import{createPortal as zh}from"react-dom";var Zh=33,fa=92;function Yh({editor:t}){let e=So(null),o=So(null),r=So(null),[n,l]=lt(!1),i=H(),s=So(null),[d,c]=lt(null),[u,a]=lt(null),[m,p]=lt(!1),[f,h]=lt(null),x=At(()=>{a(null),e.current=null,h(null),s.current=null,r.current=null},[]),_=M=>(M.buttons&1)===1;Br(()=>{let M=new Set;return Jh(t.registerMutationListener(da,L=>{for(let[w,N]of L)N==="destroyed"?M.delete(w):M.add(w);l(M.size>0)}),t.registerNodeTransform(da,L=>{if(L.getColWidths())return L;let w=L.getColumnCount(),N=fa;return L.setColWidths(Array(w).fill(N)),L}))},[t]),Br(()=>{if(!n)return;let M=I=>{let A=I.target;if(Xh(A)){if(f){c({x:I.clientX,y:I.clientY});return}if(p(_(I)),!(o.current&&o.current.contains(A))&&e.current!==A){e.current=A;let v=Vh(A);v&&u!==v?t.getEditorState().read(()=>{let O=Pr(v.elem);if(!O)throw new Error("TableCellResizer: Table cell node not found.");let D=Fr(O),G=Kh(D,t.getElementByKey(D.getKey()));if(!G)throw new Error("TableCellResizer: Table element not found.");e.current=A,r.current=G.getBoundingClientRect(),a(v)},{editor:t}):v==null&&x()}}},L=I=>{p(!0)},w=I=>{p(!1)},N=t.registerRootListener((I,A)=>{A?.removeEventListener("mousemove",M),A?.removeEventListener("mousedown",L),A?.removeEventListener("mouseup",w),I?.addEventListener("mousemove",M),I?.addEventListener("mousedown",L),I?.addEventListener("mouseup",w)});return()=>{N()}},[u,f,t,n,x]);let E=M=>M==="bottom",S=At(M=>{if(!u)throw new Error("TableCellResizer: Expected active cell.");t.update(()=>{let L=Pr(u.elem);if(!ua(L))throw new Error("TableCellResizer: Table cell node not found.");let w=Fr(L),N=Wh(L),I=w.getChildren(),v=L.getColSpan()===w.getColumnCount()?N:N+L.getRowSpan()-1;if(v>=I.length||v<0)throw new Error("Expected table cell to be inside of table row.");let O=I[v];if(!Gh(O))throw new Error("Expected table row");let D=O.getHeight();if(D===void 0){let Q=O.getChildren();D=Math.min(...Q.map(J=>T(J,t)??1/0))}let G=Math.max(D+M,Zh);O.setHeight(G)},{tag:pa})},[u,t]),T=(M,L)=>L.getElementByKey(M.getKey())?.clientHeight,C=(M,L)=>{let w;return L.forEach(N=>{N.forEach((I,A)=>{I.cell===M&&(w=A)})}),w},g=At(M=>{if(!u)throw new Error("TableCellResizer: Expected active cell.");t.update(()=>{let L=Pr(u.elem);if(!ua(L))throw new Error("TableCellResizer: Table cell node not found.");let w=Fr(L),[N]=Uh(w,null,null),I=C(L,N);if(I===void 0)throw new Error("TableCellResizer: Table column not found.");let A=w.getColWidths();if(!A)return;let v=A[I];if(v===void 0)return;let O=[...A],D=Math.max(v+M,fa);O[I]=D,w.setColWidths(O)},{tag:pa})},[u,t]),b=At(M=>{let L=w=>{if(w.preventDefault(),w.stopPropagation(),!u)throw new Error("TableCellResizer: Expected active cell.");if(s.current){let{x:N,y:I}=s.current;if(u===null)return;let A=ma(w.target);if(E(M)){let v=(w.clientY-I)/A;S(v)}else{let v=(w.clientX-N)/A;g(v)}x(),document.removeEventListener("mouseup",L)}};return L},[u,x,g,S]),k=At(M=>L=>{if(L.preventDefault(),L.stopPropagation(),!u)throw new Error("TableCellResizer: Expected active cell.");s.current={x:L.clientX,y:L.clientY},c(s.current),h(M),document.addEventListener("mouseup",b(M))},[u,b]),[y,R]=lt({bottom:null,left:null,right:null,top:null});return Br(()=>{if(u){let{height:M,left:L,top:w,width:N}=u.elem.getBoundingClientRect(),I=ma(u.elem),A=10,v={bottom:{backgroundColor:"none",cursor:"row-resize",height:`${A}px`,left:`${window.scrollX+L}px`,top:`${window.scrollY+w+M-A/2}px`,width:`${N}px`},right:{backgroundColor:"none",cursor:"col-resize",height:`${M}px`,left:`${window.scrollX+L+N-A/2}px`,top:`${window.scrollY+w}px`,width:`${A}px`}},O=r.current;f&&d&&O&&(E(f)?(v[f].left=`${window.scrollX+O.left}px`,v[f].top=`${window.scrollY+d.y/I}px`,v[f].height="3px",v[f].width=`${O.width}px`):(v[f].top=`${window.scrollY+O.top}px`,v[f].left=`${window.scrollX+d.x/I}px`,v[f].width="3px",v[f].height=`${O.height}px`),v[f].backgroundColor="#adf"),R(v)}else R({bottom:null,left:null,right:null,top:null})},[u,f,d]),No("div",{ref:o,children:u!=null&&!m&&Bh(ha.Fragment,{children:[No("div",{className:`${i.editorConfig.lexical.theme.tableCellResizer} TableCellResizer__ui`,onMouseDown:k("right"),style:y.right||void 0}),No("div",{className:`${i.editorConfig.lexical.theme.tableCellResizer} TableCellResizer__ui`,onMouseDown:k("bottom"),style:y.bottom||void 0})]})})}var ga=()=>{let t=Ph(3),[e]=jh(),o=Hh(),r;return t[0]!==e||t[1]!==o?(r=o?zh(No(Yh,{editor:e}),document.body):null,t[0]=e,t[1]=o,t[2]=r):r=t[2],r};import{c as lg}from"react/compiler-runtime";import{jsx as jr,jsxs as ig,Fragment as sg}from"react/jsx-runtime";import{useLexicalComposerContext as ag}from"@lexical/react/LexicalComposerContext";import{useLexicalEditable as Ea}from"@lexical/react/useLexicalEditable";import{$getTableAndElementByKey as cg,$getTableColumnIndexFromTableCellNode as ug,$getTableRowIndexFromTableCellNode as dg,$insertTableColumnAtSelection as mg,$insertTableRowAtSelection as pg,$isTableCellNode as fg,$isTableNode as ba,getTableElement as hg,TableNode as gg}from"@lexical/table";import{$findMatchingParent as xg,mergeRegister as Cg}from"@lexical/utils";import{$getNearestNodeFromDOMNode as ka,isHTMLElement as bg}from"lexical";import{useEffect as _a,useMemo as kg,useRef as Ta,useState as Lo}from"react";import"react";import{createPortal as _g}from"react-dom";import{c as og}from"react/compiler-runtime";import{useEffect as rg,useRef as ng}from"react";var qh="Expected a function",Qh=Math.max,eg=Math.min;function tg(t,e,o){let r,n,l=0,i,s=!1,d=!1,c,u,a,m=!0;if(typeof t!="function")throw new TypeError(qh);e=e||0,typeof o=="object"&&(s=!!o.leading,d="maxWait"in o,c=d?Qh(o.maxWait||0,e):c,m="trailing"in o?!!o.trailing:m);function p(g){let b=r,k=i;return r=i=void 0,l=g,u=t.apply(k,b),u}function f(g){return l=g,a=setTimeout(_,e),s?p(g):u}function h(g){let b=g-n,k=g-l,y=e-b;return d?eg(y,c-k):y}function x(g){let b=g-n,k=g-l;return n===void 0||b>=e||b<0||d&&k>=c}function _(){let g=Date.now();if(x(g))return E(g);a=setTimeout(_,h(g))}function E(g){return a=void 0,m&&r?p(g):(r=i=void 0,u)}function S(){a!==void 0&&clearTimeout(a),l=0,r=n=i=a=void 0}function T(){return a===void 0?u:E(Date.now())}function C(){let g=Date.now(),b=x(g);if(r=arguments,i=this,n=g,b){if(a===void 0)return f(n);if(d)return clearTimeout(a),a=setTimeout(_,e),p(n)}return a===void 0&&(a=setTimeout(_,e)),u}return C.cancel=S,C.flush=T,C}var xa=tg;function Ca(t,e,o){let r=og(6),n=ng(null),l,i;r[0]!==t||r[1]!==o||r[2]!==e?(l=()=>(n.current=xa(t,e,{maxWait:o}),()=>{n.current?.cancel()}),i=[t,e,o],r[0]=t,r[1]=o,r[2]=e,r[3]=l,r[4]=i):(l=r[3],i=r[4]),rg(l,i);let s;return r[5]===Symbol.for("react.memo_cache_sentinel")?(s=(...c)=>{let u=c;n.current&&n.current(...u)},r[5]=s):s=r[5],s}var wa=20;function Tg({anchorElem:t}){let[e]=ag(),o=Ea(),r=H(),[n,l]=Lo(!1),[i,s]=Lo(!1),[d,c]=Lo(!1),[u,a]=Lo({}),m=Ta(new Set),p=Ta(null),f=Ca(_=>{let{isOutside:E,tableDOMNode:S}=wg(_,r.editorConfig?.lexical);if(E){l(!1),s(!1);return}if(!S)return;p.current=S;let T=null,C=null,g=null;if(e.getEditorState().read(()=>{let v=ka(S);if(fg(v)){let O=xg(v,D=>ba(D));if(!ba(O))return;if(g=hg(O,e.getElementByKey(O.getKey())),g){let D=O.getChildrenSize(),G=O.getChildAtIndex(0)?.getChildrenSize(),Q=dg(v),J=ug(v);Q===D-1?T=v:J===G-1&&(C=v)}}},{editor:e}),!g)return;let b=g.parentElement;if(!b)return;let{bottom:k,height:y,left:R,right:M,width:L,y:w}=g.getBoundingClientRect(),N=!1;b&&b.classList.contains("LexicalEditorTheme__tableScrollableWrapper")&&(N=b.scrollWidth>b.clientWidth);let{left:I,y:A}=t.getBoundingClientRect();T?(s(!1),l(!0),a({height:wa,left:N&&b?b.offsetLeft:R-I,top:k-A+5,width:N&&b?b.offsetWidth:L})):C&&(s(!0),l(!1),a({height:y,left:M-I+5,top:w-A,width:wa}))},50,250),h=kg(()=>new ResizeObserver(()=>{l(!1),s(!1)}),[]);_a(()=>{if(d)return document.addEventListener("mousemove",f),()=>{l(!1),s(!1),document.removeEventListener("mousemove",f)}},[d,f]),_a(()=>Cg(e.registerMutationListener(gg,_=>{e.getEditorState().read(()=>{let E=!1;for(let[S,T]of _)switch(T){case"created":{m.current.add(S),E=!0;break}case"destroyed":{m.current.delete(S),E=!0;break}default:break}if(E){h.disconnect();for(let S of m.current){let{tableElement:T}=cg(S);h.observe(T)}c(m.current.size>0)}},{editor:e})},{skipInitialization:!1})),[e,h]);let x=_=>{e.update(()=>{p.current&&(ka(p.current)?.selectEnd(),_?(pg(),l(!1)):(mg(),s(!1)))})};return o?ig(sg,{children:[n&&jr("button",{"aria-label":"Add Row",className:r.editorConfig.lexical.theme.tableAddRows,onClick:()=>x(!0),style:{...u},type:"button"}),i&&jr("button",{"aria-label":"Add Column",className:r.editorConfig.lexical.theme.tableAddColumns,onClick:()=>x(!1),style:{...u},type:"button"})]}):null}function wg(t,e){let o=t.target;if(bg(o)){let r=o.closest(`td.${e.theme.tableCell}, th.${e.theme.tableCell}`);return{isOutside:!(r||o.closest(`button.${e.theme.tableAddRows}`)||o.closest(`button.${e.theme.tableAddColumns}`)||o.closest(`div.${e.theme.tableCellResizer}`)),tableDOMNode:r}}else return{isOutside:!0,tableDOMNode:null}}function Sa(t){let e=lg(2),{anchorElem:o}=t,r=o===void 0?document.body:o;if(!Ea())return null;let l;return e[0]!==r?(l=_g(jr(Tg,{anchorElem:r}),r),e[0]=r,e[1]=l):l=e[1],l}import{c as Eg}from"react/compiler-runtime";import{jsx as Hr,jsxs as Sg}from"react/jsx-runtime";import{useLexicalComposerContext as Ng}from"@lexical/react/LexicalComposerContext";import{TablePlugin as Lg}from"@lexical/react/LexicalTablePlugin";import{INSERT_TABLE_COMMAND as yg,TableCellNode as Rg,TableNode as Ig,TableRowNode as vg}from"@lexical/table";import{mergeRegister as Mg}from"@lexical/utils";import{formatDrawerSlug as Dg,useEditDepth as $g}from"@payloadcms/ui";import{$getSelection as Ag,$isRangeSelection as Og,COMMAND_PRIORITY_EDITOR as Fg,createCommand as Pg}from"lexical";import{createContext as Bg,use as jg,useEffect as Hg,useMemo as Ug,useState as Wg}from"react";import*as Na from"react";var yo=Pg("OPEN_EMBED_DRAWER_COMMAND"),La=Bg({cellEditorConfig:null,cellEditorPlugins:null,set:()=>{}});function ya({children:t}){let[e,o]=Wg({cellEditorConfig:null,cellEditorPlugins:null});return Hr(La,{value:Ug(()=>({cellEditorConfig:e.cellEditorConfig,cellEditorPlugins:e.cellEditorPlugins,set:(r,n)=>{o({cellEditorConfig:r,cellEditorPlugins:n})}}),[e.cellEditorConfig,e.cellEditorPlugins]),children:t})}var Ra=()=>{let t=Eg(16),[e]=Ng(),o=jg(La),r=$g(),{fieldProps:n,uuid:l}=H(),{schemaPath:i}=n,s="lexical-table-create-"+l,d;t[0]!==r||t[1]!==s?(d=Dg({slug:s,depth:r}),t[0]=r,t[1]=s,t[2]=d):d=t[2];let c=d,{toggleDrawer:u}=fe(c,!0),a;t[3]!==e||t[4]!==u?(a=()=>{if(!e.hasNodes([Ig,vg,Rg]))throw new Error("TablePlugin: TableNode, TableRowNode, or TableCellNode is not registered on editor");return Mg(e.registerCommand(yo,()=>{let h=null;return e.getEditorState().read(()=>{let x=Ag();Og(x)&&(h=x)}),h&&u(),!0},Fg))},t[3]=e,t[4]=u,t[5]=a):a=t[5];let m;t[6]!==o||t[7]!==e||t[8]!==u?(m=[o,e,u],t[6]=o,t[7]=e,t[8]=u,t[9]=m):m=t[9],Hg(a,m);let p;t[10]!==e?(p=(h,x)=>{!x.columns||!x.rows||e.dispatchCommand(yg,{columns:String(x.columns),rows:String(x.rows)})},t[10]=e,t[11]=p):p=t[11];let f;return t[12]!==c||t[13]!==i||t[14]!==p?(f=Sg(Na.Fragment,{children:[Hr(dt,{drawerSlug:c,drawerTitle:"Create Table",featureKey:"experimental_table",handleDrawerSubmit:p,schemaPath:i,schemaPathSuffix:"fields"}),Hr(Lg,{hasCellBackgroundColor:!1,hasCellMerge:!0,hasHorizontalScroll:!0})]}),t[12]=c,t[13]=i,t[14]=p,t[15]=f):f=t[15],f};var Jg=$({markdownTransformers:[ea],nodes:[Vg,Gg,Kg],plugins:[{Component:Ra,position:"normal"},{Component:ga,position:"normal"},{Component:ca,position:"floatingAnchorElem"},{Component:Sa,position:"floatingAnchorElem"}],providers:[ya],slashMenu:{groups:[Y([{Icon:Rr,key:"table",keywords:["table"],label:"Table",onSelect:({editor:t})=>{t.dispatchCommand(yo,{})}}])]},toolbarFixed:{groups:[xe([{ChildComponent:Rr,key:"table",label:"Table",onSelect:({editor:t})=>{t.dispatchCommand(yo,{})}}])]}});import{$isNodeSelection as Rx}from"lexical";import{jsx as Ur,jsxs as Xg}from"react/jsx-runtime";import"react";var Wr=()=>Xg("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[Ur("path",{d:"M14.6667 4H5.33333C4.59695 4 4 4.59695 4 5.33333V14.6667C4 15.403 4.59695 16 5.33333 16H14.6667C15.403 16 16 15.403 16 14.6667V5.33333C16 4.59695 15.403 4 14.6667 4Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),Ur("path",{d:"M7.99984 9.33366C8.73622 9.33366 9.33317 8.73671 9.33317 8.00033C9.33317 7.26395 8.73622 6.66699 7.99984 6.66699C7.26346 6.66699 6.6665 7.26395 6.6665 8.00033C6.6665 8.73671 7.26346 9.33366 7.99984 9.33366Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),Ur("path",{d:"M16 11.9995L13.9427 9.94214C13.6926 9.69218 13.3536 9.55176 13 9.55176C12.6464 9.55176 12.3074 9.69218 12.0573 9.94214L6 15.9995",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})]});import{jsx as $a}from"react/jsx-runtime";import Aa from"bson-objectid";import{$applyNodeReplacement as ex}from"lexical";import*as Oa from"react";import zg from"bson-objectid";function Ro(t,e){if(t.hasAttribute("data-lexical-pending-upload-form-id")){let r=t.getAttribute("data-lexical-pending-upload-form-id");if(r!=null)return{node:e({data:{pending:{formID:r,src:t.getAttribute("src")||""}}})}}if(t.hasAttribute("data-lexical-upload-relation-to")&&t.hasAttribute("data-lexical-upload-id")){let r=t.getAttribute("data-lexical-upload-id"),n=t.getAttribute("data-lexical-upload-relation-to");if(r!=null&&n!=null)return{node:e({data:{fields:{},relationTo:n,value:r}})}}return{node:e({data:{pending:{formID:new zg.default().toHexString(),src:t.getAttribute("src")||""}}})}}import{DecoratorBlockNode as Zg}from"@lexical/react/LexicalDecoratorBlockNode.js";import{addClassNamesToElement as Yg}from"@lexical/utils";import va from"bson-objectid";import{$applyNodeReplacement as qg}from"lexical";var Ot=class extends Zg{__data;constructor({data:e,format:o,key:r}){super(o,r),this.__data=e}static clone(e){return new this({data:e.__data,format:e.__format,key:e.__key})}static getType(){return"upload"}static importDOM(){return{img:e=>({conversion:o=>Ro(o,Ia),priority:0})}}static importJSON(e){e.version===1&&e?.value?.id&&(e.value=e.value.id),e.version===2&&!e?.id&&(e.id=new va.default().toHexString(),e.version=3);let o={id:e.id,fields:e.fields,pending:e.pending,relationTo:e.relationTo,value:e.value},r=Ia({data:o});return r.setFormat(e.format),r}static isInline(){return!1}createDOM(e){let o=document.createElement("div");return Yg(o,e?.theme?.upload),o}decorate(){return null}exportDOM(){let e=document.createElement("img"),o=this.__data;return o.pending?(e.setAttribute("data-lexical-pending-upload-form-id",String(o?.pending?.formID)),e.setAttribute("src",o?.pending?.src||"")):(e.setAttribute("data-lexical-upload-id",String(o?.value)),e.setAttribute("data-lexical-upload-relation-to",o?.relationTo)),{element:e}}exportJSON(){return{...super.exportJSON(),...this.getData(),type:"upload",version:3}}getData(){return this.getLatest().__data}setData(e){let o=this.getWritable();o.__data=e}updateDOM(){return!1}};function Ia({data:t}){return t?.id||(t.id=new va.default().toHexString()),qg(new Ot({data:t}))}import{jsx as Ma}from"react/jsx-runtime";import{ShimmerEffect as Qg}from"@payloadcms/ui";var Da=()=>Ma("div",{className:"lexical-upload",children:Ma(Qg,{height:"95px",width:"203px"})});var tx=Oa.lazy(()=>import("./component-5YLBQB5B.js").then(t=>({default:t.UploadComponent}))),de=class extends Ot{static clone(e){return super.clone(e)}static getType(){return super.getType()}static importDOM(){return{img:e=>({conversion:o=>Ro(o,me),priority:0})}}static importJSON(e){e.version===1&&e?.value?.id&&(e.value=e.value.id),e.version===2&&!e?.id&&(e.id=new Aa.default().toHexString(),e.version=3);let o={id:e.id,fields:e.fields,pending:e.pending,relationTo:e.relationTo,value:e.value},r=me({data:o});return r.setFormat(e.format),r}decorate(e,o){return this.__data.pending?$a(Da,{}):$a(tx,{className:o?.theme?.upload??"LexicalEditorTheme__upload",data:this.__data,format:this.__format,nodeKey:this.getKey()})}exportJSON(){return super.exportJSON()}};function me({data:t}){return t?.id||(t.id=new Aa.default().toHexString()),ex(new de({data:t}))}function it(t){return t instanceof de}import{c as cx}from"react/compiler-runtime";import{jsx as ux}from"react/jsx-runtime";import{useLexicalComposerContext as dx}from"@lexical/react/LexicalComposerContext.js";import{$dfsIterator as Ja,$insertNodeToNearestRoot as Kr,mergeRegister as mx}from"@lexical/utils";import{useBulkUpload as px,useEffectEvent as fx,useModal as hx}from"@payloadcms/ui";import Jr from"bson-objectid";import{$createRangeSelection as gx,$getPreviousSelection as Ua,$getSelection as Wa,$isParagraphNode as Xr,$isRangeSelection as Ga,$setSelection as xx,COMMAND_PRIORITY_EDITOR as Cx,COMMAND_PRIORITY_LOW as Va,createCommand as bx,DROP_COMMAND as kx,getDOMSelectionFromTarget as _x,isHTMLElement as Ka,PASTE_COMMAND as Tx}from"lexical";import{useEffect as wx}from"react";import{c as Fa}from"react/compiler-runtime";import{jsx as Gr}from"react/jsx-runtime";import{useLexicalComposerContext as Pa}from"@lexical/react/LexicalComposerContext.js";import{toast as ox}from"@payloadcms/ui";import{$getNodeByKey as rx,COMMAND_PRIORITY_EDITOR as Ba}from"lexical";import{useEffect as ja,useState as nx}from"react";var lx=({editor:t,relationTo:e,replaceNodeKey:o,value:r})=>{o?t.update(()=>{let n=rx(o);n&&n.replace(me({data:{fields:null,relationTo:e,value:r}}))}):t.dispatchCommand(Vr,{fields:null,relationTo:e,value:r})},ix=t=>{let e=Fa(13),{enabledCollectionSlugs:o}=t,[r]=Pa(),[n,l]=nx(null),i;e[0]!==o?(i={collectionSlugs:o,uploads:!0},e[0]=o,e[1]=i):i=e[1];let{closeListDrawer:s,ListDrawer:d,openListDrawer:c}=vt(i),u,a;e[2]!==r||e[3]!==c?(u=()=>r.registerCommand(Ke,h=>(l(h?.replace?h?.replace.nodeKey:null),c(),!0),Ba),a=[r,c],e[2]=r,e[3]=c,e[4]=u,e[5]=a):(u=e[4],a=e[5]),ja(u,a);let m;e[6]!==s||e[7]!==r||e[8]!==n?(m=h=>{let{collectionSlug:x,doc:_}=h;s(),lx({editor:r,relationTo:x,replaceNodeKey:n,value:_.id})},e[6]=s,e[7]=r,e[8]=n,e[9]=m):m=e[9];let p=m,f;return e[10]!==d||e[11]!==p?(f=Gr(d,{onSelect:p}),e[10]=d,e[11]=p,e[12]=f):f=e[12],f},sx=()=>{let t=Fa(3),[e]=Pa(),o,r;return t[0]!==e?(o=()=>e.registerCommand(Ke,ax,Ba),r=[e],t[0]=e,t[1]=o,t[2]=r):(o=t[1],r=t[2]),ja(o,r),null},Ha=({enabledCollectionSlugs:t})=>t?.length?Gr(ix,{enabledCollectionSlugs:t}):Gr(sx,{});function ax(){return ox.error("No upload collections enabled"),!0}function Ex(t){let e=t.target;return!!(Ka(e)&&!e.closest("code, span.editor-image")&&Ka(e.parentElement)&&e.parentElement.closest("div.ContentEditable__root"))}function Sx(t){let e,o=_x(t.target);if(document.caretRangeFromPoint)e=document.caretRangeFromPoint(t.clientX,t.clientY);else if(t.rangeParent&&o!==null)o.collapse(t.rangeParent,t.rangeOffset||0),e=o.getRangeAt(0);else throw Error("Cannot get the selection when dragging");return e}var Vr=bx("INSERT_UPLOAD_COMMAND"),Xa=t=>{let e=cx(21),{clientProps:o}=t,[r]=dx(),n=o?.disabledCollections,l=o?.enabledCollections,i;e[0]!==n||e[1]!==l?(i={collectionSlugsBlacklist:n,collectionSlugsWhitelist:l,uploads:!0},e[0]=n,e[1]=l,e[2]=i):i=e[2];let{enabledCollectionSlugs:s}=go(i),{drawerSlug:d,setCollectionSlug:c,setInitialForms:u,setOnCancel:a,setOnSuccess:m,setSelectableCollections:p}=px(),{isModalOpen:f,openModal:h}=hx(),x;e[3]!==d||e[4]!==r||e[5]!==s||e[6]!==f||e[7]!==h||e[8]!==c||e[9]!==u||e[10]!==a||e[11]!==m||e[12]!==p?(x=C=>{let{files:g}=C;if(g?.length!==0&&(u(b=>[...b??[],...g.map(Nx)]),!f(d))){if(!s.length||!s[0])return;c(s[0]),p(s),a(()=>{r.update(Lx)}),m(b=>{let k=new Map(b.map(yx));r.update(()=>{for(let y of Ja()){let R=y.node;if(it(R)){let M=R.getData();if(M?.pending){let L=k.get(M.pending?.formID);L&&R.replace(me({data:{id:new Jr.default().toHexString(),fields:{},relationTo:L.collectionSlug,value:L.doc.id}}))}}}})}),h(d)}},e[3]=d,e[4]=r,e[5]=s,e[6]=f,e[7]=h,e[8]=c,e[9]=u,e[10]=a,e[11]=m,e[12]=p,e[13]=x):x=e[13];let _=fx(x),E;e[14]!==r||e[15]!==_?(E=()=>{if(!r.hasNodes([de]))throw new Error("UploadPlugin: UploadNode not registered on editor");return mx(r.registerNodeTransform(de,C=>{let g=C.getData();if(!g?.pending)return;(async function(){let y=null,R=g?.pending?.src,M=g?.pending?.formID;if(R?.startsWith("data:")){let L=R.match(/data:(image\/[a-zA-Z]+);base64,/),w=L?L[1]:"image/png",N=R.replace(/^data:image\/[a-zA-Z]+;base64,/,""),I=atob(N),A=new Array(I.length);for(let D=0;D<I.length;D++)A[D]=I.charCodeAt(D);let v=new Uint8Array(A);y={alt:void 0,file:new File([v],"pasted-image."+w?.split("/",2)[1],{type:w}),formID:M}}else if(R?.startsWith("http")||R?.startsWith("https")){let w=await(await fetch(R)).blob(),N=R.split("/").pop()||"pasted-image"+w.type.split("/",2)[1];y={alt:void 0,file:new File([w],N,{type:w.type}),formID:M}}y&&_({files:[y]})})()}),r.registerCommand(Vr,C=>(r.update(()=>{let g=Wa()||Ua();if(Ga(g)){let b=me({data:{id:C.id,fields:C.fields,relationTo:C.relationTo,value:C.value}}),{focus:k}=g,y=k.getNode();Kr(b),Xr(y)&&!y.__first&&y.remove()}}),!0),Cx),r.registerCommand(Tx,C=>{if(!(C instanceof ClipboardEvent))return!1;let g=C.clipboardData;if(!g?.types?.length||g?.types?.includes("text/html"))return!1;let b=[];return g?.files?.length&&Array.from(g.files).forEach(k=>{b.push({alt:"",file:k,formID:new Jr.default().toHexString()})}),b.length?(r.update(()=>{let k=Wa()||Ua();if(Ga(k))for(let y of b){let R=me({data:{pending:{formID:y.formID,src:URL.createObjectURL(y.file)}}}),{focus:M}=k,L=M.getNode();Kr(R),Xr(L)&&!L.__first&&L.remove()}}),_({files:b}),!0):!1},Va),r.registerCommand(kx,C=>{if(!(C instanceof DragEvent))return!1;let g=C.dataTransfer;if(!g?.types?.length)return!1;let b=[];return g?.files?.length&&Array.from(g.files).forEach(k=>{b.push({alt:"",file:k,formID:new Jr.default().toHexString()})}),b.length?(C.preventDefault(),C.stopPropagation(),r.update(()=>{if(Ex(C)){let k=Sx(C),y=gx();k!=null&&y.applyDOMRange(k),xx(y);for(let R of b){let M=me({data:{pending:{formID:R.formID,src:URL.createObjectURL(R.file)}}}),{focus:L}=y,w=L.getNode();Kr(M),Xr(w)&&!w.__first&&w.remove()}}}),_({files:b}),!0):!1},Va))},e[14]=r,e[15]=_,e[16]=E):E=e[16];let S;e[17]!==r?(S=[r],e[17]=r,e[18]=S):S=e[18],wx(E,S);let T;return e[19]!==s?(T=ux(Ha,{enabledCollectionSlugs:s}),e[19]=s,e[20]=T):T=e[20],T};function Nx(t){return{file:t.file,formID:t.formID}}function Lx(){for(let t of Ja()){let e=t.node;it(e)&&e.getData()?.pending&&e.remove()}}function yx(t){return[t.formID,t]}var Ix=$({nodes:[de],plugins:[{Component:Xa,position:"normal"}],slashMenu:{groups:[Y([{Icon:Wr,key:"upload",keywords:["upload","image","file","img","picture","photo","media"],label:({i18n:t})=>t.t("lexical:upload:label"),onSelect:({editor:t})=>{t.dispatchCommand(Ke,{replace:!1})}}])]},toolbarFixed:{groups:[xe([{ChildComponent:Wr,isActive:({selection:t})=>{if(!Rx(t)||!t.getNodes().length)return!1;let e=t.getNodes()[0];return it(e)},key:"upload",label:({i18n:t})=>t.t("lexical:upload:label"),onSelect:({editor:t})=>{t.dispatchCommand(Ke,{replace:!1})}}])]}});import{c as Mx}from"react/compiler-runtime";import{jsx as Yr}from"react/jsx-runtime";import{ShimmerEffect as Dx,useConfig as $x}from"@payloadcms/ui";import{lazy as Ax,Suspense as Ox,useEffect as Fx,useState as Px}from"react";var za={block:"LexicalEditorTheme__block",blockCursor:"LexicalEditorTheme__blockCursor",characterLimit:"LexicalEditorTheme__characterLimit",code:"LexicalEditorTheme__code",inlineBlock:"LexicalEditorTheme__inlineBlock",heading:{h1:"LexicalEditorTheme__h1",h2:"LexicalEditorTheme__h2",h3:"LexicalEditorTheme__h3",h4:"LexicalEditorTheme__h4",h5:"LexicalEditorTheme__h5",h6:"LexicalEditorTheme__h6"},hr:"LexicalEditorTheme__hr",hrSelected:"LexicalEditorTheme__hrSelected",indent:"LexicalEditorTheme__indent",link:"LexicalEditorTheme__link",list:{checklist:"LexicalEditorTheme__checklist",listitem:"LexicalEditorTheme__listItem",listitemChecked:"LexicalEditorTheme__listItemChecked",listitemUnchecked:"LexicalEditorTheme__listItemUnchecked",nested:{listitem:"LexicalEditorTheme__nestedListItem"},olDepth:["LexicalEditorTheme__ol1","LexicalEditorTheme__ol2","LexicalEditorTheme__ol3","LexicalEditorTheme__ol4","LexicalEditorTheme__ol5"],ul:"LexicalEditorTheme__ul"},ltr:"LexicalEditorTheme__ltr",mark:"LexicalEditorTheme__mark",markOverlap:"LexicalEditorTheme__markOverlap",paragraph:"LexicalEditorTheme__paragraph",placeholder:"LexicalEditorTheme__placeholder",quote:"LexicalEditorTheme__quote",relationship:"LexicalEditorTheme__relationship",rtl:"LexicalEditorTheme__rtl",tab:"LexicalEditorTheme__tabNode",table:"LexicalEditorTheme__table",tableAddColumns:"LexicalEditorTheme__tableAddColumns",tableAddRows:"LexicalEditorTheme__tableAddRows",tableAlignment:{center:"LexicalEditorTheme__tableAlignmentCenter",right:"LexicalEditorTheme__tableAlignmentRight"},tableCell:"LexicalEditorTheme__tableCell",tableCellActionButton:"LexicalEditorTheme__tableCellActionButton",tableCellActionButtonContainer:"LexicalEditorTheme__tableCellActionButtonContainer",tableCellHeader:"LexicalEditorTheme__tableCellHeader",tableCellResizer:"LexicalEditorTheme__tableCellResizer",tableCellSelected:"LexicalEditorTheme__tableCellSelected",tableFrozenColumn:"LexicalEditorTheme__tableFrozenColumn",tableRowStriping:"LexicalEditorTheme__tableRowStriping",tableScrollableWrapper:"LexicalEditorTheme__tableScrollableWrapper",tableSelected:"LexicalEditorTheme__tableSelected",tableSelection:"LexicalEditorTheme__tableSelection",text:{bold:"LexicalEditorTheme__textBold",code:"LexicalEditorTheme__textCode",italic:"LexicalEditorTheme__textItalic",strikethrough:"LexicalEditorTheme__textStrikethrough",subscript:"LexicalEditorTheme__textSubscript",superscript:"LexicalEditorTheme__textSuperscript",underline:"LexicalEditorTheme__textUnderline",underlineStrikethrough:"LexicalEditorTheme__textUnderlineStrikethrough"},upload:"LexicalEditorTheme__upload"};var zr={namespace:"lexical",theme:za};function Za({config:t,featureClientImportMap:e,featureClientSchemaMap:o,field:r,schemaPath:n,unSanitizedEditorConfig:l}){let i=new Map;for(let c of l.features){if(!c?.clientFeatureProps?.featureKey||c?.clientFeatureProps?.order===void 0||c?.clientFeatureProps?.order===null)throw new Error("A Feature you have installed does not return the client props as clientFeatureProps. Please make sure to always return those props, even if they are null, as other important props like order and featureKey are later on injected.");i.set(c.clientFeatureProps.featureKey,c)}l.features=l.features.sort((c,u)=>c.clientFeatureProps.order-u.clientFeatureProps.order);let s=new Map,d=0;for(let c of l.features){let u=typeof c.feature=="function"?c.feature({config:t,featureClientImportMap:e,featureClientSchemaMap:o,featureProviderMap:i,field:r,resolvedFeatures:s,schemaPath:n,unSanitizedEditorConfig:l}):c.feature;u.key=c.clientFeatureProps.featureKey,u.order=d,s.set(c.clientFeatureProps.featureKey,u),d++}return s}import{deepMerge as vx}from"payload/shared";var Ya=t=>{let e={enabledFeatures:[],enabledFormats:[],markdownTransformers:[],nodes:[],plugins:[],providers:[],slashMenu:{dynamicGroups:[],groups:[]},toolbarFixed:{groups:[]},toolbarInline:{groups:[]}},o={};if(t.forEach(r=>{r.key==="toolbarFixed"&&r.sanitizedClientFeatureProps?.customGroups&&(o={...o,...r.sanitizedClientFeatureProps.customGroups})}),!t?.size)return e;t.forEach(r=>{if(r.providers?.length&&(e.providers=e.providers.concat(r.providers)),r.enableFormats?.length&&e.enabledFormats.push(...r.enableFormats),r.nodes?.length)for(let n of r.nodes)e.nodes.push(n);if(r.plugins?.length&&r.plugins.forEach((n,l)=>{e.plugins?.push({clientProps:r.sanitizedClientFeatureProps,Component:n.Component,key:r.key+l,position:n.position})}),r.toolbarInline?.groups?.length)for(let n of r.toolbarInline.groups){let l=e.toolbarInline.groups.find(i=>i.key===n.key);l?e.toolbarInline.groups=e.toolbarInline.groups.filter(i=>i.key!==n.key):l={...n,items:[]},n?.items?.length&&(l.items=l.items.concat(n.items)),e.toolbarInline?.groups.push(l)}if(r.toolbarFixed?.groups?.length)for(let n of r.toolbarFixed.groups){let l=e.toolbarFixed.groups.find(i=>i.key===n.key);l?e.toolbarFixed.groups=e.toolbarFixed.groups.filter(i=>i.key!==n.key):l={...n,items:[]},n?.items?.length&&(l.items=l.items.concat(n.items)),e.toolbarFixed?.groups.push(l)}if(r.slashMenu?.groups){r.slashMenu.dynamicGroups?.length&&(e.slashMenu.dynamicGroups=e.slashMenu.dynamicGroups.concat(r.slashMenu.dynamicGroups));for(let n of r.slashMenu.groups){let l=e.slashMenu.groups.find(i=>i.key===n.key);l?e.slashMenu.groups=e.slashMenu.groups.filter(i=>i.key!==n.key):l={...n,items:[]},n?.items?.length&&(l.items=l.items.concat(n.items)),e.slashMenu.groups.push(l)}}if(r.markdownTransformers?.length)for(let n of r.markdownTransformers)typeof n=="function"?e.markdownTransformers.push(n({allNodes:e.nodes,allTransformers:e.markdownTransformers})):e.markdownTransformers.push(n);e.enabledFeatures.push(r.key)}),Object.keys(o).length>0&&(e.toolbarFixed.groups=e.toolbarFixed.groups.map(r=>{let n=o[r.key];return n?vx(r,n):r})),e.toolbarInline.groups.sort((r,n)=>r.order&&n.order?r.order-n.order:r.order?-1:n.order?1:0),e.toolbarFixed.groups.sort((r,n)=>r.order&&n.order?r.order-n.order:r.order?-1:n.order?1:0);for(let r of e.toolbarInline.groups)r.items.sort((n,l)=>n.order&&l.order?n.order-l.order:n.order?-1:l.order?1:0);for(let r of e.toolbarFixed.groups)r.items.sort((n,l)=>n.order&&l.order?n.order-l.order:n.order?-1:l.order?1:0);return e};function Zr(t,e,o){return{admin:o,features:Ya(t),lexical:e,resolvedFeatureMap:t}}var Bx=Ax(()=>import("./Field-F2KOJLMQ.js").then(t=>({default:t.RichText}))),jx=t=>{let e=Mx(18),{admin:o,clientFeatures:r,featureClientImportMap:n,featureClientSchemaMap:l,field:i,lexicalEditorConfig:s,schemaPath:d}=t,c;e[0]!==o?(c=o===void 0?{}:o,e[0]=o,e[1]=c):c=e[1];let u=c,a;e[2]!==n?(a=n===void 0?{}:n,e[2]=n,e[3]=a):a=e[3];let m=a,p=s===void 0?zr:s,{config:f}=$x(),[h,x]=Px(null),_,E;e[4]!==u||e[5]!==r||e[6]!==f||e[7]!==m||e[8]!==l||e[9]!==i||e[10]!==h||e[11]!==p||e[12]!==d?(_=()=>{if(h)return;let T=[];for(let g of Object.values(r))g.clientFeatureProvider&&T.push(g.clientFeatureProvider(g.clientFeatureProps));let C=Za({config:f,featureClientImportMap:m,featureClientSchemaMap:l,field:i,schemaPath:d??i.name,unSanitizedEditorConfig:{features:T,lexical:p}});x(Zr(C,p,u))},E=[u,r,f,m,l,i,h,p,d],e[4]=u,e[5]=r,e[6]=f,e[7]=m,e[8]=l,e[9]=i,e[10]=h,e[11]=p,e[12]=d,e[13]=_,e[14]=E):(_=e[13],E=e[14]),Fx(_,E);let S;return e[15]!==h||e[16]!==t?(S=Yr(Ox,{fallback:Yr(Dx,{height:"35vh"}),children:h&&Yr(Bx,{...t,editorConfig:h})}),e[15]=h,e[16]=t,e[17]=S):S=e[17],S};function Hx(t){return t instanceof HTMLElement}function Ux(...t){return t.filter(Boolean).join(" ")}var Io=new WeakMap;function qa(t){let e=t.changedTouches[0];return e===void 0?null:[e.clientX,e.clientY]}function vo(t,e){let o=Io.get(t);if(o===void 0){let r=new Set,n=i=>{o!==void 0&&(o.start=qa(i))},l=i=>{if(o===void 0)return;let{start:s}=o;if(s===null)return;let d=qa(i);for(let c of r)d!==null&&c([d[0]-s[0],d[1]-s[1]],i)};t.addEventListener("touchstart",n),t.addEventListener("touchend",l),o={handleTouchend:l,handleTouchstart:n,listeners:r,start:null},Io.set(t,o)}return o.listeners.add(e),()=>{Wx(t,e)}}function Wx(t,e){let o=Io.get(t);if(o===void 0)return;let{listeners:r}=o;r.delete(e),r.size===0&&(Io.delete(t),t.removeEventListener("touchstart",o.handleTouchstart),t.removeEventListener("touchend",o.handleTouchend))}function Gx(t,e){return vo(t,(o,r)=>{let[n,l]=o;n<0&&-n>Math.abs(l)&&e(n,r)})}function Vx(t,e){return vo(t,(o,r)=>{let[n,l]=o;n>0&&n>Math.abs(l)&&e(n,r)})}function Kx(t,e){return vo(t,(o,r)=>{let[n,l]=o;l<0&&-l>Math.abs(n)&&e(n,r)})}function Jx(t,e){return vo(t,(o,r)=>{let[n,l]=o;l>0&&l>Math.abs(n)&&e(n,r)})}import{c as Xx}from"react/compiler-runtime";import{jsx as zx}from"react/jsx-runtime";import"react";var Zx=()=>{let t=Xx(2),{EditButton:e}=he(),o;return t[0]!==e?(o=e?zx(e,{}):null,t[0]=e,t[1]=o):o=t[1],o};import{c as Yx}from"react/compiler-runtime";import{jsx as qx}from"react/jsx-runtime";import"react";var Qx=()=>{let t=Yx(2),{RemoveButton:e}=he(),o;return t[0]!==e?(o=e?qx(e,{}):null,t[0]=e,t[1]=o):o=t[1],o};import{c as eC}from"react/compiler-runtime";import{jsx as tC}from"react/jsx-runtime";import"react";var oC=()=>{let t=eC(2),{Label:e}=he(),o;return t[0]!==e?(o=e?tC(e,{}):null,t[0]=e,t[1]=o):o=t[1],o};import{c as rC}from"react/compiler-runtime";import{jsx as nC}from"react/jsx-runtime";import"react";var lC=t=>{let e=rC(3),{children:o}=t,{InlineBlockContainer:r}=he(),n;return e[0]!==r||e[1]!==o?(n=r?nC(r,{children:o}):null,e[0]=r,e[1]=o,e[2]=n):n=e[2],n};import{jsx as iC}from"react/jsx-runtime";import"react";var sC=t=>{let{children:e,...o}=t,{BlockCollapsible:r}=ge();return r?iC(r,{...o,children:e}):null};import{c as aC}from"react/compiler-runtime";import{jsx as cC}from"react/jsx-runtime";import"react";var uC=()=>{let t=aC(2),{EditButton:e}=ge(),o;return t[0]!==e?(o=e?cC(e,{}):null,t[0]=e,t[1]=o):o=t[1],o};import{c as dC}from"react/compiler-runtime";import{jsx as mC}from"react/jsx-runtime";import"react";var pC=()=>{let t=dC(2),{RemoveButton:e}=ge(),o;return t[0]!==e?(o=e?mC(e,{}):null,t[0]=e,t[1]=o):o=t[1],o};import{stringify as fC}from"qs-esm";var hC=({apiURL:t,depth:e,draft:o,locale:r})=>async({id:l,collectionSlug:i,select:s})=>{let d=fC({depth:e??0,draft:o??!1,locale:r,select:s},{addQueryPrefix:!0});return await fetch(`${t}/${i}/${l}${d}`,{credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},method:"GET"}).then(u=>u.json())};var Qa={customEndRegex:{optional:!0,regExp:/[ \t]*```$/},customStartRegex:/^[ \t]*```(\w+)?/,doNotTrimChildren:!0,export:({fields:t})=>!t.code.includes(`
`)&&!t.language?.length?"```"+t.code+"```":"```"+(t.language||"")+(t.code?`
`+t.code:"")+"\n```",import:({children:t,closeMatch:e,openMatch:o})=>{let r=o?.[1];return t.startsWith(`
`)&&(t=t.slice(1)),t.endsWith(`
`)&&(t=t.slice(0,-1)),!!e&&!t.includes(`
`)&&o?.input?.trim()!=="```"+r?{code:r+(t?.length?t:""),language:""}:{code:t,language:r}}};import{jsx as gC}from"react/jsx-runtime";import{CodeField as xC,useFormFields as CC}from"@payloadcms/ui";import{useMemo as bC}from"react";var Mo={abap:"ABAP",apex:"Apex",azcli:"Azure CLI",bat:"Batch",bicep:"Bicep",cameligo:"CameLIGO",clojure:"Clojure",coffee:"CoffeeScript",cpp:"C++",csharp:"C#",csp:"CSP",css:"CSS",cypher:"Cypher",dart:"Dart",dockerfile:"Dockerfile",ecl:"ECL",elixir:"Elixir",flow9:"Flow9",freemarker2:"FreeMarker 2",fsharp:"F#",go:"Go",graphql:"GraphQL",handlebars:"Handlebars",hcl:"HCL",html:"HTML",ini:"INI",java:"Java",javascript:"JavaScript",julia:"Julia",kotlin:"Kotlin",less:"Less",lexon:"Lexon",liquid:"Liquid",lua:"Lua",m3:"M3",markdown:"Markdown",mdx:"MDX",mips:"MIPS",msdax:"DAX",mysql:"MySQL","objective-c":"Objective-C",pascal:"Pascal",pascaligo:"PascaLIGO",perl:"Perl",pgsql:"PostgreSQL",php:"PHP",pla:"PLA",plaintext:"Plain Text",postiats:"Postiats",powerquery:"Power Query",powershell:"PowerShell",protobuf:"Protobuf",pug:"Pug",python:"Python",qsharp:"Q#",r:"R",razor:"Razor",redis:"Redis",redshift:"Amazon Redshift",restructuredtext:"reStructuredText",ruby:"Ruby",rust:"Rust",sb:"Small Basic",scala:"Scala",scheme:"Scheme",scss:"SCSS",shell:"Shell",solidity:"Solidity",sophia:"Sophia",sparql:"SPARQL",sql:"SQL",st:"Structured Text",swift:"Swift",systemverilog:"SystemVerilog",tcl:"Tcl",twig:"Twig",typescript:"TypeScript",typespec:"TypeSpec",vb:"Visual Basic",wgsl:"WGSL",xml:"XML",yaml:"YAML"};var kC=({autoComplete:t,field:e,forceRender:o,languages:r=Mo,path:n,permissions:l,readOnly:i,renderedBlocks:s,schemaPath:d,typescript:c,validate:u})=>{let a=CC(([x])=>x.language),m=a?.value||a?.initialValue||"typescript",p=r[m],f=bC(()=>({...e,type:"code",admin:{...e.admin,editorOptions:{},editorProps:{defaultPath:m==="ts"?"file.tsx":void 0},language:m}}),[e,m]),h=`${e.name}-${m}-${p}`;return f&&gC(xC,{autoComplete:t,field:f,forceRender:o,onMount:(x,_)=>{_.editor.defineTheme("vs-dark",{base:"vs-dark",colors:{"editor.background":"#222222"},inherit:!0,rules:[]}),_.editor.defineTheme("vs",{base:"vs",colors:{"editor.background":"#f5f5f5"},inherit:!0,rules:[]}),_.languages.typescript.typescriptDefaults.setCompilerOptions({allowNonTsExtensions:!0,allowJs:!0,allowSyntheticDefaultImports:!0,esModuleInterop:!0,jsx:_.languages.typescript.JsxEmit.React,moduleResolution:_.languages.typescript.ModuleResolutionKind.NodeJs,noEmit:!0,paths:c?.paths,reactNamespace:"React",target:_.languages.typescript.ScriptTarget[c?.target??"ESNext"],typeRoots:c?.typeRoots??["node_modules/@types"]}),_.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSemanticValidation:!c?.enableSemanticValidation,noSyntaxValidation:!1}),(async()=>{c?.fetchTypes&&Array.isArray(c.fetchTypes)&&c.fetchTypes.length>0&&await Promise.all(c.fetchTypes.map(async S=>{let C=await(await fetch(S.url)).text();_.languages.typescript.typescriptDefaults.addExtraLib(C,S.filePath)}))})()},path:n,permissions:l,readOnly:i,renderedBlocks:s,schemaPath:d,validate:u},h)};import{jsx as re,jsxs as sc}from"react/jsx-runtime";import{useLexicalEditable as LC}from"@lexical/react/useLexicalEditable";import{ChevronIcon as yC,Combobox as RC,CopyToClipboard as IC,PopupList as vC,RenderFields as MC,useForm as DC,useFormFields as ac,useTranslation as $C}from"@payloadcms/ui";import AC from"react";import{jsx as ec}from"react/jsx-runtime";import"react";var tc=()=>ec("svg",{fill:"none",height:"12",viewBox:"0 0 15 12",width:"15",xmlns:"http://www.w3.org/2000/svg",children:ec("path",{d:"M11.3738 8.62598L14.0404 5.95931L11.3738 3.29264M3.37376 3.29264L0.707092 5.95931L3.37376 8.62598M9.04043 0.625977L5.70709 11.2926",stroke:"currentColor",strokeLinecap:"square"})});import{jsx as rc}from"react/jsx-runtime";import"react";import{useCollapsible as TC}from"@payloadcms/ui";import{jsx as oc}from"react/jsx-runtime";import"react";var Do=()=>oc("svg",{fill:"none",height:"15",viewBox:"0 0 15 15",width:"15",xmlns:"http://www.w3.org/2000/svg",children:oc("path",{d:"M7.16667 13.8333V9.83333M7.16667 9.83333L9.16667 11.8333M7.16667 9.83333L5.16667 11.8333M7.16667 4.5V0.5M7.16667 4.5L9.16667 2.5M7.16667 4.5L5.16667 2.5M1.83333 7.16667H0.5M5.83333 7.16667H4.5M9.83333 7.16667H8.5M13.8333 7.16667H12.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})});var _C="code-block-collapse-button",nc=()=>{let{toggle:t}=TC();return rc("button",{className:_C,onClick:t,type:"button",children:rc(Do,{})})};import{jsx as lc,jsxs as wC}from"react/jsx-runtime";import"react";import{useCollapsible as SC,useTranslation as NC}from"@payloadcms/ui";var EC="code-block-floating-collapse-button",ic=()=>{let{isCollapsed:t,toggle:e}=SC(),{t:o}=NC();return t?wC("button",{className:EC,onClick:e,type:"button",children:[lc("span",{children:o("general:collapse")}),lc(Do,{})]}):null};var He="payload-richtext-code-block",OC=t=>{let{languages:e}=t,o=e||Mo,{BlockCollapsible:r,formSchema:n,RemoveButton:l}=ge(),{setModified:i}=DC(),{t:s}=$C(),{codeField:d}=ac(([f])=>({codeField:f?.code})),{selectedLanguageField:c,setSelectedLanguage:u}=ac(([f,h])=>({selectedLanguageField:f?.language,setSelectedLanguage:x=>{h({type:"UPDATE",path:"language",value:x}),i(!0)}})),a=o[c?.value],m=LC(),p=AC.useMemo(()=>Object.entries(o).map(([f,h])=>({name:`${f} ${h}`,Component:re(vC.Button,{active:!1,disabled:!1,onClick:()=>{u(f)},children:re("span",{className:`${He}__language-code`,"data-language":f,children:h})})})),[o,u]);return re(r,{Actions:sc("div",{className:`${He}__actions`,children:[re(RC,{button:sc("div",{className:`${He}__language-selector-button`,"data-selected-language":c?.value,children:[re("span",{children:a}),re(yC,{className:`${He}__chevron`})]}),buttonType:"custom",className:`${He}__language-selector`,disabled:!m,entries:p,horizontalAlign:"right",minEntriesForSearch:8,searchPlaceholder:s("fields:searchForLanguage"),showScrollbar:!0,size:"large"}),re(IC,{value:d?.value??""}),re(nc,{}),m&&re(l,{})]}),className:He,collapsibleProps:{AfterCollapsible:re(ic,{}),disableHeaderToggle:!0,disableToggleIndicator:!0},Pill:re("div",{className:`${He}__pill`,children:re(tc,{})}),children:re(MC,{fields:n,forceRender:!0,parentIndexPath:"",parentPath:"",parentSchemaPath:"",permissions:!0,readOnly:!m})})};import{c as FC}from"react/compiler-runtime";import{jsx as st}from"react/jsx-runtime";import{FieldContext as PC,FieldPathContext as cc,ServerFunctionsContext as uc,ShimmerEffect as BC,useServerFunctions as jC}from"@payloadcms/ui";import HC,{useEffect as UC,useRef as WC}from"react";var GC=t=>{let e=FC(9),{field:o,initialValue:r,Loading:n,path:l,schemaPath:i,setValue:s,value:d}=t,[c,u]=HC.useState(null),a=jC(),{_internal_renderField:m}=a,[p,f]=i.split(".",2),h=l??(o&&"name"in o?o?.name:"")??"",x;e[0]!==m||e[1]!==o||e[2]!==r||e[3]!==l||e[4]!==i?(x=()=>{(async function(){let{Field:y}=await m({field:{...o||{},type:"richText",admin:{...o?.admin||{},hidden:!1}},initialValue:r??void 0,path:l,schemaPath:i});u(y)})()},e[0]=m,e[1]=o,e[2]=r,e[3]=l,e[4]=i,e[5]=x):x=e[5];let _=x,E=WC(!1),S,T;if(e[6]!==_?(S=()=>{E.current||(E.current=!0,_())},T=[_],e[6]=_,e[7]=S,e[8]=T):(S=e[7],T=e[8]),UC(S,T),!c)return typeof n<"u"?n:st(BC,{});let C={...a,getFormState:async b=>a.getFormState({...b,collectionSlug:p==="collection"?f:void 0,globalSlug:p==="global"?f:void 0})};if(typeof d>"u"&&!s)return st(uc,{value:{...C},children:st(cc,{value:h,children:c},h)});let g={disabled:!1,formInitializing:!1,formProcessing:!1,formSubmitted:!1,initialValue:d,path:h,setValue:s??VC,showError:!1,value:d};return st(uc,{value:{...C},children:st(cc,{value:h,children:st(PC,{value:g,children:c})},h)})};function VC(){}function dc({nodes:t,text:e}){let o={root:{type:"root",children:[],direction:"ltr",format:"",indent:0,version:1}};return e&&o.root.children.push({type:"paragraph",children:[{type:"text",detail:0,format:0,mode:"normal",style:"",text:e,version:1}],direction:"ltr",format:"",indent:0,textFormat:0,textStyle:"",version:1}),t?.length&&o.root.children.push(...t),o}var KC=dc;export{_t as $createAutoLinkNode,De as $createBlockNode,ct as $createInlineBlockNode,Ce as $createLinkNode,Be as $createRelationshipNode,me as $createUploadNode,ke as $isAutoLinkNode,Me as $isBlockNode,ut as $isInlineBlockNode,K as $isLinkNode,Tr as $isRelationshipNode,it as $isUploadNode,Sc as AlignFeatureClient,be as AutoLinkNode,sC as BlockCollapsible,uC as BlockEditButton,ie as BlockNode,pC as BlockRemoveButton,Ic as BlockquoteFeatureClient,ju as BlocksFeatureClient,cd as BoldFeatureClient,le as CAN_USE_DOM,ff as ChecklistFeatureClient,OC as CodeBlockBlockComponent,kC as CodeComponent,i0 as DETAIL_TYPE_TO_DETAIL,o0 as DOUBLE_LINE_BREAK,x0 as DebugJsxConverterFeatureClient,a0 as ELEMENT_FORMAT_TO_TYPE,s0 as ELEMENT_TYPE_TO_FORMAT,Cc as ENABLE_SLASH_MENU_COMMAND,fc as EditorConfigProvider,dt as FieldsDrawer,W1 as FixedToolbarFeatureClient,nm as HeadingFeatureClient,Tm as HorizontalRuleFeatureClient,Je as INSERT_BLOCK_COMMAND,Xe as INSERT_INLINE_BLOCK_COMMAND,e0 as IS_ALL_FORMATTING,Pm as IndentFeatureClient,lC as InlineBlockContainer,Zx as InlineBlockEditButton,oC as InlineBlockLabel,at as InlineBlockNode,Qx as InlineBlockRemoveButton,fd as InlineCodeFeatureClient,th as InlineToolbarFeatureClient,Cd as ItalicFeatureClient,n0 as LTR_REGEX,Ff as LexicalPluginToLexicalFeatureClient,qp as LinkFeatureClient,oe as LinkNode,t0 as NON_BREAKING_SPACE,F as NodeFormat,Tf as OrderedListFeatureClient,Kf as ParagraphFeatureClient,gc as Point,r0 as RTL_REGEX,bc as Rect,s1 as RelationshipFeatureClient,Te as RelationshipNode,GC as RenderLexical,jx as RichTextField,Gf as SlateToLexicalFeatureClient,wd as StrikethroughFeatureClient,Ld as SubscriptFeatureClient,vd as SuperscriptFeatureClient,c0 as TEXT_MODE_TO_TYPE,l0 as TEXT_TYPE_TO_FORMAT,u0 as TEXT_TYPE_TO_MODE,ce as TOGGLE_LINK_COMMAND,Jg as TableFeatureClient,ed as TestRecorderFeatureClient,Jd as TextStateFeatureClient,Mt as ToolbarButton,je as ToolbarDropdown,ld as TreeViewFeatureClient,Od as UnderlineFeatureClient,If as UnorderedListFeatureClient,Ix as UploadFeatureClient,de as UploadNode,Jx as addSwipeDownListener,Gx as addSwipeLeftListener,Vx as addSwipeRightListener,Kx as addSwipeUpListener,KC as buildDefaultEditorState,dc as buildEditorState,Qa as codeConverterClient,er as createBlockNode,$ as createClientFeature,C0 as defaultColors,zr as defaultEditorLexicalConfig,yr as getDOMRangeRect,kc as getEnabledNodes,hC as getRestPopulateFn,ze as getSelectedNode,Hx as isHTMLElement,xc as isPoint,Ux as joinClasses,Zr as sanitizeClientEditorConfig,Ya as sanitizeClientFeatures,bo as setFloatingElemPosition,mo as setFloatingElemPositionForLinkEditor,Y as slashMenuBasicGroupWithItems,xe as toolbarAddDropdownGroupWithItems,or as toolbarFeatureButtonsGroupWithItems,q as toolbarFormatGroupWithItems,te as toolbarTextDropdownGroupWithItems,ge as useBlockComponentContext,H as useEditorConfigContext,he as useInlineBlockComponentContext,hc as useLexicalDocumentDrawer,fe as useLexicalDrawer,vt as useLexicalListDrawer};
//# sourceMappingURL=index.js.map
