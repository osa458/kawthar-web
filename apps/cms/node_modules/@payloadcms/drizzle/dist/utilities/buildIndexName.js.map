{"version":3,"sources":["../../src/utilities/buildIndexName.ts"],"sourcesContent":["import type { DrizzleAdapter } from '../types.js'\n\nexport const buildIndexName = ({\n  name,\n  adapter,\n  appendSuffix = true,\n  number = 0,\n}: {\n  adapter: DrizzleAdapter\n  appendSuffix?: boolean\n  name: string\n  number?: number\n}): string => {\n  let indexName = `${name}${number ? `_${number}` : ''}${appendSuffix ? '_idx' : ''}`\n\n  if (indexName.length > 60) {\n    const suffix = `${number ? `_${number}` : ''}${appendSuffix ? '_idx' : ''}`\n    indexName = `${name.slice(0, 60 - suffix.length)}${suffix}`\n  }\n\n  if (!adapter.indexes.has(indexName) && !(indexName in adapter.rawTables)) {\n    adapter.indexes.add(indexName)\n    return indexName\n  }\n\n  return buildIndexName({\n    name,\n    adapter,\n    appendSuffix,\n    number: number + 1,\n  })\n}\n"],"names":["buildIndexName","name","adapter","appendSuffix","number","indexName","length","suffix","slice","indexes","has","rawTables","add"],"mappings":"AAEA,OAAO,MAAMA,iBAAiB,CAAC,EAC7BC,IAAI,EACJC,OAAO,EACPC,eAAe,IAAI,EACnBC,SAAS,CAAC,EAMX;IACC,IAAIC,YAAY,GAAGJ,OAAOG,SAAS,CAAC,CAAC,EAAEA,QAAQ,GAAG,KAAKD,eAAe,SAAS,IAAI;IAEnF,IAAIE,UAAUC,MAAM,GAAG,IAAI;QACzB,MAAMC,SAAS,GAAGH,SAAS,CAAC,CAAC,EAAEA,QAAQ,GAAG,KAAKD,eAAe,SAAS,IAAI;QAC3EE,YAAY,GAAGJ,KAAKO,KAAK,CAAC,GAAG,KAAKD,OAAOD,MAAM,IAAIC,QAAQ;IAC7D;IAEA,IAAI,CAACL,QAAQO,OAAO,CAACC,GAAG,CAACL,cAAc,CAAEA,CAAAA,aAAaH,QAAQS,SAAS,AAAD,GAAI;QACxET,QAAQO,OAAO,CAACG,GAAG,CAACP;QACpB,OAAOA;IACT;IAEA,OAAOL,eAAe;QACpBC;QACAC;QACAC;QACAC,QAAQA,SAAS;IACnB;AACF,EAAC"}