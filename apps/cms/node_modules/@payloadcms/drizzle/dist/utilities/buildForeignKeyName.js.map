{"version":3,"sources":["../../src/utilities/buildForeignKeyName.ts"],"sourcesContent":["import type { DrizzleAdapter } from '../types.js'\n\nexport const buildForeignKeyName = ({\n  name,\n  adapter,\n  number = 0,\n}: {\n  adapter: DrizzleAdapter\n  name: string\n  number?: number\n}): string => {\n  let foreignKeyName = `${name}${number ? `_${number}` : ''}_fk`\n\n  if (foreignKeyName.length > 60) {\n    const suffix = `${number ? `_${number}` : ''}_fk`\n    foreignKeyName = `${name.slice(0, 60 - suffix.length)}${suffix}`\n  }\n\n  if (!adapter.foreignKeys.has(foreignKeyName)) {\n    adapter.foreignKeys.add(foreignKeyName)\n    return foreignKeyName\n  }\n\n  return buildForeignKeyName({\n    name,\n    adapter,\n    number: number + 1,\n  })\n}\n"],"names":["buildForeignKeyName","name","adapter","number","foreignKeyName","length","suffix","slice","foreignKeys","has","add"],"mappings":"AAEA,OAAO,MAAMA,sBAAsB,CAAC,EAClCC,IAAI,EACJC,OAAO,EACPC,SAAS,CAAC,EAKX;IACC,IAAIC,iBAAiB,GAAGH,OAAOE,SAAS,CAAC,CAAC,EAAEA,QAAQ,GAAG,GAAG,GAAG,CAAC;IAE9D,IAAIC,eAAeC,MAAM,GAAG,IAAI;QAC9B,MAAMC,SAAS,GAAGH,SAAS,CAAC,CAAC,EAAEA,QAAQ,GAAG,GAAG,GAAG,CAAC;QACjDC,iBAAiB,GAAGH,KAAKM,KAAK,CAAC,GAAG,KAAKD,OAAOD,MAAM,IAAIC,QAAQ;IAClE;IAEA,IAAI,CAACJ,QAAQM,WAAW,CAACC,GAAG,CAACL,iBAAiB;QAC5CF,QAAQM,WAAW,CAACE,GAAG,CAACN;QACxB,OAAOA;IACT;IAEA,OAAOJ,oBAAoB;QACzBC;QACAC;QACAC,QAAQA,SAAS;IACnB;AACF,EAAC"}